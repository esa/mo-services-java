<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright European Space Agency, 2024

  Generated from MO_MPSS_BB_draft_Post CESG Updates v3B 15/04/2024
-->
<mal:specification
  xmlns:mal = "http://www.ccsds.org/schema/ServiceSchema"
  xmlns:svg = "http://www.w3.org/2000/svg"
  xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance" comment="">
  <mal:area name="MPS" number="5" version="1" comment="Mission Operations Mission Planning and Scheduling Services">

    <mal:service name="PlanningRequest" number="1" comment="The Planning Request Service, introduced in 2.5.2, is provided by a planning function and enables its consumers to manage the submission of planning requests and to receive feedback on their status.  It comprises the following operations, of which only those in capability set 1 are mandatory.
In the context of a hierarchical or federated planning system, the Planning Request Service submitRequest operation can be used to submit a Plan (4.2.6.1) to a planning function, either embedding the Plan in the request itself or passing it by reference.  If passed by reference, the Plan can be retrieved using the Plan Distribution Service (3.3).  Patch plans are not permitted in the context of a planning request.">
      <mal:documentation name="High-level Requirements" order="1">
        3.2.3.1 The following set of mission planning configuration data shall be available to both provider and consumers in any deployment of the planning request service:
        a) Planning Request Definitions (as RequestDefinition objects [4.2.5.1]);
        b) Planning Activity Definitions (as ActivityDefinition objects [4.2.2.1]);
        c) Planning Event Definitions (as EventDefinition objects [4.2.3.1]);
        d) Planning Resource Definitions (as Resource objects [4.2.4.2]) [Optional];
      </mal:documentation>
      <mal:documentation name="Functional Requirements" order="2">
        3.2.4.1 In response to a submitRequest operation, the service provider shall create a corresponding RequestInstance object, set its creationDate and return its identity (key and version) to the consumer.
        3.2.4.2 In response to an updateRequest operation, if supported, the service provider shall create a new version of the referenced RequestInstance object, set its creationDate and return its identity (key and version) to the consumer.
        3.2.4.3 The service provider shall only consider the latest version of a RequestInstance in the generation of future Plans, following a successful updateRequest operation.
        3.2.4.4 In response to a cancelRequest operation, if supported, the service provider shall set the requestStatus of the referenced RequestInstance object to ‘CANCELLED’ and stops it being considered in the generation of future Plans.
        3.2.4.5 In response to internal planning and feedback from external plan execution processes, the service provider shall model the status of RequestInstance objects in accordance with the planning request state model (4.2.5.2).
        NOTE	–	Following a successful updateRequest operation, it is implementation dependent what the status of the previous version of the RequestInstance is set to.  Previous versions may already have been incorporated into Plans.
        3.2.4.6 If a service consumer generates a planning request based on an existing planning request definition, then the PlanningRequestDetails submitted shall:
        a) Reference the source RequestDefinition (key and version) in the definition field;
        b) Contain a matching set of arguments (name and type) to the RequestDefinition in the arguments field;
        c) Have a matching value to the RequestDefinition in the standingOrder field.
        NOTE	–	While typically the PlanningRequestDetails will also have matching content to the RequestDefinition in the activities and constraints fields it is allowed to add and remove individual activities and constraints.
        3.2.4.7 In the context of a planning request that contains or references an existing Plan, the Plan shall be a full plan, patch plans are not permitted.
        3.2.4.8 Following successful inclusion of a planning request in a generated Plan, the service provider shall update the outputPlanRef attribute of the RequestInstance with the identity of the Plan (key and version).
      </mal:documentation>
      <mal:capabilitySet number="1" comment="">
        <mal:requestIP name="submitRequest" number="1" supportInReplay="true" comment="The submitRequest operation sends a planning request to the provider, which then creates a corresponding RequestInstance object and returns its identity to the consumer.">
          <mal:messages>
            <mal:request>
              <mal:field name="requestDetails" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PlanningRequestDetails"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="requestResponse" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PlanningRequestResponse"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="An optional data structure used in the message is not supported by the service provider.">
              <mal:type name="UNSUPPORTED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of Strings giving a dot separated nested index for the unsupported field(s), to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.">
                <mal:type area="MAL" name="String" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
        <mal:requestIP name="getRequestSummaries" number="2" supportInReplay="true" comment="The getRequestSummaries operation allows consumers to obtain a filtered list of currently available RequestInstances.  The request uses the RequestFilter structure to select the set of planning requests of interest, using the following keys:
Domain of the RequestInstance;
Instance ID (key and version) of the RequestInstance;
Creation date-time of the RequestInstance version (as a time range);
Definition ID (key and version) of the RequestInstance (the RequestDefinition from which it was created);
User ID of the PlanningUser who imitated the RequestInstance;
User Reference supplied by the User when submitting the RequestInstance.
The response returns a list of RequestSummaryStatus structures containing the identity (key and version), descriptive header fields, and status of the RequestInstances that match the filter.">
          <mal:messages>
            <mal:request>
              <mal:field name="requestFilter" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="RequestFilter"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="requestSummaries" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="RequestSummaryStatus"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
        <mal:progressIP name="getRequestStatus" number="3" supportInReplay="true" comment="The getRequestStatus operation is used to obtain the current status of one or more known RequestInstances.  The operation uses the Progress interaction pattern, to allow the response to be spread across multiple messages.">
          <mal:messages>
            <mal:progress>
              <mal:field name="requestRefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(RequestInstance)"/>
              </mal:field>
            </mal:progress>
            <mal:acknowledgement>
            </mal:acknowledgement>
            <mal:update>
              <mal:field name="requestStatuses" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="RequestStatusUpdate"/>
              </mal:field>
            </mal:update>
            <mal:response>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:progressIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="2" comment="">
        <mal:submitIP name="cancelRequest" number="4" supportInReplay="true" comment="The cancelRequest operation is used by a consumer to cancel a previously submitted planning request.  The service provider acknowledges the cancellation of the RequestInstance or returns an error.">
          <mal:messages>
            <mal:submit>
              <mal:field name="requestRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(RequestInstance)"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The cancelRequest operation failed to cancel the referenced RequestInstance.">
              <mal:type name="CANCEL_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="3" comment="">
        <mal:requestIP name="updateRequest" number="5" supportInReplay="true" comment="The updateRequest operation may be used to modify the PlanningRequestDetails associated with a previously submitted planning request.  This results in the creation of a new version of the RequestInstance (with the same key) by the service provider, which returns the identity (key and version) of the new version to the consumer.">
          <mal:messages>
            <mal:request>
              <mal:field name="requestRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(RequestInstance)"/>
              </mal:field>
              <mal:field name="requestDetails" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PlanningRequestDetails"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="requestResponse" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PlanningRequestResponse"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="An optional data structure used in the message is not supported by the service provider.">
              <mal:type name="UNSUPPORTED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of Strings giving a dot separated nested index for the unsupported field(s), to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.">
                <mal:type area="MAL" name="String" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The update operation (to Request, PlanStatus, Activity, Event or Resource) failed to update the referenced object.">
              <mal:type name="UPDATE_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="4" comment="">
        <mal:pubsubIP name="monitorRequestStatus" number="6" supportInReplay="true" comment="The monitorRequestStatus operation is used to subscribe to status updates for a filtered set of planning RequestInstances.  The operation uses the Publish-Subscribe interaction pattern, with the body of the notification message comprising a RequestStatusUpdate for a subscribed RequestInstance.">
          <mal:messages>
            <mal:subscriptionKeys>
              <mal:field name="instanceID" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="definitionID" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="userID" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="userReference" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="status" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="UInteger"/>
              </mal:field>
              <mal:field name="outputPlanID" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
            </mal:subscriptionKeys>
            <mal:publishNotify>
              <mal:field name="requestStatusUpdate" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="RequestStatusUpdate"/>
              </mal:field>
            </mal:publishNotify>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:pubsubIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="5" comment="">
        <mal:progressIP name="getRequest" number="7" supportInReplay="true" comment="The getRequest operation is used to obtain the full content of one or more known RequestInstances.  The operation uses the Progress interaction pattern, to allow the response to be spread across multiple messages.">
          <mal:messages>
            <mal:progress>
              <mal:field name="requestRefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(RequestInstance)"/>
              </mal:field>
            </mal:progress>
            <mal:acknowledgement>
            </mal:acknowledgement>
            <mal:update>
              <mal:field name="requestInstances" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="RequestInstance"/>
              </mal:field>
            </mal:update>
            <mal:response>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:progressIP>
      </mal:capabilitySet>
    </mal:service>
    <mal:service name="PlanDistribution" number="2" comment="The Plan Distribution Service, introduced in 2.5.3, is provided by a planning function and enables its consumers to access generated plans and to receive updates on their status.  It comprises the following operations, of which only those in capability set 1 are mandatory.">
      <mal:documentation name="High-level Requirements" order="1">
        3.3.3.1 The following set of mission planning configuration data shall be available to both provider and consumers in a any deployment of the plan distribution service:
        a) Planning Activity Definitions (as ActivityDefinition objects [4.2.2.1]);
        b) Planning Event Definitions (as EventDefinition objects [4.2.3.1]);
        c) Planning Resource Definitions (as Resource objects [4.2.4.2]) [Optional];
      </mal:documentation>
      <mal:documentation name="Functional Requirements" order="2">
        3.3.4.1 If no Plan version is specified in the getPlan and getPlanStatus operations, then the service provider shall assume the latest version of the Plan is required.
        3.3.4.2 In response to internal planning and feedback from external plan execution processes, the service provider shall model the status of Plan objects in accordance with the plan state model (4.2.6.2).
      </mal:documentation>
      <mal:capabilitySet number="1" comment="">
        <mal:requestIP name="getPlanSummaries" number="1" supportInReplay="true" comment="The getPlanSummaries operation allows consumers to obtain a filtered list of currently available Plans.  The request uses the PlanFilter structure to select the set of plans of interest, using the following keys:
Domain of the Plan;
planID (key and version) of the Plan;
precursorPlan of the Plan;
status of the Plan;
originator of the Plan;
validity period of the Plan as a time window.
The response returns a list of PlanSummaryStatus structures containing the identity (key and version), descriptive header fields, and status of the Plans that match the filter.">
          <mal:messages>
            <mal:request>
              <mal:field name="planFilter" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PlanFilter"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="planSummaries" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="PlanSummaryStatus"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
        <mal:progressIP name="getPlan" number="2" supportInReplay="true" comment="The getPlan operation is used to obtain the full content of one or more known Plans.  The operation uses the Progress interaction pattern, to allow the response to be spread across multiple messages.">
          <mal:messages>
            <mal:progress>
              <mal:field name="planRefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(Plan)"/>
              </mal:field>
            </mal:progress>
            <mal:acknowledgement>
            </mal:acknowledgement>
            <mal:update>
              <mal:field name="retrievedPlan" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="Plan"/>
              </mal:field>
            </mal:update>
            <mal:response>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:progressIP>
        <mal:requestIP name="getPlanStatus" number="3" supportInReplay="true" comment="The getPlanStatus operation is used to obtain the current status of one or more known Plans.  The operation uses the Request interaction pattern.">
          <mal:messages>
            <mal:request>
              <mal:field name="planRefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(Plan)"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="responsePlans" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="PlanUpdate"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="2" comment="">
        <mal:pubsubIP name="monitorPlanStatus" number="4" supportInReplay="true" comment="The monitorPlanStatus operation is used to subscribe to status updates for a filtered set of Plans.  The operation uses the Publish-Subscribe interaction pattern, with the body of the notification message comprising a PlanUpdate for a subscribed Plan.">
          <mal:messages>
            <mal:subscriptionKeys>
              <mal:field name="planID" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="precursor" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="status" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="UInteger"/>
              </mal:field>
              <mal:field name="originator" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
            </mal:subscriptionKeys>
            <mal:publishNotify>
              <mal:field name="planUpdate" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PlanUpdate"/>
              </mal:field>
            </mal:publishNotify>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:pubsubIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="3" comment="">
        <mal:pubsubIP name="monitorPlan" number="5" supportInReplay="true" comment="The monitorPlan operation is used by a consumer to subscribe to receive new Plans, or new versions of Plans, as they published.  The operation uses the Publish-Subscribe interaction pattern, with the body of the notification message comprising a Plan.">
          <mal:messages>
            <mal:subscriptionKeys>
              <mal:field name="planID" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="precursor" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="status" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="UInteger"/>
              </mal:field>
              <mal:field name="originator" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
            </mal:subscriptionKeys>
            <mal:publishNotify>
              <mal:field name="plan" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="Plan"/>
              </mal:field>
            </mal:publishNotify>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:pubsubIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="4" comment="">
        <mal:progressIP name="queryPlan" number="6" supportInReplay="true" comment="The queryPlan operation enables a consumer to retrieve a filtered set of plans, based on an extended set of filter criteria, including relevant fields of the plan information sections of the plan, as well as the type of planning activities and planning events contained within the plan.">
          <mal:messages>
            <mal:progress>
              <mal:field name="query" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PlanQuery"/>
              </mal:field>
            </mal:progress>
            <mal:acknowledgement>
            </mal:acknowledgement>
            <mal:update>
              <mal:field name="queriedPlan" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="Plan"/>
              </mal:field>
            </mal:update>
            <mal:response>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:progressIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="5" comment="">
        <mal:requestIP name="getPartialPlan" number="7" supportInReplay="true" comment="The getPartialPlan operation enables a consumer to extract a subset of a Plan that meets the supplied partialPlanFilter.  The filter can select the partial plan content based on:
a shorter period than that covered by the plan, specified by time, position, or events;
a subset of contained ActivityInstances, based on their domain, associated SubPlan or tags.
The PartialPlan returned includes the filter criteria and a version of the plan containing only the ActivityInstances that match those criteria.  It is implementation dependent what is returned in terms of events and resources, but it may be assumed that any related events and resources would be included in the returned partial plan.">
          <mal:messages>
            <mal:request>
              <mal:field name="partialPlanFilter" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PartialPlanFilter"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="partialPlan" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PartialPlan"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
    </mal:service>
    <mal:service name="PlanExecutionControl" number="3" comment="The Plan Execution Control Service, introduced in 2.5.4, is provided by a plan execution function and enables its consumers to submit (and revoke) Plans for execution; to control their execution at plan, sub-plan, and activity levels; and to receive feedback on their execution status.
It comprises the following operations, of which only those in capability set 1 are mandatory.">
      <mal:capabilitySet number="1" comment="">
        <mal:submitIP name="submitPlan" number="1" supportInReplay="true" comment="The submitPlan operation is used to send a plan to a plan execution function (the service provider), making it available for execution.  The service provider acknowledges the reception of the plan or returns an error.
NOTE	– The submitted plan may be a full plan or a patch plan.">
          <mal:messages>
            <mal:submit>
              <mal:field name="plan" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="Plan"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="An optional data structure used in the message is not supported by the service provider.">
              <mal:type name="UNSUPPORTED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of Strings giving a dot separated nested index for the unsupported field(s), to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.">
                <mal:type area="MAL" name="String" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
        <mal:submitIP name="revokePlan" number="2" supportInReplay="true" comment="The revokePlan operation is used to request a plan execution function to revoke a previously submitted Plan, making it unavailable for execution.  The service provider acknowledges the revocation of the Plan or returns an error.">
          <mal:messages>
            <mal:submit>
              <mal:field name="planRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The revokePlan operation failed to revoke the referenced Plan, for example because it has already started executing.">
              <mal:type name="REVOKE_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
        <mal:requestIP name="getPlanStatus" number="3" supportInReplay="true" comment="The getPlanStatus operation is used to obtain the current status of one or more known Plans that have been previously submitted to a plan execution function.">
          <mal:messages>
            <mal:request>
              <mal:field name="planRefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(Plan)"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="planStatus" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="PlanUpdate"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="2" comment="">
        <mal:requestIP name="activatePlan" number="4" supportInReplay="true" comment="The activatePlan operation is used to request the execution of specified Plans that have previously been submitted to a plan execution function.  The service provider enables the execution of the referenced Plans and the ActivityInstances contained within them, subject to the scheduling constraints specified within the Plans.  It is not possible to activate a Plan outside its validity period, or after the start of the Plan period.
NOTES
Multiple plans with a common precursor may have been submitted to a plan execution function.  Usually only one of these is considered the nominal plan, the other alternative or contingency plans having the isAlternate flag set.  It is implementation dependent whether the service provider will allow activation of Plans that have the isAlternate flag set, but this may be blocked for operational safety.  Where this is the case, the plan edit service can be used to change the state of the isAlternate flag prior to activation (see 3.6.4).
In order to activate a patch Plan, the precursor Plan on which it is based must also be activated.  It is recommended that the activatePlan operation references the target Plan (the result of merging the patch Plan with its precursor), rather than the patch Plan itself (although this is allowed).  It is implementation dependent how it is achieved (merge patch with precursor prior to activation, or activate precursor and then merge patch), but if the precursor Plan is not already activated, then activating a target or patch Plan implies that the precursor is also activated.  If the precursor plan has not previously been submitted to the service provider (or has been revoked), then it is not possible to activate the target or patch Plan.">
          <mal:messages>
            <mal:request>
              <mal:field name="planRefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(Plan)"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="activationStatus" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="PlanActivationStatus"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The activatePlan operation failed as the activation was outside the validity period of the Plan, or the start of the planPeriod had already passed.  ">
              <mal:type name="ACTIVATE_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo indicates ‘Validity’ or ‘Expired’ as appropriate.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
        <mal:requestIP name="deactivatePlan" number="5" supportInReplay="true" comment="The deactivatePlan operation is used to request deactivation of specified Plans that have previously been activated.  The service provider disables the execution of the referenced Plans and the ActivityInstances contained within them, where it is possible to do so.
The deactivationMode argument allows selection of the deactivation behaviour.  For example:
Orderly (ceases execution of any new activities, but allows those already initiated to complete);
Rapid (ceases execution of the Plan, but allows activities already initiated to continue until their next defined breakpoint);
Immediate (ceases execution of the Plan and all activities currently in progress).
It should be noted that it is dependent on the service provider implementation which deactivationModes are supported, and that the above list is not exhaustive.
The service provider returns a list of PlanActivationStatus data structures comprising Plan status and activationInfo as a String for each Plan in the deactivation list.  The activationInfo allows the return of deployment specific details on the deactivation, such as the deactivation mode applied or reasons for a failure to deactivate.
If a Plan is deactivated prior to any of its constituent ActivityInstances being executed (or before the specified planPeriodStart), then all new ActivityInstances and EventInstances contained in the Plan are unloaded or removed, and the status of the Plan reverts to SUBMITTED.
If a Plan is deactivated after any of its constituent ActivityInstances have been executed (or after the specified planPeriodStart), then the status of the Plan and the status of all contained ActivityInstances and EventInstances that will not be executed are set to TERMINATED with the additional statusInfo ‘CANCELLED’.">
          <mal:messages>
            <mal:request>
              <mal:field name="planRefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="deactivationMode" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="String"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="activationStatus" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="PlanActivationStatus"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="3" comment="">
        <mal:pubsubIP name="monitorPlanExecution" number="6" supportInReplay="true" comment="The monitorPlanExecution operation is used to subscribe to status updates for a filtered set of Plans that have been submitted to a plan execution function.  The operation uses the Publish-Subscribe interaction pattern, with the body of the notification message comprising a PlanUpdate for a subscribed Plan.
The operation is equivalent to the monitorPlanStatus operation of the Plan Distribution Service, but only reports the status of plans currently being managed by a plan execution function.">
          <mal:messages>
            <mal:subscriptionKeys>
              <mal:field name="planID" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="precursor" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="status" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="UInteger"/>
              </mal:field>
              <mal:field name="originator" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
            </mal:subscriptionKeys>
            <mal:publishNotify>
              <mal:field name="planUpdate" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PlanUpdate"/>
              </mal:field>
            </mal:publishNotify>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:pubsubIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="4" comment="">
        <mal:pubsubIP name="monitorPlanExecutionDetail" number="7" supportInReplay="true" comment="The monitorPlanExecutionDetail operation is used to subscribe to updates that report changes in the detailed execution status for a filtered set of Plan contents at the level of planning activities, events and resources.  A planning function requires feedback at the level of planning activities and events to be able to reconstitute the status of planning requests, as well to support re-planning.  The operation uses the Publish-Subscribe interaction pattern.
It is implementation dependent which details are reported on, but this may be any combination of planning activities, events, and resources.  The notification message body comprises a single structure of the abstract class PlanDetailUpdate, which corresponds to one of the concrete classes ActivityUpdate, EventUpdate, or ResourceUpdate.">
          <mal:messages>
            <mal:subscriptionKeys>
              <mal:field name="planID" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="subPlan" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
              <mal:field name="tags" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="String"/>
              </mal:field>
              <mal:field name="type" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
            </mal:subscriptionKeys>
            <mal:publishNotify>
              <mal:field name="detailUpdate" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PlanDetailUpdate"/>
              </mal:field>
            </mal:publishNotify>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:pubsubIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="5" comment="">
        <mal:requestIP name="activateSubPlan" number="8" supportInReplay="true" comment="The activateSubPlan operation is used to request that the service provider activates the referenced SubPlans and enables the execution of ActivityInstances that are contained in activated Plans and allocated to activated SubPlans.
NOTE
It is implementation dependent whether SubPlans are initially ACTIVATED and therefore do not require activation unless previously deactivated.
Where the operation is directly supported by the service provider there is little reason for the activation to fail, but if the operation is delegated, for example to an on-board scheduler, there is the potential for the operation to fail.">
          <mal:messages>
            <mal:request>
              <mal:field name="subPlanIDs" canBeNull="false" comment="">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="activationStatus" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="SubPlanActivationStatus"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The activateSubPlan operation failed.">
              <mal:type name="ACTIVATE_SUBPLAN_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
        <mal:requestIP name="deactivateSubPlan" number="9" supportInReplay="true" comment="The deactivateSubPlan operation is used to request that the service provider deactivates the referenced SubPlans and disables the execution of ActivityInstances that are contained in activated Plans and allocated to the deactivated SubPlans, where it is possible to do so.
The deactivationMode argument allows selection of the deactivation behaviour.  For example:
Orderly (ceases execution of any new activities, but allows those already initiated to complete);
Rapid (ceases execution of the Sub-plan, but allows activities already initiated to continue until their next defined breakpoint);
Immediate (ceases execution of the Sub-plan and all activities currently in progress).
It should be noted that it is dependent on the service provider implementation which deactivationModes are supported, and that the above list is not exhaustive.
The service provider returns a list of SubPlanActivationStatus data structures comprising sub-plan status and activationInfo as a String for each sub-plan in the deactivation list.  The activationInfo allows the return of deployment specific details on the deactivation, such as the deactivation mode applied or reasons for a failure to deactivate.
NOTE	–	Where the operation is directly supported by the service provider there is little reason for the deactivation to fail, but if the operation is delegated, for example to an on-board scheduler, there is the potential for the operation to fail.">
          <mal:messages>
            <mal:request>
              <mal:field name="subPlanIDs" canBeNull="false" comment="">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
              <mal:field name="deactivationMode" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="String"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="activationStatus" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="SubPlanActivationStatus"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The deactivateSubPlan operation failed.">
              <mal:type name="DEACTIVATE_SUBPLAN_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
        <mal:requestIP name="getSubPlanStatus" number="10" supportInReplay="true" comment="The getSubPlanStatus operation is used to obtain the current status of one or more SubPlans.">
          <mal:messages>
            <mal:request>
              <mal:field name="subPlanIDs" canBeNull="false" comment="">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="subPlanStatus" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="SubPlanUpdate"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="6" comment="">
        <mal:pubsubIP name="monitorSubPlanExecution" number="11" supportInReplay="true" comment="The monitorSubPlanExecution operation is used to subscribe to status updates for a filtered set of SubPlans.  The operation uses the Publish-Subscribe interaction pattern, with the body of the notification message comprising a SubPlanUpdate for a subscribed sub-plan.">
          <mal:messages>
            <mal:subscriptionKeys>
              <mal:field name="subPlan" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
            </mal:subscriptionKeys>
            <mal:publishNotify>
              <mal:field name="subPlanUpdate" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="SubPlanUpdate"/>
              </mal:field>
            </mal:publishNotify>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:pubsubIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="7" comment="">
        <mal:requestIP name="suspendActivity" number="12" supportInReplay="true" comment="The suspendActivity operation is used to request suspension of the execution of selected activities in one or more plans, without changing the state of the plan(s).
The suspentionMode argument allows selection of the suspension behaviour.  For example:
Orderly (suspends execution of any new activities, but allows those already initiated to complete);
Rapid (suspends execution of any new activities, but allows any activities and their sub-activities already initiated to continue until their next defined breakpoint);
Immediate (suspends execution of all activities, including those currently in progress).
It should be noted that it is dependent on the service provider implementation which deactivationModes are supported, and that the above list is not exhaustive.
The service provider responds with a list of ActivitySuspensionStatus data structures comprising activity status and suspensionInfo (as a String) for each activity subject to the suspension request.
The suspensionInfo allows the return of deployment specific details on the suspension, such as the suspension mode applied or reasons for a failure to suspend.">
          <mal:messages>
            <mal:request>
              <mal:field name="planRefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="activityRefs" canBeNull="true" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(ActivityInstance)"/>
              </mal:field>
              <mal:field name="tags" canBeNull="true" comment="">
                <mal:type area="MAL" list="true" name="String"/>
              </mal:field>
              <mal:field name="suspensionMode" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="String"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="suspensionStatus" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ActivitySuspensionStatus"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
        <mal:requestIP name="resumeActivity" number="13" supportInReplay="true" comment="The resumeActivity operation is used to request resumption of the execution of selected activities in one or more plans, without changing the state of the plan(s).
The service provider responds with a list of ActivitySuspensionStatus data structures comprising activity status and suspensionInfo (as a String) for each activity subject to the resumption request.
The suspensionInfo allows the return of deployment specific details on the resumption, such as the reasons for a failure to resume.">
          <mal:messages>
            <mal:request>
              <mal:field name="planRefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="activityRefs" canBeNull="true" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(ActivityInstance)"/>
              </mal:field>
              <mal:field name="tags" canBeNull="true" comment="">
                <mal:type area="MAL" list="true" name="String"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="suspensionStatus" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ActivitySuspensionStatus"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="8" comment="">
        <mal:requestIP name="getActivityStatus" number="14" supportInReplay="true" comment="The getActivityStatus operation is used to request a detailed report from the service provider on the current status of ActivityInstances, selected at activity, sub-plan, or tag levels.">
          <mal:messages>
            <mal:request>
              <mal:field name="planRefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="activityRefs" canBeNull="true" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(ActivityInstance)"/>
              </mal:field>
              <mal:field name="subPlans" canBeNull="true" comment="">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
              <mal:field name="tags" canBeNull="true" comment="">
                <mal:type area="MAL" list="true" name="String"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="activityStatus" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ActivityUpdate"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
    </mal:service>
    <mal:service name="PlanInformationManagement" number="4" comment="The Plan Information Management Service, introduced in 2.5.5, is provided by a planning function and enables its consumers to list and retrieve available MPS configuration data.  This includes definitions for planning requests, planning activities, planning events and planning resources, and also MPS system configuration data.  The service may also be provided by a plan execution function (excluding planning request definitions).  It comprises the following operations, none of which are mandatory.">
      <mal:documentation name="High-level Requirements" order="1">
        3.5.3.1 The following set of mission planning configuration data shall be available to the provider in a any deployment of the plan information management service:
        a) Planning Request Definitions (as RequestDefinition objects [4.2.5.1]);
        b) Planning Activity Definitions (as ActivityDefinition objects [4.2.2.1]);
        c) Planning Event Definitions (as EventDefinition objects [4.2.3.1]);
        d) Planning Resource Definitions (as Resource objects [4.2.4.2]) [Optional];
      </mal:documentation>
      <mal:documentation name="Functional Requirements" order="2">
        3.5.4.1 If no version is specified for the definition to be retrieved in a listItem]Defs or operation then the service provider shall list all available versions of the definition.
      </mal:documentation>
      <mal:capabilitySet number="1" comment="">
        <mal:progressIP name="listRequestDefs" number="1" supportInReplay="true" comment="The listRequestDefs operation is used to obtain a list of available RequestDefinitions (key and version) together with their descriptions.  The list can be filtered by domain or restricted to specified definition IDs.  All available versions are listed.
The domain field is an ordered list of identifiers representing a domain hierarchy, any node of which can use ‘*’ as a wildcard (meaning any domain identifier at that level of the hierarchy).  If a set of domains is required that cannot be represented through the use of wildcards, then the operation will need to be repeated using different domain filters.">
          <mal:messages>
            <mal:progress>
              <mal:field name="domain" canBeNull="true" comment="">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
              <mal:field name="requestDefs" canBeNull="true" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(RequestDefinition)"/>
              </mal:field>
            </mal:progress>
            <mal:acknowledgement>
            </mal:acknowledgement>
            <mal:update>
              <mal:field name="requestDefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="DefListEntry"/>
              </mal:field>
            </mal:update>
            <mal:response>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:progressIP>
        <mal:requestIP name="getRequestDefs" number="2" supportInReplay="true" comment="The getRequestDefs operation is used to retrieve one or more available RequestDefinitions, whose identity is known to the consumer.">
          <mal:messages>
            <mal:request>
              <mal:field name="requestDefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(RequestDefinition)"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="definitions" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="RequestDefinition"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="2" comment="">
        <mal:progressIP name="listEventDefs" number="3" supportInReplay="true" comment="The listEventDefs operation is used to obtain a list of available EventDefinitions (key and version) together with their descriptions.  The list can be filtered by domain or restricted to specified definition IDs.  All available versions are listed.
The domain field is an ordered list of identifiers representing a domain hierarchy, any node of which can use ‘*’ as a wildcard (meaning any domain identifier at that level of the hierarchy).  If a set of domains is required that cannot be represented through the use of wildcards, then the operation will need to be repeated using different domain filters.">
          <mal:messages>
            <mal:progress>
              <mal:field name="domain" canBeNull="true" comment="">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
              <mal:field name="eventDefs" canBeNull="true" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(EventDefinition)"/>
              </mal:field>
            </mal:progress>
            <mal:acknowledgement>
            </mal:acknowledgement>
            <mal:update>
              <mal:field name="eventDefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="DefListEntry"/>
              </mal:field>
            </mal:update>
            <mal:response>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:progressIP>
        <mal:requestIP name="getEventDefs" number="4" supportInReplay="true" comment="The getEventDefs operation is used to retrieve one or more available EventDefinitions, whose identity is known to the consumer.">
          <mal:messages>
            <mal:request>
              <mal:field name="eventDefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(EventDefinition)"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="definitions" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="EventDefinition"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="3" comment="">
        <mal:progressIP name="listActivityDefs" number="5" supportInReplay="true" comment="The listActivityDefs operation is used to obtain a list of available ActivityDefinitions (key and version) together with their descriptions.  The list can be filtered by domain or restricted to specified definition IDs.  All available versions are listed.
The domain field is an ordered list of identifiers representing a domain hierarchy, any node of which can use ‘*’ as a wildcard (meaning any domain identifier at that level of the hierarchy).  If a set of domains is required that cannot be represented through the use of wildcards, then the operation will need to be repeated using different domain filters.">
          <mal:messages>
            <mal:progress>
              <mal:field name="domain" canBeNull="true" comment="">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
              <mal:field name="activityDefs" canBeNull="true" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(ActivityDefinition)"/>
              </mal:field>
              <mal:field name="defaultTags" canBeNull="true" comment="">
                <mal:type area="MAL" list="true" name="String"/>
              </mal:field>
            </mal:progress>
            <mal:acknowledgement>
            </mal:acknowledgement>
            <mal:update>
              <mal:field name="activitytDefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="DefListEntry"/>
              </mal:field>
            </mal:update>
            <mal:response>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:progressIP>
        <mal:requestIP name="getActivityDefs" number="6" supportInReplay="true" comment="The getActivityDefs operation is used to retrieve one or more available ActivityDefinitions, whose identity is known to the consumer.">
          <mal:messages>
            <mal:request>
              <mal:field name="activityDefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(ActivityDefinition)"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="definitions" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ActivityDefinition"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="4" comment="">
        <mal:progressIP name="listResourceDefs" number="7" supportInReplay="true" comment="The listResourceDefs operation is used to obtain a list of available Resources (key and version) together with their descriptions.  The list can be filtered by domain or restricted to data types.  All available versions are listed.
The domain field is an ordered list of identifiers representing a domain hierarchy, any node of which can use ‘*’ as a wildcard (meaning any domain identifier at that level of the hierarchy).  If a set of domains is required that cannot be represented through the use of wildcards, then the operation will need to be repeated using different domain filters.">
          <mal:messages>
            <mal:progress>
              <mal:field name="domain" canBeNull="true" comment="">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
              <mal:field name="dataType" canBeNull="true" comment="">
                <mal:type area="MAL" list="true" name="AttributeType"/>
              </mal:field>
            </mal:progress>
            <mal:acknowledgement>
            </mal:acknowledgement>
            <mal:update>
              <mal:field name="resourceDefs" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="DefListEntry"/>
              </mal:field>
            </mal:update>
            <mal:response>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:progressIP>
        <mal:requestIP name="getResourceDefs" number="8" supportInReplay="true" comment="The getResourceDefs operation is used to retrieve the definition of one or more available Resources, whose identity is known to the consumer.
It should be noted that this operation is designed to retrieve the resource definition and not the current value of the resource (the value field may contain a default value for the resource).">
          <mal:messages>
            <mal:request>
              <mal:field name="resources" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="ObjectRef(Resource)"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="definitions" canBeNull="false" comment="">
                <mal:type area="MPS" list="true" name="Resource"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="5" comment="">
        <mal:requestIP name="getSystemConfig" number="9" supportInReplay="true" comment="The getSystemConfig operation is used to retrieve system configuration data relating to the MPS system.">
          <mal:messages>
            <mal:request>
              <mal:field name="version" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="UInteger"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="systemConfig" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="MPSSystemConfigDetails"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
    </mal:service>
    <mal:service name="PlanEdit" number="5" comment="The Plan Edit Service, introduced in 2.5.6, is provided by a plan execution function and enables its consumers to modify Plans that have already been submitted for execution.  It allows an external user or function to update the status of the Plan; insert, modify, or delete its constituent ActivityInstances and EventInstances; update the value of Resources; and apply a time shift to a Plan.  It comprises the following operations, of which those in capability sets 1 and 2 are mandatory.
In some deployments, the Plan Edit Service could also be provided by a planning function to enable users to make adjustments to their planned activities prior to submission of the plan for execution.">
      <mal:documentation name="High-level Requirements" order="1">
        3.6.3.1 The following set of mission planning configuration data shall be available to both provider and consumers in a any deployment of the plan edit service:
        a) Planning Activity Definitions (as ActivityDefinition objects [4.2.2.1]);
        b) Planning Event Definitions (as EventDefinition objects [4.2.3.1]);
        c) Planning Resource Definitions (as Resource objects [4.2.4.2]) [Optional];
        d) MPS System Configuration Data (as an MPSSysConfig object [4.2.7]);
        e) Functional Requirements.
        3.6.3.2 In response to an updatePlanStatus operation, the service provider shall update the isAlternate flag of the Plan accordingly and apply any change to Plan status consistently with the plan state model (4.2.6.2).
        NOTE	–	It is implementation dependent what the service provider does in the event of a Plan status change when the Plan has executing ActivityInstances.  It is recommended that the plan execution control service is used to manage Plan deactivation in an orderly manner.
        3.6.3.3 In response to an insertActivity operation, the service provider shall create a new ActivityInstance in the referenced Plan and return its identity to the consumer.
        3.6.3.4 In response to an insertEvent operation, the service provider shall create a new EventInstance in the referenced Plan and return its identity to the consumer.
        3.6.3.5 In response to a deleteActivity operation, the service provider shall transition the referenced ActivityInstance to the TERMINATED state.
        NOTE	–	If the ActivityInstance is in the EXECUTING state, then it is implementation dependent what action is taken by the service provider.
        3.6.3.6 In response to a deleteEvent operation, the service provider shall transition the referenced EventInstance to the TERMINATED state.
        NOTE	–	This may also affect any ActivityInstances whose start or end trigger is linked to the deleted EventInstance as a terminated event will not result in the activity being triggered.
        3.6.3.7 In response to an updateActivity operation, the service provider shall apply the changes contained in the ActivityUpdate to the referenced ActivityInstance.
        3.6.3.8 In response to an updateEvent operation, the service provider shall apply the changes contained in the EventUpdate to the referenced EventInstance.
        3.6.3.9 In response to an updateResource operation, the service provider shall apply the changes contained in the ResourceUpdate to the referenced Resource.
        3.6.3.10 In response to an updateResourceProfile operation, the service provider shall apply the supplied ResourceProfile to the referenced Resource.
        3.6.3.11 In response to an applyTimeShift operation, the service provider shall apply the specified time shift to the unexpired (future) content, or the specified time period of the referenced Plan or its SubPlan(s), including temporal start and end triggers on ActivityInstances.
      </mal:documentation>
      <mal:capabilitySet number="1" comment="">
        <mal:submitIP name="updatePlanStatus" number="1" supportInReplay="true" comment="The updatePlanStatus operation may be used to modify the status of a previously submitted Plan.  Directly modifying the status field of a Plan may be used by a third party function to autonomously terminate (or activate) a Plan, but the operation also allows the isAlternate flag to be set or cleared.
It is implementation dependent what action the service provider takes in response to a change of Plan status.  The service provider may not permit certain state changes (for example to modify the status of a TERMINATED plan, which is inconsistent with the plan status model), in which case an UPDATE_FAILED error is returned.
A set of Plans with a common precursor may be submitted to a plan execution function to cater for alternative or contingency scenarios.  All but one of these Plans should have the isAlternate flag set, to inform the plan execution function (and the mission operations team) which is the nominal Plan.  It is implementation dependent whether a plan execution control service provider will allow a Plan to be activated with the isAlternate flag set, but for operational safety reasons this may be blocked.  In a contingency scenario, the updatePlanStatus operation can be used to set the flag on the nominal Plan, and reset the flag on the required contingency Plan, making it operational.">
          <mal:messages>
            <mal:submit>
              <mal:field name="planRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="status" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="PlanStatusEnum"/>
              </mal:field>
              <mal:field name="isAlternate" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Boolean"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The update operation (to Request, PlanStatus, Activity, Event or Resource) failed to update the referenced object.">
              <mal:type name="UPDATE_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="2" comment="">
        <mal:requestIP name="insertActivity" number="2" supportInReplay="true" comment="The insertActivity operation sends an InsertedActivityDetails structure (an ActivityDetails structure with Plan reference and start/end triggers) to the provider, which then creates a corresponding ActivityInstance object in the referenced Plan and returns its identity to the consumer.  It is up to the planning system, how to manage concurrent access to the plan.
Insertion may fail if the Plan is already in the TERMINATED state, in which case an INSERT_FAILED error is returned.">
          <mal:messages>
            <mal:request>
              <mal:field name="activityDetails" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="InsertedActivityDetails"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="activityRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(ActivityInstance)"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="An optional data structure used in the message is not supported by the service provider.">
              <mal:type name="UNSUPPORTED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of Strings giving a dot separated nested index for the unsupported field(s), to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.">
                <mal:type area="MAL" name="String" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The insertActivity or insertEvent operation failed to insert the requested object.">
              <mal:type name="INSERT_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
        <mal:requestIP name="insertEvent" number="3" supportInReplay="true" comment="The insertEvent operation sends an InsertedEventDetails structure, which includes a Plan reference, to the provider, which then creates a corresponding EventInstance object in the referenced Plan and returns its identity to the consumer.  It is up to the planning system, how to manage concurrent access to the plan.
Insertion may fail if the Plan is already in the TERMINATED state, in which case an INSERT_FAILED error is returned.">
          <mal:messages>
            <mal:request>
              <mal:field name="eventDetails" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="InsertedEventDetails"/>
              </mal:field>
            </mal:request>
            <mal:response>
              <mal:field name="eventRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(EventInstance)"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The insertActivity or insertEvent operation failed to insert the requested object.">
              <mal:type name="INSERT_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
        <mal:submitIP name="deleteActivity" number="4" supportInReplay="true" comment="The deleteActivity operation requests that a specified ActivityInstance within a Plan is deleted by the service provider.  In practice, the activity is not removed, but transitioned to the TERMINATED state with deletion indicated in the statusInfo field.  The ActivityInstance is not subsequently executed by the service provider, but it is implementation dependent what action is taken by the service provider if the ActivityInstance is in the EXECUTING state.  It is up to the planning system, how to manage concurrent access to the plan.
Deletion may fail if the referenced Plan or ActivityInstance is already in the TERMINATED state, in which case the DELETE_FAILED error is returned.">
          <mal:messages>
            <mal:submit>
              <mal:field name="planRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="activityRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(ActivityInstance)"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The deleteActivity or deleteEvent operation failed to delete the requested object.">
              <mal:type name="DELETE_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
        <mal:submitIP name="deleteEvent" number="5" supportInReplay="true" comment="The deleteEvent operation requests that a specified EventInstance within a Plan is deleted by the service provider.  In practice, the event is not removed, but transitioned to the TERMINATED state with deletion indicated in the statusInfo field.  The EventInstance is not subsequently triggered by the service provider.  It is up to the planning system, how to manage concurrent access to the plan.
Deletion may fail if the referenced Plan or EventInstance is already in the TERMINATED state, in which case the DELETE_FAILED error is returned.">
          <mal:messages>
            <mal:submit>
              <mal:field name="planRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="eventRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(EventInstance)"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The deleteActivity or deleteEvent operation failed to delete the requested object.">
              <mal:type name="DELETE_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="3" comment="">
        <mal:submitIP name="updateActivity" number="6" supportInReplay="true" comment="The updateActivity operation may be used to modify an ActivityInstance in a Plan that has already been submitted to the service provider.  The consumer submits an ActivityUpdate structure which is applied by the service provider to the referenced ActivityInstance.  It is up to the planning system, how to manage concurrent access to the plan.
Update may fail if the referenced Plan or ActivityInstance is already in the TERMINATED state, in which case the UPDATE_FAILED error is returned.">
          <mal:messages>
            <mal:submit>
              <mal:field name="planRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="activityUpdate" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ActivityUpdate"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The update operation (to Request, PlanStatus, Activity, Event or Resource) failed to update the referenced object.">
              <mal:type name="UPDATE_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
        <mal:submitIP name="updateEvent" number="7" supportInReplay="true" comment="The updateEvent operation may be used to modify an EventInstance in a Plan that has already been submitted to the service provider.  The consumer submits an EventUpdate structure which is applied by the service provider to the referenced EventInstance.  It is up to the planning system, how to manage concurrent access to the plan.
Update may fail if the referenced Plan or EventInstance is already in the TERMINATED state, in which case the UPDATE_FAILED error is returned.">
          <mal:messages>
            <mal:submit>
              <mal:field name="planRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="eventUpdate" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="EventUpdate"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The update operation (to Request, PlanStatus, Activity, Event or Resource) failed to update the referenced object.">
              <mal:type name="UPDATE_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="4" comment="">
        <mal:submitIP name="updateResource" number="8" supportInReplay="true" comment="The updateResource operation may be used to modify the value of a Resource at the specified point in time, in a Plan that has already been submitted to the service provider.  The consumer submits an ResourceUpdate structure which is applied by the service provider to the referenced Resource.  It is up to the planning system, how to manage concurrent access to the plan.
Update may fail if the referenced Plan is already in the TERMINATED state, in which case the UPDATE_FAILED error is returned.">
          <mal:messages>
            <mal:submit>
              <mal:field name="planRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="resourceUpdate" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ResourceUpdate"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="An optional data structure used in the message is not supported by the service provider.">
              <mal:type name="UNSUPPORTED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of Strings giving a dot separated nested index for the unsupported field(s), to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.">
                <mal:type area="MAL" name="String" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The update operation (to Request, PlanStatus, Activity, Event or Resource) failed to update the referenced object.">
              <mal:type name="UPDATE_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="5" comment="">
        <mal:submitIP name="updateResourceProfile" number="9" supportInReplay="true" comment="The updateResourceProfile operation may be used to modify the value of a Resource over a period of time, in a Plan that has already been submitted to the service provider.  The consumer submits an ResourceProfile structure which is applied by the service provider to the referenced Resource.  It is up to the planning system, how to manage concurrent access to the plan.
Update may fail if the referenced Plan is already in the TERMINATED state, in which case the UPDATE_FAILED error is returned.">
          <mal:messages>
            <mal:submit>
              <mal:field name="planRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="resourceProfile" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ResourceProfile"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="An optional data structure used in the message is not supported by the service provider.">
              <mal:type name="UNSUPPORTED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of Strings giving a dot separated nested index for the unsupported field(s), to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.">
                <mal:type area="MAL" name="String" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The update operation (to Request, PlanStatus, Activity, Event or Resource) failed to update the referenced object.">
              <mal:type name="UPDATE_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
      </mal:capabilitySet>
      <mal:capabilitySet number="6" comment="">
        <mal:submitIP name="applyTimeShift" number="10" supportInReplay="true" comment="The applyTimeShift operation may be used to request a shift in the timing by a fixed offset of the ActivityInstances, EventInstances, and ResourceProfiles contained within a Plan that has previously been submitted to a plan execution function.  The operation may also be restricted to one or more SubPlans within the referenced Plan and/or to a specified time period within the Plan.  The service provider applies the time shift to the timing of ActivityInstances, EventInstances, and ResourceProfiles contained within the Plan or SubPlan(s).
The time shift may fail if the referenced Plan is already in the TERMINATED state, in which case the UPDATE_FAILED error is returned.
The operation is designed to support backward compatibility with simple time-based on-board schedules, and may not be appropriate for use with plans that include event or position-based triggers and resource profiles.  What is shifted within the Plan is implementation dependent, but shall include time-based start and end triggers on ActivityInstances.  EventInstances may also be shifted, but it is noted that some EventInstances correspond to predicted orbital events that cannot meaningfully be shifted.  Similarly, where supported, resource profiles may reflect the ActivityInstances contained within the Plan and if those are shifted, the corresponding changes in Resource value should also be shifted.
NOTE	–	ActivityInstances have duration which means they may overlap the start or end of the specified TimeWindow for the applicability of the time shift.  It is implementation dependent how this is managed, but a reasonable assumption is that the start time of the ActivityInstances must be within the specified TimeWindow.  Given the potential to introduce inconsistencies into a Plan, it must be assumed that users of this service operation understand both its operational implications and its specific implementation.">
          <mal:messages>
            <mal:submit>
              <mal:field name="planRef" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
              </mal:field>
              <mal:field name="subPlans" canBeNull="true" comment="">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
              <mal:field name="timePeriod" canBeNull="false" comment="">
                <mal:type area="MPS" list="false" name="TimeWindow"/>
              </mal:field>
              <mal:field name="offset" canBeNull="false" comment="">
                <mal:type area="MAL" list="false" name="Duration"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more fields in the message contain invalid values.">
              <mal:type name="INVALID" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo comprises a list of structures, each identifying an invalid field, comprising:
A String giving a dot separated nested index for the field, to allow for fields that are themselves a structure, of the form ‘3.2’ meaning the 2nd field of the composite structure that is the 3rd field of the message.
A UInteger giving a secondary error code that details the reason for invalidity.">
                <mal:type area="MAL" name="Pair" list="true"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The update operation (to Request, PlanStatus, Activity, Event or Resource) failed to update the referenced object.">
              <mal:type name="UPDATE_FAILED" area="MPS"/>
              <mal:extraInformation comment="ExtraInfo provides additional information on the reason for failure as a free format string.">
                <mal:type area="MAL" name="String" list="false"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
      </mal:capabilitySet>
    </mal:service>

    <mal:dataTypes>

      <mal:composite name="ActivityDefinition" shortFormPart="101" comment="E1: An ActivityDefinition is an MO object that contains static configuration data relating to multiple occurrences of a planning activity.  Its identity is defined by a definitionID, which includes a constant key and an evolving version that is updated each time the definition is revised.  ActivityDefinitions form part of the planning configuration data.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Object"/>
        </mal:extends>
        <mal:field name="description" canBeNull="false" comment="Description of the Activity.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="argDefs" canBeNull="true" comment="List of Argument Definitions.">
          <mal:type area="MPS" list="true" name="ArgDef"/>
        </mal:field>
        <mal:field name="constraints" canBeNull="true" comment="Set of Constraints applicable to all instances of the Activity.">
          <mal:type area="MPS" list="false" name="ConstraintNode"/>
        </mal:field>
        <mal:field name="executionDefinition" canBeNull="true" comment="Reference to the definition of an executable body for the Activity (procedure, action sequence, etc.) [external to the MPS Information Model].">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="durationSpec" canBeNull="true" comment="Supports calculation of an estimated duration of an Activity Instance.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="children" canBeNull="true" comment="Set of Activity Details specifying child activities, optionally with repetition.">
          <mal:type area="MPS" list="false" name="ActivityNode"/>
        </mal:field>
        <mal:field name="activityType" canBeNull="true" comment="Enables a planning system to customise behavior for activities, such as their presentation in displays, based on the specified value.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="defaultTags" canBeNull="true" comment="Default set of Tags that may be used to associate the Activity with others, grouping activities by operational responsibility (controller/group/system) or other criteria.">
          <mal:type area="MAL" list="true" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ActivityInstance" shortFormPart="102" comment="E1: An ActivityInstance is an MO object that contains the identity of a specific occurrence of a planning activity, together with both static and dynamic information associated with that occurrence.  It supports relationships to its definition, source, a related planning event and any child activities.
ActivityInstances may be contained within a Plan.
NOTE	–	The start and end attributes specify the trigger conditions (including time) that specify when the ActivityInstance starts and/or ends in the context of a Plan.  The duration is an estimate of the time taken to execute the ActivityInstance rather than an offset, which may for example be used in the visualization of a Plan.  Duration may be used in conjunction with a specified end trigger to determine the planned start time of an ActivityInstance.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Object"/>
        </mal:extends>
        <mal:field name="definition" canBeNull="false" comment="Reference to the ActivityDefinition ">
          <mal:type area="MPS" list="false" name="ObjectRef(ActivityDefinition)"/>
        </mal:field>
        <mal:field name="source" canBeNull="false" comment="Object Type: RequestInstance | ActivityInstance | PlanningUser
Reference to the source of the ActivityInstance, which is either its parent ActivityInstance, a RequestInstance if it is a root Activity, or a PlanningUser if directly inserted.">
          <mal:type area="MAL" list="false" name="ObjectRef"/>
        </mal:field>
        <mal:field name="relatedEvent" canBeNull="true" comment="Optional reference to an EventInstance that is specifically associated with this instance of the Activity.  Typically the Activity is placed in response to the Event.">
          <mal:type area="MPS" list="false" name="ObjectRef(EventInstance)"/>
        </mal:field>
        <mal:field name="children" canBeNull="true" comment="References to any child ActivityInstances.">
          <mal:type area="MPS" list="true" name="ObjectRef(ActivityInstance)"/>
        </mal:field>
        <mal:field name="comments" canBeNull="true" comment="Any notes associated with this instance of the Activity.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="constraints" canBeNull="true" comment="Set of Constraints applicable to this instance of the Activity.">
          <mal:type area="MPS" list="false" name="ConstraintNode"/>
        </mal:field>
        <mal:field name="arguments" canBeNull="true" comment="Argument values for each Argument defined in the Activity Definition.">
          <mal:type area="MPS" list="true" name="Argument"/>
        </mal:field>
        <mal:field name="start" canBeNull="true" comment="Optionally specifies the trigger that initiates the Activity: may be Time, Position or Event based.">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
        <mal:field name="end" canBeNull="true" comment="Optionally specifies the trigger that ends the Activity">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
        <mal:field name="duration" canBeNull="true" comment="Optional duration of the Activity (estimated until execution, actual post execution).">
          <mal:type area="MAL" list="false" name="Duration"/>
        </mal:field>
        <mal:field name="subPlan" canBeNull="true" comment="Optional association of the Activity with a defined sub-plan.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="tags" canBeNull="true" comment="Set of Tags that may be used to associate the Activity with others, grouping activities by operational responsibility (controller/group/system) or other criteria.">
          <mal:type area="MAL" list="true" name="String"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current Status of the Activity Instance (see Activity State Model in §4.2.2.2)">
          <mal:type area="MPS" list="false" name="ActivityStatusEnum"/>
        </mal:field>
        <mal:field name="executionInstance" canBeNull="true" comment="Reference to the instance of an executable body for the Activity (procedure, action sequence, etc.) [external to the MPS Information Model].">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="returnData" canBeNull="true" comment="Optional return data from the planning process, provided as a list of ID-Value pairs.  This can be used to provide additional information required by the User to interpret the planned activity.">
          <mal:type area="MAL" list="true" name="NamedValue"/>
        </mal:field>
        <mal:field name="statusInfo" canBeNull="true" comment="StatusInfo provides the reason for entering the Terminated State and is customisable, but if the following conditions exist then the specified text shall be used:
- Completed (nominal)
- Expired (prior to Activation or during plan Supension)
- Deleted
- Failed (see ErrorCode/ErrorInfo)">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="errorCode" canBeNull="true" comment="Error Code optional in the case of a failure status for the planning activity (for example Terminated state with statusInfo Failed).  The codes are implementation specific.">
          <mal:type area="MAL" list="false" name="Integer"/>
        </mal:field>
        <mal:field name="errorInfo" canBeNull="true" comment="Supplementary Error Information">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="EventDefinition" shortFormPart="201" comment="E1: An EventDefinition is an MO object that contains static configuration data relating to multiple occurrences of a planning event.  Its identity is defined by a definitionID, which includes a constant key and an evolving version, which is updated each time the definition is revised.  Event definitions form part of the planning configuration data.
Events may be either Predicted or Potential.  Events that are predictable either by time or position can have specific instances included in a Plan.  Potential events are those that may occur during the execution of a Plan, but the specific time or position is not predicted.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Object"/>
        </mal:extends>
        <mal:field name="description" canBeNull="false" comment="Description of the event.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="predictability" canBeNull="false" comment="Enumeration: one of {Predicted, Potential} indicating whether the event occurrence is known in advance or can occur at any time.  ">
          <mal:type area="MPS" list="false" name="PredictabilityEnum"/>
        </mal:field>
        <mal:field name="eventType" canBeNull="true" comment="Enables a planning system to customize behaviour for events, such as their presentation in displays, based on the specified value.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="argDefs" canBeNull="true" comment="List of argument definitions.">
          <mal:type area="MPS" list="true" name="ArgDef"/>
        </mal:field>
        <mal:field name="eventDefinitions" canBeNull="true" comment="List of child event definitions.  For a single event, this list shall be empty; for a group event, the list shall be populated.">
          <mal:type area="MPS" list="true" name="ObjectRef(EventDefinition)"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="EventInstance" shortFormPart="202" comment="E1: An EventInstance is an MO object that contains the identity of a specific occurrence of a planning event, together with both static and dynamic information associated with that occurrence.  It supports relationships to its definition and source.
The source of an EventInstance may be an external event, corresponding to a NAV Predicted Event or a CSS Contact Event.
EventInstances may be contained within a Plan.
EventInstances may be referenced as a related event by an ActivityInstance, so that the ActivityInstance can reference the timing and arguments of the related EventInstance.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Object"/>
        </mal:extends>
        <mal:field name="definition" canBeNull="false" comment="Reference to the EventDefinition">
          <mal:type area="MPS" list="false" name="ObjectRef(EventDefinition)"/>
        </mal:field>
        <mal:field name="sourceEvent" canBeNull="true" comment="Reference to an external source event (e.g., NAV predicted event, or CSS contact event)">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="events" canBeNull="true" comment="List of references to child EventInstances.  For a single event, this list is empty; for a group event, the list will be populated.">
          <mal:type area="MPS" list="true" name="ObjectRef(EventInstance)"/>
        </mal:field>
        <mal:field name="eventTime" canBeNull="true" comment="Predicted or actual time of the event.  EventTime is nullable: it can be predicted without an eventTime (e.g., if position based)">
          <mal:type area="MAL" list="false" name="FineTime"/>
        </mal:field>
        <mal:field name="arguments" canBeNull="true" comment="Argument values for each argument defined in the EventDefinition.">
          <mal:type area="MPS" list="true" name="Argument"/>
        </mal:field>
        <mal:field name="eventStatus" canBeNull="false" comment="Current status of the event instance (see event state model in 4.2.3.2)">
          <mal:type area="MPS" list="false" name="EventStatusEnum"/>
        </mal:field>
        <mal:field name="statusInfo" canBeNull="true" comment="StatusInfo provides the reason for entering the terminated state and is customizable, but if the following conditions exist then the specified text shall be used:
- Occurred (Event has been triggered)
- Did Not Occur (Event expired or did not occur within validity period)
- Deleted (Event was deleted)">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="Resource" shortFormPart="301" comment="E4: A resource is an MO object that contains both the static attributes that define a planning resource and a dynamic attribute that holds its current value.  Its identity is defined by a constant key and evolving version, which is updated each time the definition is revised.  Resource definitions form part of the planning configuration data and in practice the value attribute may be omitted in this context, although it may also be used to provide an initial or default value.
Depending on the resource data type, the resource definition may require additional type specific attributes to support data validation.  Sub-types are defined for Numeric, String, and enumerated Status type resources.  The base Resource MO object type can be used where no data validation is applicable.  The following attributes are applicable to the base type and all sub-types.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Object"/>
        </mal:extends>
        <mal:field name="description" canBeNull="false" comment="Description of the Resource.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="dataType" canBeNull="false" comment="Specifies the data type of the Resource, which must be a supported MAL Attribute type.">
          <mal:type area="MAL" list="false" name="AttributeType"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="Optional.  Specifies the units the value of the Resource is expressed in, as defined in reference [D6] annex D">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="validationData" canBeNull="true" comment="Optional.  Specifies the allowed range of values for the Resource, with concrete subtypes specific to the data type of the Resource.">
          <mal:type area="MPS" list="false" name="ValidationDetails"/>
        </mal:field>
        <mal:field name="value" canBeNull="true" comment="Value of the resource.  MAL Attribute type must match the dataType of the Resource definition.
The value is only nullable in the context of a Resource definition (planning configuration data).">
          <mal:type area="MAL" list="false" name="Attribute"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RequestDefinition" shortFormPart="401" comment="E1: A RequestDefinition is an MO object that contains the specification of a re-usable planning request template.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Object"/>
        </mal:extends>
        <mal:field name="description" canBeNull="false" comment="Description of the re-usable RequestDefinition.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="argDefs" canBeNull="true" comment="List of argument definitions.  Arguments may be referenced in ActivityDetails and constraints.">
          <mal:type area="MPS" list="true" name="ArgDef"/>
        </mal:field>
        <mal:field name="standingOrder" canBeNull="false" comment="A flag that indicates whether the planning request is for a repetitive standing order (unbounded other than by the validity period), or is a one-off request.  If it is a standing order, then the ActivityNode must include specification of the repetition criteria.  It should be noted that a one-off request can still include repetition.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="constraints" canBeNull="true" comment="Set of Constraints applicable to the whole planning request.  It should be noted that constraints specific to a planning activity can be specified within the ActivityDetails for that activity within the ActivityNode.">
          <mal:type area="MPS" list="false" name="ConstraintNode"/>
        </mal:field>
        <mal:field name="activities" canBeNull="false" comment="Set of activity details specifying requested activities, optionally with repetition.">
          <mal:type area="MPS" list="false" name="ActivityNode"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RequestInstance" shortFormPart="402" comment="E1: A RequestInstance is an MO object that contains the specification of a planning request.  This may change over time if the request is updated by the user, each comprising a separate version of the request with the same object key.
In the context of a hierarchical or federated planning system, a RequestInstance can be used to submit a Plan  (4.2.6.1) to a planning function, either embedding the Plan in the RequestInstance or passing it by reference.  If passed by reference, the Plan can be retrieved using the Plan Distribution Service (3.3).  Patch plans are not permitted in this context.
NOTE	–	RequestInstances may be created from a RequestDefinition that has defined arguments (as ArgDefs) and will in this case have the associated Arguments.  An ad-hoc RequestInstance is not anticipated to hold any Arguments.  The values that can be parameterized through the arguments of a re-usable RequestDefinition can be directly entered in a RequestInstance, and there would be no corresponding ArgDef associated with any Arguments supplied.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Object"/>
        </mal:extends>
        <mal:field name="userReference" canBeNull="true" comment="Optional user supplied reference for the planning request.  This is distinct from the instancetID of the RequestInstance that is assigned by the planning function.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="creationDate" canBeNull="false" comment="Creation date-time of the RequestInstance version.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="definition" canBeNull="true" comment="Reference to the RequestDefinition from which the RequestInstance was created, if a planning request template was used.">
          <mal:type area="MPS" list="false" name="ObjectRef(RequestDefinition)"/>
        </mal:field>
        <mal:field name="planningPeriod" canBeNull="false" comment="Specifies which planning period the planning request applies to.  Planning period IDs are mission specific, but can be used to indicate mission phase; planning cycle; or ‘semester’ in observatory missions.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="validityTimes" canBeNull="true" comment="Validity period for the planning request, expressed as one or more time windows.  The planning request must be satisfied within this period.
Only one of validityTime or validityEvent should be present in a planning request.">
          <mal:type area="MPS" list="true" name="TimeWindow"/>
        </mal:field>
        <mal:field name="validityEvents" canBeNull="true" comment="Validity period for the planning request, expressed as one or more event windows.  The planning request must be satisfied within this period.
Only one of validityTime or validityEvent should be present in a planning request.">
          <mal:type area="MPS" list="true" name="EventWindow"/>
        </mal:field>
        <mal:field name="timeSystem" canBeNull="true" comment="Specifies the time system used for all time attributes within the planning request (see 4.1.3).
If null, the default time system is used (see 4.2.8).">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="user" canBeNull="false" comment="The User ID for the person or organization raising the planning request.">
          <mal:type area="MPS" list="false" name="ObjectRef(PlanningUser)"/>
        </mal:field>
        <mal:field name="description" canBeNull="false" comment="Description of the request.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="arguments" canBeNull="true" comment="List of named argument values.  If created from a template planning request, this will include the arguments defined in the RequestDefinition.">
          <mal:type area="MPS" list="true" name="Argument"/>
        </mal:field>
        <mal:field name="standingOrder" canBeNull="false" comment="A flag that indicates whether the planning request is for a repetitive standing order (unbounded other than by the validity period), or is a one-off request.  If it is a standing order, then the ActivityNode must include specification of the repetition criteria.  It should be noted that a one-off request can still include repetition.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="constraints" canBeNull="true" comment="Set of Constraints applicable to the whole planning request.  It should be noted that constraints specific to a planning activity can be specified within the ActivityDetails for that activity within the ActivityNode.">
          <mal:type area="MPS" list="false" name="ConstraintNode"/>
        </mal:field>
        <mal:field name="activities" canBeNull="false" comment="Set of activity details specifying requested activities, optionally with repetition.">
          <mal:type area="MPS" list="false" name="ActivityNode"/>
        </mal:field>
        <mal:field name="inputPlanRef" canBeNull="true" comment="Reference to an existing Plan (output of one planning function) submitted as a planning request to another planning function in the context of a distributed or hierarchical planning system.
Only one of inputPlanRef and inputPlan should be present within the planning request.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="inputPlan" canBeNull="true" comment="An existing Plan  (output of one planning function) submitted as a planning request to another planning function in the context of a distributed or hierarchical planning system.  The Plan is embedded within the planning request.
Only one of inputPlanRef and inputPlan should be present within the planning request.">
          <mal:type area="MPS" list="false" name="Plan"/>
        </mal:field>
        <mal:field name="comments" canBeNull="true" comment="Free text for any additional user comments about the request.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current status of the ActivityInstance (see planning request state model in 4.2.5.2)">
          <mal:type area="MPS" list="false" name="RequestStatusEnum"/>
        </mal:field>
        <mal:field name="outputPlanRef" canBeNull="true" comment="Reference to the output Plan(s) that contains the activities resulting from the planning request.  Where multiple alternate plans have been generated, these may be listed here.">
          <mal:type area="MPS" list="true" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="returnData" canBeNull="true" comment="Optional return data from the planning process, provided as a list of ID-Value pairs.  This can be used to provide additional information required by the User to interpret the planned operations.">
          <mal:type area="MAL" list="true" name="NamedValue"/>
        </mal:field>
        <mal:field name="statusInfo" canBeNull="true" comment="StatusInfo provides the reason for termination and is customizable, but if the following conditions exist then the specified text shall be used:
- Completed (all constituent activities completed successfully)
- Expired (constituent activities expired prior to execution)
- Failed (constituent activities failed during execution)
- Deleted (constituent activities were deleted)
- Partially Completed
It may also be used to provide the reason for rejection.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="errorCode" canBeNull="true" comment="Error Code optional in the case of a failure status for the planning request (for example Terminated state with statusInfo Failed).  The codes are implementation specific.">
          <mal:type area="MAL" list="false" name="Integer"/>
        </mal:field>
        <mal:field name="errorInfo" canBeNull="true" comment="Supplementary error information">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="Plan" shortFormPart="501" comment="E1: A Plan is an MO object that contains both the static attributes that define a version of a plan and dynamic attributes that hold its current state.  Its identity is defined by a constant key and an evolving version, which is updated each time the Plan is revised.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Object"/>
        </mal:extends>
        <mal:field name="isPatchPlan" canBeNull="false" comment="Flag indicating if the Plan is a patch plan that only contains details of the changes from the precursor Plan.  A patch plan must have a precursor.  It must also include a single PlanRevision relative to the precursor Plan.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="precursorPlan" canBeNull="true" comment="Reference to a precursor (or predecessor) Plan from which the changes are detailed in the Plan.  This may be used if there is an iterative re-planning cycle in which successive plans overlap, or where a previous Plan has been updated through re-planning.  If there is no precursor, then the Plan must be a self-standing full plan.
If the Plan is a Patch Plan, then a precursor plan must be specified.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="targetPlan" canBeNull="true" comment="Applicable only for patch plans, this is a reference to the target Plan.  This target Plan is the result of applying the patch plan to the precursor Plan and is distinct from the identity of the patch plan itself.  Patch plans are not permitted in the context of a planning request.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="information" canBeNull="false" comment="Contains header information relating to the Plan, including its originator and validity period.">
          <mal:type area="MPS" list="false" name="PlanInformation"/>
        </mal:field>
        <mal:field name="items" canBeNull="false" comment="Contains the planned activities and events that constitute the Plan.">
          <mal:type area="MPS" list="false" name="PlannedItems"/>
        </mal:field>
        <mal:field name="revisions" canBeNull="true" comment="Details the changes between this Plan and other Plans (or other versions of the same Plan), usually the precursor Plan.  Optional, but must be present in a patch plan.">
          <mal:type area="MPS" list="false" name="PlanRevisions"/>
        </mal:field>
        <mal:field name="resources" canBeNull="true" comment="Optional.  Contains resource profiles for planning resources covering the period of the Plan.">
          <mal:type area="MPS" list="false" name="PlanResources"/>
        </mal:field>
        <mal:field name="isAlternate" canBeNull="false" comment="Flag indicating if the Plan has currently been released as an Operational or Alternate plan.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current status of the Plan.">
          <mal:type area="MPS" list="false" name="PlanStatusEnum"/>
        </mal:field>
        <mal:field name="statusInfo" canBeNull="true" comment="Supplementary information for a Plan in the Terminated state.  This is customizable, but if the following conditions exist then the specified text shall be used:
- Completed (nominal)
- Superseded (by a successor Plan)
- Revoked
- Cancelled (deactivated after start of execution)
- Expired">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanningUser" shortFormPart="601" comment="E1: The source of a planning request is the user that raises it, and this is identified in the user field of a RequestInstance as a reference to a PlanningUser object.
The information held on planning users is outside the scope of this Recommended Standard.  The only requirement on the PlanningUser object is that it is formulated as an MO object, with an associated object identity.  Any additional content [attributes] of the PlanningUser object are system specific.  As the PlanningUser object is not transferred in any message of the MPS services, there is no requirement to fully define the data structure within this Recommended Standard, but it is referenced in other MPS objects and data structures using an attribute of type MAL::ObjectRef.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Object"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="MPSSystemConfigDetails" shortFormPart="701" comment="E1: The referenced timeSystem allows specification the time system used for time attributes within an MPS system.  This may be specified in the context of a planning request, a plan, or as a system-wide default here within the MPSSystemConfig object.
Other configuration parameters specific to the MPS system can be defined using the customConfig attribute as a list of name-value pairs.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Object"/>
        </mal:extends>
        <mal:field name="timeSystem" canBeNull="false" comment="Specifies the default time system used by the MPS system (see 4.1.3).">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="customConfig" canBeNull="true" comment="Optional set of custom configuration parameters defined as a set of named values.">
          <mal:type area="MAL" list="true" name="NamedValue"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanDetailUpdate" comment="E1: Specifically in the case of reporting the detailed execution status of a plan, updates may be reported for multiple object types: planning activities, planning events, and planning resources. To support this an abstract type of PlanDetailUpdate is defined as follows.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="ActivityDetails" comment="E1: Contains the information required to create one or more ActivityInstances, including the specification of argument values and constraints.
It should be noted that the activityRef and activityOffset attributes are only relevant in the case that a Repetition has been specified in a parent ActivityNode.  Temporal and sequential constraints associated with the ActivityInstance can be specified as constraints attached to a concrete SimpleActivityDetails structure.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="activityRef" canBeNull="true" comment="Specifies how the ActivityInstance is placed with respect to any defined Repetition (0=Start; 1=End).  Default is Start.">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="activityOffset" canBeNull="true" comment="Specifies an offset in time for the ActivityInstance from any defined Repetition.  Default is no offset.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="relatedEvent" canBeNull="true" comment="Object Type: EventInstance.
Specifies a related Event (or Event Group) for the ActivityInstance.  Argument specifications and constraints may reference arguments and attributes of the RelatedEvent.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="comments" canBeNull="true" comment="Any notes associated with the ActivityDetails.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ActivityNode" shortFormPart="104" comment="E1: A concrete sub-type of ActivityDetails, an ActivityNode is a container node for a set of ActivityDetails together with an optional Repetition specification.  An ActivityNode is used as the root node of any ActivityDetails specification within a planning request or parent activity definition.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ActivityDetails"/>
        </mal:extends>
        <mal:field name="repetition" canBeNull="true" comment="Optional Repetition specification.">
          <mal:type area="MPS" list="false" name="Repetition"/>
        </mal:field>
        <mal:field name="activities" canBeNull="true" comment="Set of ActivityDetails.">
          <mal:type area="MPS" list="true" name="ActivityDetails"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="SimpleActivityDetails" shortFormPart="105" comment="E1: A concrete sub-type of ActivityDetails, a SimpleActivityDetails provides the information required to instantiate a single ActivityInstance.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ActivityDetails"/>
        </mal:extends>
        <mal:field name="activityDefinition" canBeNull="false" comment="Reference to the ActivityDefinition.">
          <mal:type area="MPS" list="false" name="ObjectRef(ActivityDefinition)"/>
        </mal:field>
        <mal:field name="argSpecs" canBeNull="true" comment="Set of argument specifications for each argument definition contained in the referenced activity definition.  These supply a value for each argument, or an expression to enable the value to be derived.">
          <mal:type area="MPS" list="true" name="ArgSpec"/>
        </mal:field>
        <mal:field name="constraints" canBeNull="true" comment="Set of Constraints specific to the ActivityInstance to be created.">
          <mal:type area="MPS" list="false" name="ConstraintNode"/>
        </mal:field>
        <mal:field name="subPlan" canBeNull="true" comment="Optional association of the ActivityInstance with a defined sub-plan.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="tags" canBeNull="true" comment="Set of tags that may be used to associate the Activity with an identified subset of the Plan, grouping activities by operational responsibility (controller/group/system) or other criteria.">
          <mal:type area="MAL" list="true" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ActivityUpdate" shortFormPart="106" comment="E1: ActivityUpdate is a data structure that is used to report the dynamic status of an ActivityInstance in the context of the MPS Plan Execution Control service monitorPlanExecutionDetail and getActivityStatus operations.
ActivityUpdates may be distributed to subscribing applications, including status displays, to inform them of the latest status of the activity.  This may be particularly relevant in conjunction with a plan execution function.  ActivityUpdates may be stored in activity history to provide a complete record of evolving status over time.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="PlanDetailUpdate"/>
        </mal:extends>
        <mal:field name="activityInstance" canBeNull="false" comment="Reference to the ActivityInstance to which the status update relates.">
          <mal:type area="MPS" list="false" name="ObjectRef(ActivityInstance)"/>
        </mal:field>
        <mal:field name="timestamp" canBeNull="true" comment="Time of status update.
Only nullable in the context of an updateActivity operation:  the timestamp must be provided when reporting ActivityInstance status.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="plan" canBeNull="true" comment="Optional reference to the Plan containing the ActivityInstance to which this update pertains.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="arguments" canBeNull="true" comment="Argument values.">
          <mal:type area="MPS" list="true" name="Argument"/>
        </mal:field>
        <mal:field name="start" canBeNull="true" comment="Optionally specifies the trigger that initiates the ActivityInstance: may be time, position, or event based.">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
        <mal:field name="end" canBeNull="true" comment="Optionally specifies the trigger that ends the ActivityInstance">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
        <mal:field name="duration" canBeNull="true" comment="Optional duration of the ActivityInstance (estimated until execution, actual post execution).">
          <mal:type area="MAL" list="false" name="Duration"/>
        </mal:field>
        <mal:field name="subPlan" canBeNull="true" comment="Optional association of the ActivityInstance with a defined sub-plan.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="tags" canBeNull="true" comment="Set of tags that may be used to associate the ActivityInstance with an identified subset of the Plan, grouping activities by operational responsibility (controller/group/system) or other criteria.">
          <mal:type area="MAL" list="true" name="String"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current status of the ActivityInstance">
          <mal:type area="MPS" list="false" name="ActivityStatusEnum"/>
        </mal:field>
        <mal:field name="executionInstance" canBeNull="true" comment="Reference to the instance of an executable body for the ActivityInstance (procedure, action sequence, etc.) [external to the MPS information model].">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="returnData" canBeNull="true" comment="Optional return data from the planning process, provided as a list of ID-Value pairs.  This can be used to provide additional information required by the User to interpret the planned activity.">
          <mal:type area="MAL" list="true" name="NamedValue"/>
        </mal:field>
        <mal:field name="statusInfo" canBeNull="true" comment="StatusInfo provides the reason for entering the Terminated State and is customizable, but if the following conditions exist then the specified text shall be used:
- Completed (nominal)
- Expired (prior to Activation or during plan Suspension)
- Deleted
- Failed (see ErrorCode/ErrorInfo)">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="errorCode" canBeNull="true" comment="Error Code optional in the case of a failure status for the planning activity (for example Terminated state with statusInfo Failed).  The codes are implementation specific.">
          <mal:type area="MAL" list="false" name="Integer"/>
        </mal:field>
        <mal:field name="errorInfo" canBeNull="true" comment="Supplementary error information">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="InsertedActivityDetails" shortFormPart="107" comment="E1: A concrete sub-type of ActivityDetails (see 4.2.2.3) that is a variation of SimpleActivityDetails providing additional details for a single ActivityInstance to be inserted into a Plan using the MPS Plan Edit service.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ActivityDetails"/>
        </mal:extends>
        <mal:field name="plan" canBeNull="false" comment="Reference to the Plan into which the ActivityInstance is to be inserted.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="start" canBeNull="true" comment="Optionally specifies the trigger that initiates the ActivityInstance: may be time, position, or event based.">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
        <mal:field name="end" canBeNull="true" comment="Optionally specifies the trigger that ends the ActivityInstance">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
        <mal:field name="activityDefinition" canBeNull="false" comment="Reference to the ActivityDefinition.">
          <mal:type area="MPS" list="false" name="ObjectRef(ActivityDefinition)"/>
        </mal:field>
        <mal:field name="argSpecs" canBeNull="true" comment="Set of argument specifications for each argument definition contained in the referenced activity definition.  These supply a value for each argument, or an expression to enable the value to be derived.">
          <mal:type area="MPS" list="true" name="ArgSpec"/>
        </mal:field>
        <mal:field name="constraints" canBeNull="true" comment="Set of Constraints specific to the ActivityInstance to be created.">
          <mal:type area="MPS" list="false" name="ConstraintNode"/>
        </mal:field>
        <mal:field name="subPlan" canBeNull="true" comment="Optional association of the ActivityInstance with a defined sub-plan.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="tags" canBeNull="true" comment="Set of tags that may be used to associate the Activity with a subset of the Plan, grouping activities by operational responsibility (controller/group/system) or other criteria.">
          <mal:type area="MAL" list="true" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ActivitySuspensionStatus" shortFormPart="108" comment="E1: A data structure that returns the status and supplementary suspension information for an ActivityInstance affected by an MPS Plan Execution Control service SuspendActivity or ResumeActivity operation.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="activityInstance" canBeNull="false" comment="Reference to an ActivityInstance.">
          <mal:type area="MPS" list="false" name="ObjectRef(ActivityInstance)"/>
        </mal:field>
        <mal:field name="plan" canBeNull="true" comment="Optional reference to the Plan containing the ActivityInstance.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current Status of the ActivityInstance">
          <mal:type area="MPS" list="false" name="ActivityStatusEnum"/>
        </mal:field>
        <mal:field name="suspensionInfo" canBeNull="true" comment="Supplementary information on the suspension/resumption status of the ActivityInstance.
This may detail the point of suspension, which may be specific to the suspension mode; or a reason why resumption was not possible.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="EventUpdate" shortFormPart="205" comment="E1: EventUpdate is a data structure that is used to report the dynamic status of an EventInstance in the context of the MPS Plan Execution Control service monitorPlanExecutionDetail operation.
EventUpdates may be distributed to subscribing applications, including status displays, to inform them of the latest status of the event.  This may be particularly relevant in conjunction with a plan execution function.  EventUpdates may be stored in event history to provide a complete record of evolving status over time.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="PlanDetailUpdate"/>
        </mal:extends>
        <mal:field name="eventInstance" canBeNull="false" comment="Reference to the EventInstance to which the status update relates.">
          <mal:type area="MPS" list="false" name="ObjectRef(EventInstance)"/>
        </mal:field>
        <mal:field name="timestamp" canBeNull="false" comment="Time of status update.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="eventTime" canBeNull="false" comment="Predicted or actual time of the event.  EventTime is nullable: it can be predicted without an EventTime (e.g., if position based)">
          <mal:type area="MAL" list="false" name="FineTime"/>
        </mal:field>
        <mal:field name="arguments" canBeNull="true" comment="Argument values.">
          <mal:type area="MPS" list="true" name="Argument"/>
        </mal:field>
        <mal:field name="eventStatus" canBeNull="false" comment="Current status of the EventInstance.">
          <mal:type area="MPS" list="false" name="EventStatusEnum"/>
        </mal:field>
        <mal:field name="statusInfo" canBeNull="true" comment="StatusInfo provides the reason for entering the Terminated state and is customizable, but if the following conditions exist then the specified text shall be used::
- Occurred (Event has been triggered)
- Did Not Occur (Event expired or did not occur within validity period)
- Deleted (Event was deleted)">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="InsertedEventDetails" shortFormPart="206" comment="E1: A data structure that provides the information required to create the EventInstance to be inserted into a Plan using the MPS Plan Edit service.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="plan" canBeNull="false" comment="Reference to the Plan into which the Event is to be inserted.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="eventDefinition" canBeNull="false" comment="Reference to the EventDefinition ">
          <mal:type area="MPS" list="false" name="ObjectRef(EventDefinition)"/>
        </mal:field>
        <mal:field name="eventTime" canBeNull="false" comment="Specifies the predicted or actual time of the event.  For an inserted event this must be present.">
          <mal:type area="MAL" list="false" name="FineTime"/>
        </mal:field>
        <mal:field name="arguments" canBeNull="true" comment="Argument values.">
          <mal:type area="MPS" list="true" name="Argument"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="NumericResource" shortFormPart="302" comment="E4: An additional concrete sub-type of ValidationDetails applicable only to Resources of any numeric type, including Duration, that provides additional attributes for the specification of numeric data validation.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ValidationDetails"/>
        </mal:extends>
        <mal:field name="minimum" canBeNull="false" comment="Defines the permitted minimum value over time.">
          <mal:type area="MPS" list="false" name="ResourceProfile"/>
        </mal:field>
        <mal:field name="maximum" canBeNull="false" comment="Defines the permitted maximum value over time.">
          <mal:type area="MPS" list="false" name="ResourceProfile"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ResourceProfile" shortFormPart="303" comment="E4: A ResourceProfile provides the evolution of a value for a single planning resource over time as a set of ProfileSegments.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="resource" canBeNull="false" comment="Object Type: Resource
Reference to a Resource">
          <mal:type area="MPS" list="false" name="ObjectRef(Resource)"/>
        </mal:field>
        <mal:field name="profileSegments" canBeNull="false" comment="Set of Profile Segments">
          <mal:type area="MPS" list="true" name="ProfileSegment"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ProfileSegment" shortFormPart="304" comment="E4: A ProfileSegment defines the time range and interpolation method for a set of ProfileEntries.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="interpolation" canBeNull="false" comment="Interpolation method to be applied for values lying between points defined in the profile segment.
Default = Step.">
          <mal:type area="MPS" list="false" name="InterpolationTypeEnum"/>
        </mal:field>
        <mal:field name="start" canBeNull="false" comment="Start of time range covered by the profile segment.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="end" canBeNull="false" comment="End of time range covered by the profile segment">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="startIncluded" canBeNull="false" comment="Indicates whether the start time is included in the profile segment.
Default = True.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="endIncluded" canBeNull="false" comment="Indicates whether the end time is included in the profile segment.  This allows the same time to be used as the end of one segment and the start of another.
Default = False.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="profileEntries" canBeNull="false" comment="Set of profile entries (resource value points).">
          <mal:type area="MPS" list="true" name="ProfileEntry"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ProfileEntry" shortFormPart="306" comment="E4: Defines the value (or minimum/maximum value) of a resource at a particular point in time.
The data type of the value can be any valid MAL Attribute type, but must match the defined dataType in the corresponding Resource definition.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="time" canBeNull="false" comment="Time of resource data point">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="value" canBeNull="false" comment="Value of resource data point">
          <mal:type area="MAL" list="false" name="Attribute"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RelativeResourceProfile" shortFormPart="307" comment="E4: A variation on ResourceProfile, the RelativeResourceProfile uses relative timestamps of type Duration (indicating an offset from a reference time, such as the start time of an Activity).  RelativeResourceProfiles are used in the context of a complex resource constraint.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="resource" canBeNull="false" comment="Object Type: Resource
Reference to a Resource">
          <mal:type area="MPS" list="false" name="ObjectRef(Resource)"/>
        </mal:field>
        <mal:field name="profileSegments" canBeNull="false" comment="Set of RelativeProfileSegments">
          <mal:type area="MPS" list="true" name="RelativeProfileSegment"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RelativeProfileSegment" shortFormPart="308" comment="E4: A RelativeResourceSegment defines the time range and interpolation method for a set of RelativeProfileEntries.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="interpolation" canBeNull="false" comment="Interpolation method to be applied for values lying between points defined in the relative profile segment.
Default = Step.">
          <mal:type area="MPS" list="false" name="InterpolationTypeEnum"/>
        </mal:field>
        <mal:field name="start" canBeNull="false" comment="Relative start of time range covered by the relative profile segment.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="end" canBeNull="false" comment="Relative end of time range covered by the relative profile segment">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="startIncluded" canBeNull="false" comment="Indicates whether the start time is included in the relative profile segment.
Default = True.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="endIncluded" canBeNull="false" comment="Indicates whether the end time is included in the relative profile segment.  This allows the same time to be used as the end of one segment and the start of another.
Default = False.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="profileEntries" canBeNull="false" comment="Set of relative profile entries (resource value points).">
          <mal:type area="MPS" list="true" name="RelativeProfileEntry"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RelativeProfileEntry" shortFormPart="309" comment="E4: Defines the value (or minimum/maximum value) of a resource at a relative point in time.
Specific sub-types exist for each allowed data type for a Resource.  These replace the variant type value attribute with one of concrete data type.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="time" canBeNull="false" comment="Relative time of resource data point">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="value" canBeNull="false" comment="Value of resource data point">
          <mal:type area="MAL" list="false" name="Attribute"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ResourceUpdate" shortFormPart="310" comment="E4: ResourceUpdate is a data structure that is used to report the value of a Resource at a given point in time in the context of the MPS Plan Execution Control service monitorPlanExecutionDetail operation, or to supply an updated value for a Resource in the context of the MPS Plan Edit service.
Resource updates may be distributed to subscribing applications, including status displays, to inform them of the latest value of the Resource.  This may be particularly relevant in conjunction with a plan execution function.  Resource updates may be stored in resource history to provide a complete record of evolving value over time.
Resource updates are also effectively contained within a Plan to describe the predicted evolution of Resources over the duration of that Plan.  However, in this context the ResourceProfile construct is used (see 4.2.4.3 above).">
        <mal:extends>
          <mal:type area="MPS" list="false" name="PlanDetailUpdate"/>
        </mal:extends>
        <mal:field name="resource" canBeNull="false" comment="Object Type: Resource
Reference to the Resource to which the value update relates.">
          <mal:type area="MPS" list="false" name="ObjectRef(Resource)"/>
        </mal:field>
        <mal:field name="timestamp" canBeNull="false" comment="Time of Resource value update.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="value" canBeNull="false" comment="Value of the resource.  MAL Attribute type must match the dataType of the resource definition.">
          <mal:type area="MAL" list="false" name="Attribute"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RequestStatusUpdate" shortFormPart="404" comment="E1: RequestStatusUpdate is a data structure that is used to report changes in status of the RequestInstance as it proceeds through both planning and plan execution functions.  Reporting is the responsibility of the planning function.
Planning request status updates may be distributed to subscribing applications, including both Users and status displays, to inform them of the latest status of the planning request.  This may be particularly relevant in conjunction with a plan execution function.  Status updates may be stored in planning request history to provide a complete record of evolving status over time.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="requestInstance" canBeNull="false" comment="Reference to the planning request instance to which the status update relates.">
          <mal:type area="MPS" list="false" name="ObjectRef(RequestInstance)"/>
        </mal:field>
        <mal:field name="timestamp" canBeNull="false" comment="Time of status update.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current status of the planning request.">
          <mal:type area="MPS" list="false" name="RequestStatusEnum"/>
        </mal:field>
        <mal:field name="outputPlanRef" canBeNull="true" comment="Reference to the Plan that contains the planned activities resulting from the planning request.  It should be noted that this is only available once the planning request has been processed and successfully planned.  The outputPlanRef may be updated following iterative planning cycles or re-planning.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="returnData" canBeNull="true" comment="Optional return data from the planning process, provided as a list of ID-Value pairs.  This can be used to provide additional information required by the User to interpret the planned operations.">
          <mal:type area="MAL" list="true" name="NamedValue"/>
        </mal:field>
        <mal:field name="statusInfo" canBeNull="true" comment="StatusInfo provides the reason for termination and is customizable, but if the following conditions exist then the specified text shall be used:
- Completed (all constituent activities completed successfully)
- Expired (constituent activities expired prior to execution)
- Failed (constituent activities failed during execution)
- Deleted (constituent activities were deleted)
- PartiallyCompleted
It may also be used to provide the reason for rejection.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="errorCode" canBeNull="true" comment="Error Code optional in the case of a failure status for the planning request (for example Terminated state with statusInfo Failed).  The codes are implementation specific.">
          <mal:type area="MAL" list="false" name="Integer"/>
        </mal:field>
        <mal:field name="errorInfo" canBeNull="true" comment="Supplementary error information.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanningRequestDetails" shortFormPart="405" comment="E1: PlanningRequestDetails is a data structure used in the context of the MPS Planning Request service SubmitRequest and UpdateRequest operations, where the RequestInstance MO object cannot be used as the full identity of the resulting RequestInstance (key and version) is not yet known.
Its structure is equivalent to that of RequestInstance, but omitting the identity attributes and dynamic attributes used to report its status.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="userReference" canBeNull="false" comment="User supplied reference for the planning request.  This is distinct from the instancetID of the RequestInstance that is assigned by the planning function.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="definition" canBeNull="true" comment="Reference to the RequestDefinition from which the RequestInstance was created, if a planning request template was used.">
          <mal:type area="MPS" list="false" name="ObjectRef(RequestDefinition)"/>
        </mal:field>
        <mal:field name="planningPeriod" canBeNull="false" comment="Specifies which planning period the planning request applies to.  Planning period IDs are mission specific, but can be used to indicate mission phase; planning cycle; or ‘semester’ in observatory missions.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="validityTimes" canBeNull="true" comment="Validity period for the planning request, expressed as one or more time windows.  The planning request must be satisfied within this period.
Only one of validityTime or validityEvent should be present in a planning request.">
          <mal:type area="MPS" list="true" name="TimeWindow"/>
        </mal:field>
        <mal:field name="validityEvents" canBeNull="true" comment="Validity period for the planning request, expressed as one or more event windows.  The planning request must be satisfied within this period.
Only one of validityTime or validityEvent should be present in a planning request.">
          <mal:type area="MPS" list="true" name="EventWindow"/>
        </mal:field>
        <mal:field name="timeSystem" canBeNull="true" comment="Specifies the time system used for all time attributes within the planning request (see 4.1.3).
If null, the default time system for is used (see 4.2.8).">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="user" canBeNull="false" comment="The User ID for the person or organization raising the planning request.">
          <mal:type area="MPS" list="false" name="ObjectRef(PlanningUser)"/>
        </mal:field>
        <mal:field name="description" canBeNull="false" comment="Description of the request.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="arguments" canBeNull="true" comment="List of named argument values.  If created from a template planning request, this will include the arguments defined in the RequestDefinition.">
          <mal:type area="MPS" list="true" name="Argument"/>
        </mal:field>
        <mal:field name="standingOrder" canBeNull="false" comment="A flag that indicates whether the planning request is for a repetitive standing order (unbounded other than by the validity period), or is a one-off request.  If it is a standing order, then the ActivityNode must include specification of the repetition criteria.  It should be noted that a one-off request can still include repetition.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="constraints" canBeNull="true" comment="Set of Constraints applicable to the whole planning request.  It should be noted that constraints specific to a planning activity can be specified within the ActivityDetails for that activity within the ActivityNode.">
          <mal:type area="MPS" list="false" name="ConstraintNode"/>
        </mal:field>
        <mal:field name="activities" canBeNull="false" comment="Set of activity details specifying requested activities, optionally with repetition.">
          <mal:type area="MPS" list="false" name="ActivityNode"/>
        </mal:field>
        <mal:field name="inputPlanRef" canBeNull="true" comment="Reference to an existing Plan (output of one planning function) submitted as a planning request to another planning function in the context of a distributed or hierarchical planning system.
Only one of inputPlanRef and inputPlan should be present within the planning request.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="inputPlan" canBeNull="true" comment="An existing Plan  (output of one planning function) submitted as a planning request to another planning function in the context of a distributed or hierarchical planning system.  The Plan is embedded within the planning request.
Only one of inputPlanRef and inputPlan should be present within the planning request.">
          <mal:type area="MPS" list="false" name="Plan"/>
        </mal:field>
        <mal:field name="comments" canBeNull="true" comment="Free text for any additional user comments about the request.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanningRequestResponse" shortFormPart="406" comment="E1: PlanningRequestResponse is a data structure used in the context of the MPS Planning Request service SubmitRequest and UpdateRequest operations, in response to the submitted PlanningRequestDetails defined above.  It contains a reference to the created RequestInstance and the supplied userReference to allow the user to correlate the two.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="instance" canBeNull="false" comment="Reference to the RequestInstance created in response to a SubmitRequest operation, or the updated version of the RequestInstance following an UpdateRequest operation.">
          <mal:type area="MPS" list="false" name="ObjectRef(RequestInstance)"/>
        </mal:field>
        <mal:field name="userReference" canBeNull="false" comment="User supplied reference for the planning request.  This is distinct from the instanceID of the RequestInstance that is assigned by the planning function.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RequestSummaryStatus" shortFormPart="407" comment="E1: RequestSummaryStatus is a data structure used in the context of the MPS Planning Request service getRequestSummaries operation, where a list of these structures is returned.  It contains header fields of the planning request and its status, but not the request content (arguments, activities and constraints).">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="requestInstance" canBeNull="false" comment="Reference to the RequestInstance (key and version).">
          <mal:type area="MPS" list="false" name="ObjectRef(RequestInstance)"/>
        </mal:field>
        <mal:field name="userReference" canBeNull="true" comment="Optional user supplied reference for the planning request.  This is distinct from the instancetID of the RequestInstance that is assigned by the planning function.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="creationDate" canBeNull="false" comment="Creation date-time of the RequestInstance version.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="definition" canBeNull="true" comment="Reference to the RequestDefinition from which the RequestInstance was created, if a planning request template was used.">
          <mal:type area="MPS" list="false" name="ObjectRef(RequestDefinition)"/>
        </mal:field>
        <mal:field name="planningPeriod" canBeNull="false" comment="Specifies which planning period the planning request applies to.  Planning period IDs are mission specific, but can be used to indicate mission phase; planning cycle; or ‘semester’ in observatory missions.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="validityTime" canBeNull="true" comment="Validity period for the planning request, expressed as one or more time windows.  The planning request must be satisfied within this period.
Only one of validityTime or validityEvent should be present in a planning request.">
          <mal:type area="MPS" list="true" name="TimeWindow"/>
        </mal:field>
        <mal:field name="validityEvent" canBeNull="true" comment="Validity period for the planning request, expressed as one or more event windows.  The planning request must be satisfied within this period.
Only one of validityTime or validityEvent should be present in a planning request.">
          <mal:type area="MPS" list="true" name="EventWindow"/>
        </mal:field>
        <mal:field name="user" canBeNull="false" comment="The User ID for the person or organization raising the planning request.">
          <mal:type area="MPS" list="false" name="ObjectRef(PlanningUser)"/>
        </mal:field>
        <mal:field name="description" canBeNull="false" comment="Description of the request.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="standingOrder" canBeNull="false" comment="A flag that indicates whether the planning request is for a repetitive standing order (unbounded other than by the validity period), or is a one-off request.  If it is a standing order, then the ActivityNode must include specification of the repetition criteria.  It should be noted that a one-off request can still include repetition.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="comments" canBeNull="true" comment="Free text for any additional user comments about the request.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current status of the ActivityInstance (see planning request state model in 4.2.5.2)">
          <mal:type area="MPS" list="false" name="RequestStatusEnum"/>
        </mal:field>
        <mal:field name="outputPlanRef" canBeNull="true" comment="References to output Plans that contains the activities resulting from the planning request.">
          <mal:type area="MPS" list="true" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="statusInfo" canBeNull="true" comment="StatusInfo provides the reason for termination and is customizable, but includes:
- Completed (all constituent activities completed successfully)
- Expired (constituent activities expired prior to execution)
- Failed (constituent activities failed during execution)
- Deleted (constituent activities were deleted)
- PartiallyCompleted
It may also be used to provide the reason for rejection.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RequestFilter" shortFormPart="408" comment="E1: RequestFilter is a data structure used in the context of MPS Planning Request Service operations to specify a filtered set of planning requests.  All filter criteria specified are applied (logical AND, not OR).
NOTE	–	All attributes are nullable and it is valid to specify a RequestFilter with no filter criteria; this corresponds to an open filter in which all available planning requests are returned.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="domain" canBeNull="true" comment="Domain of the RequestInstance.  An ordered list representing a domain hierarchy, ‘*’ can be used to represent a wildcard at that level.">
          <mal:type area="MAL" list="true" name="Identifier"/>
        </mal:field>
        <mal:field name="instanceID" canBeNull="true" comment="Identity (key and version) of the RequestInstance">
          <mal:type area="MPS" list="false" name="ObjectRef(RequestInstance)"/>
        </mal:field>
        <mal:field name="creationDate" canBeNull="true" comment="Creation date-time of the RequestInstance version.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="definitionID" canBeNull="true" comment="Identity (key and version) of the RequestDefinition from which the RequestInstance was created.">
          <mal:type area="MPS" list="false" name="ObjectRef(RequestDefinition)"/>
        </mal:field>
        <mal:field name="userID" canBeNull="true" comment="userID of the User who initiated the RequestInstance">
          <mal:type area="MPS" list="false" name="ObjectRef(PlanningUser)"/>
        </mal:field>
        <mal:field name="userReference" canBeNull="true" comment="Reference supplied by User when submitting the RequestInstance.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="status" canBeNull="true" comment="Current status (enum) of the RequestInstance">
          <mal:type area="MPS" list="false" name="RequestStatusEnum"/>
        </mal:field>
        <mal:field name="outputPlanRef" canBeNull="true" comment="Reference to the output Plan generated in response to the RequestInstance">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanInformation" shortFormPart="502" comment="E1: The PlanInformation section of a plan contains administrative and validity details associated with the plan as a whole.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="originator" canBeNull="false" comment="Identity of the entity or system responsible for the production of the plan.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="productionDate" canBeNull="false" comment="Date and time of production of the plan.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="description" canBeNull="false" comment="Description of the plan.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="comments" canBeNull="true" comment="Field for additional comments or notes to the operations team regarding the plan.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="validityStart" canBeNull="false" comment="Start of validity period for the plan.
The validity period defines when the plan is available for operational use.  It cannot be used outside its validity period.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="validityEnd" canBeNull="false" comment="End of validity period for the plan.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="planPeriodStart" canBeNull="false" comment="Start of the plan period.
The plan period defines the start and end points of the plan.  Planned items (planning activities and events) contained within the plan must at least partially overlap the plan period.  The use of the trigger structure allows this to be specified in terms of time, position, pointing, or planning events.  Examples are:
- a specified period of time
- an orbital repeat cycle
- a period between two events ">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
        <mal:field name="planPeriodEnd" canBeNull="false" comment="End of the plan period.">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
        <mal:field name="timeSystem" canBeNull="true" comment="Specifies the time system used for all time attributes within the Plan (see 4.1.3).
If Null, the default time system is used (see 4.2.8).">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlannedItems" shortFormPart="503" comment="E1: ">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="plannedEvents" canBeNull="true" comment="List of planned events contained within the Plan.">
          <mal:type area="MPS" list="true" name="EventInstance"/>
        </mal:field>
        <mal:field name="plannedActivities" canBeNull="true" comment="List of planned activities contained within the Plan.">
          <mal:type area="MPS" list="true" name="ActivityInstance"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanRevisions" shortFormPart="504" comment="E3: The optional PlanRevisions section details the changes between this Plan and another Plan.  PlanRevisions comprise a collection of PlanRevision structures, each of which details the changes with respect to one version of a Plan (the revised Plan ).
In the typical case, there is only one PlanRevision corresponding to the changes between the Plan and its predecessor (the precursor plan).  However, it is possible to include multiple PlanRevision structures documenting the differences with any other version of a Plan.  This can be used to provide a change history for successive versions of the same Plan, or to document the differences between alternate Plans.
In the case of a patch plan, the Plan must include a single PlanRevision relative to the precursor Plan.
Each PlanRevision comprises an ordered set of ItemRevisions that document the change to individual planned items (planning events and activities).  The order should be from earliest to latest modification within the plan period, to allow for the earliest and most critical changes to be applied first to a currently executing plan.  Each ItemRevision references an individual EventInstance or ActivityInstance and indicates whether the planned item is new, modified or deleted in the current Plan.  New or modified items must also exist within the PlannedItems section of the Plan, but deleted items are not contained within the current Plan.  It should be noted that unmodified items do not appear in the PlanRevision.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="planRevisions" canBeNull="false" comment="Set of PlanRevision structures, each detailing the change with respect to an identified Plan.">
          <mal:type area="MPS" list="true" name="PlanRevision"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanRevision" shortFormPart="505" comment="E3: ">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="revisedPlan" canBeNull="false" comment="Reference to the Plan (key and version) with respect to which the plan revisions are detailed.  Typically this is the precursor Plan, but any other Plan can be used.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="revisionStart" canBeNull="false" comment="Start time of the earliest revision.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="revisionEnd" canBeNull="false" comment="End time of the latest revision.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="itemRevisions" canBeNull="true" comment="Ordered list (earliest to latest) of revisions to planned items (activity and event instances).">
          <mal:type area="MPS" list="true" name="ItemRevision"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ItemRevision" shortFormPart="506" comment="E3: ">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="itemRef" canBeNull="false" comment="Object Type: ActivityInstance | EventInstance
Reference to a planned ActivityInstance or EventInstance that is new or modified in the current Plan, or has been deleted with respect to the referenced revisedPlan.">
          <mal:type area="MAL" list="false" name="ObjectRef"/>
        </mal:field>
        <mal:field name="revisionStatus" canBeNull="false" comment="Revision status of the referenced item.  May be one of New, Modified, or Deleted.  Default = Undefined.">
          <mal:type area="MPS" list="false" name="RevisionStatusEnum"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanResources" shortFormPart="508" comment="E4: The optional PlanResources section allows the projected values of planning resources to be communicated between distributed planning and plan execution functions as part of a plan.
This is provided as a set of ResourceProfiles, one per planning resource included.  Resource profiles can provide the projected evolution of the value of a planning resource over the period of the Plan.  Alternatively it can provide a single value at the start of the Plan to enable synchronization between planning systems.  Which approach is used is a deployment choice.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="resourceProfiles" canBeNull="false" comment="Set of resource profiles, one per planning resource, containing the initial value of the resource and optionally the projected evolution of the resource value over the period of the Plan.">
          <mal:type area="MPS" list="true" name="ResourceProfile"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanUpdate" shortFormPart="510" comment="E1: PlanUpdate is a data structure that is used to report changes in status of the Plan as it proceeds through both planning and plan execution functions.  It is returned in the context of the MPS Plan Distribution service GetPlanStatus and MonitorPlanStatus operations, and also the MPS Plan Execution Control service MonitorPlanExecution and GetPlanStatus operations.
PlanUpdates may be distributed to subscribing applications, including status displays, to inform them of the latest status of a Plan.  PlanUpdates may be stored in plan history to provide a complete record of evolving status over time.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="plan" canBeNull="false" comment="Reference to the Plan (key and version) to which the status update relates.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="timestamp" canBeNull="false" comment="Time of status update.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="isAlternate" canBeNull="false" comment="Flag indicating if the Plan has currently been released as an Operational or Alternate plan.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current status of the Plan.">
          <mal:type area="MPS" list="false" name="PlanStatusEnum"/>
        </mal:field>
        <mal:field name="statusInfo" canBeNull="true" comment="Supplementary information for a Plan in the Terminated state.  This is customizable, but if the following conditions exist then the specified text shall be used:
- Completed (nominal)
- Superseded by a successor Plan
- Revoked by a User
- Cancelled (deactivated after start of execution)
- Expired (reached the end of its validity period without being activated)">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanSummaryStatus" shortFormPart="511" comment="E1: PlanSummaryStatus is a data structure that provides an summary view of a Plan that includes the PlanInformation section and current status, but not the full details of the Plan.  It is returned in the context of the MPS Plan Distribution service GetPlanSummaries operation.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="plan" canBeNull="false" comment="Reference to the Plan (key and version) to which the summary status relates.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="isPatchPlan" canBeNull="false" comment="Flag indicating if the Plan is a patch plan that only contains details of the changes from the precursor Plan.  A patch plan must have a precursor.  It must also include a single PlanRevision relative to the precursor Plan.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="precursorPlan" canBeNull="true" comment="Reference to a precursor (or predecessor) Plan from which the changes are detailed in the Plan.  This may be used if there is an iterative re-planning cycle in which successive plans overlap, or where a previous Plan has been updated through re-planning.  If there is no precursor, then the Plan must be a self-standing full plan.
If the Plan is a Patch Plan, then a precursor plan must be specified.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="targetPlan" canBeNull="true" comment="Applicable only for patch plans, this is a reference to the target Plan.  This target Plan is the result of applying the patch plan to the precursor Plan and is distinct from the identity of the patch plan itself.  Patch plans are not permitted in the context of a planning request.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="information" canBeNull="false" comment="Contains header information relating to the Plan, including its originator and validity period.">
          <mal:type area="MPS" list="false" name="PlanInformation"/>
        </mal:field>
        <mal:field name="isAlternate" canBeNull="false" comment="Flag indicating if the Plan has currently been released as an Operational or Alternate plan.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current status of the Plan.">
          <mal:type area="MPS" list="false" name="PlanStatusEnum"/>
        </mal:field>
        <mal:field name="statusInfo" canBeNull="true" comment="Supplementary information for a Plan in the Terminated state.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanActivationStatus" shortFormPart="512" comment="E1: PlanActivationStatus is a data structure that returns the activation status of a Plan in the context of the MPS Plan Execution Control service ActivatePlan and DeactivatePlan operations.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="plan" canBeNull="false" comment="Reference to the Plan (key and version) to which the status relates.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current status of the Plan.">
          <mal:type area="MPS" list="false" name="PlanStatusEnum"/>
        </mal:field>
        <mal:field name="activationInfo" canBeNull="false" comment="ActivationInfo provides customizable detailed information on the result of the activation/deactivation request for the referenced Plan. ">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="SubPlanUpdate" shortFormPart="513" comment="E1: SubPlanUpdate is a data structure that is used to report changes in status of a sub-plan during plan execution.  It is returned in the context of the MPS Plan Execution Control service MonitorSubPlanExecution and GetSubPlanStatus operations.
Sub-plans are not defined as objects within the MPS model.  Individual activities within a Plan may be associated with a single sub-plan via its Identifier.  The plan execution function is responsible for managing and reporting sub-plan status associated with relevant Plan Execution Control service operations, if supported.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="subPlan" canBeNull="false" comment="Identifier of the sub-plan to which the update relates.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="timestamp" canBeNull="false" comment="Time of status update.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current status of the sub-plan, which may be Activated or Deactivated.">
          <mal:type area="MPS" list="false" name="SubPlanStatusEnum"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="SubPlanActivationStatus" shortFormPart="515" comment="E1: SubPlanActivationStatus is a data structure that returns the activation status of a sub-plan in the context of the MPS Plan Execution Control service ActivateSubPlan and DeactivateSubPlan operations.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="plan" canBeNull="false" comment="Identifier of the sub-plan to which the status relates.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="status" canBeNull="false" comment="Current status of the sub-plan, which may be Activated or Deactivated.">
          <mal:type area="MPS" list="false" name="SubPlanStatusEnum"/>
        </mal:field>
        <mal:field name="activationInfo" canBeNull="false" comment="ActivationInfo provides customizable detailed information on the result of the activation/deactivation request for the referenced sub-plan. ">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanQuery" shortFormPart="516" comment="E1: PlanQuery is a data structure used in the context of queryPlan operation of the MPS Plan Distribution Service.  It is used to specify search criteria for querying the available set of Plans.  All fields are nullable, in which case they do not apply as a search criteria.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="planID" canBeNull="true" comment="Query for Plans with the specified PlanID.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="hasPrecursor" canBeNull="true" comment="Query for Plans with or without a precursor.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="isPatchPlan" canBeNull="true" comment="Query for Plans that are or are not patch plans">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="precursorPlan" canBeNull="true" comment="Query for Plans with the specified precursor Plan.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="targetPlan" canBeNull="true" comment="Applicable only for patch plans.  Query for patch plans that have the specified target Plan.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="originator" canBeNull="true" comment="Query for Plans with the specified originator.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="productionDate" canBeNull="true" comment="Query for Plans with a production date in the specified range.">
          <mal:type area="MPS" list="false" name="TimeWindow"/>
        </mal:field>
        <mal:field name="validityPeriod" canBeNull="true" comment="Query for Plans with a validity period within (overlapping with) the specified range.">
          <mal:type area="MPS" list="false" name="TimeWindow"/>
        </mal:field>
        <mal:field name="isAlternate" canBeNull="true" comment="Query for Plans that are or are not Alternate plans.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="status" canBeNull="true" comment="Query for Plans that have a current status matching one of the specified list of Plan statuses.">
          <mal:type area="MPS" list="true" name="PlanStatusEnum"/>
        </mal:field>
        <mal:field name="containedEvents" canBeNull="true" comment="Query for Plans that contain EventInstances whose definition matches one of the specified list of EventDefinitions.">
          <mal:type area="MPS" list="true" name="ObjectRef(EventDefinition)"/>
        </mal:field>
        <mal:field name="containedActivities" canBeNull="true" comment="Query for Plans that contain ActivityInstances whose definition matches one of the specified list of ActivityDefinitions.">
          <mal:type area="MPS" list="true" name="ObjectRef(ActivityDefinition)"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PartialPlan" shortFormPart="517" comment="E1: A PartialPlan is a data structure returned from the getPartialPlan operation of the Plan Distribution Service that contains a reference to the source Plan, the criteria used to select the partial plan, and the partial plan itself.  The partial plan uses the same structure as a normal Plan, with header fields matching those of the source Plan, but only containing the subset of ActivityInstances that matches the selection criteria.  Whether EventInstances and Resources are included is implementation specific, but it might be assumed that any events and resources related to the selected ActivityInstances would be included in the returned partial plan.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="sourcePlan" canBeNull="false" comment="Reference to the Plan of which the partial plan is a selected subset.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="domain" canBeNull="true" comment="Selection criterion based on the domain of contained ActivityInstances.
An ordered list representing a domain hierarchy, ‘*’ can be used to represent a wildcard at that level.">
          <mal:type area="MAL" list="true" name="Identifier"/>
        </mal:field>
        <mal:field name="subPlan" canBeNull="true" comment="Selection criterion based on the subPlan of contained ActivityInstances.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="tags" canBeNull="true" comment="Selection criterion based on tags associated with contained ActivityInstances">
          <mal:type area="MAL" list="true" name="String"/>
        </mal:field>
        <mal:field name="partialPlanStart" canBeNull="true" comment="Selection criterion indicating the start of a range of time, position, or events associated with contained ActivityInstances.">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
        <mal:field name="partialPlanEnd" canBeNull="true" comment="Selection criterion indicating the end of a range of time, position, or events associated with contained ActivityInstances.">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
        <mal:field name="partialPlan" canBeNull="false" comment="The returned partial plan.">
          <mal:type area="MPS" list="false" name="Plan"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PlanFilter" shortFormPart="518" comment="E1: PlanFilter is a data structure used in the context of MPS Plan Distribution Service operations to specify a filtered set of Plans.  All filter criteria specified are applied (logical AND, not OR).">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="domain" canBeNull="true" comment="Domain of the Plan
An ordered list representing a domain hierarchy, ‘*’ can be used to represent a wildcard at that level.">
          <mal:type area="MAL" list="true" name="Identifier"/>
        </mal:field>
        <mal:field name="planID" canBeNull="true" comment="Identity (key and version) of the Plan">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="precursorPlan" canBeNull="true" comment="Identity (key and version) of the precursor Plan">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="status" canBeNull="true" comment="Current status (enum) of the Plan">
          <mal:type area="MPS" list="false" name="PlanStatusEnum"/>
        </mal:field>
        <mal:field name="originator" canBeNull="true" comment="Originator of the Plan">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="validityPeriod" canBeNull="true" comment="Period of time with which the validity period of the Plan overlaps.">
          <mal:type area="MPS" list="false" name="TimeWindow"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PartialPlanFilter" shortFormPart="519" comment="E1: PartialPlanFilter is a data structure input to the getPartialPlan operation of the Plan Distribution Service that contains a reference to the source Plan, and specifies the criteria used to select the partial plan.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="sourcePlan" canBeNull="false" comment="Reference to the Plan of which the partial plan is a selected subset.">
          <mal:type area="MPS" list="false" name="ObjectRef(Plan)"/>
        </mal:field>
        <mal:field name="domain" canBeNull="true" comment="Selection criterion based on the domain of contained ActivityInstances.
An ordered list representing a domain hierarchy, ‘*’ can be used to represent a wildcard at that level.">
          <mal:type area="MAL" list="true" name="Identifier"/>
        </mal:field>
        <mal:field name="subPlan" canBeNull="true" comment="Selection criterion based on the subPlan of contained ActivityInstances.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="tags" canBeNull="true" comment="Selection criterion based on tags associated with contained ActivityInstances">
          <mal:type area="MAL" list="true" name="String"/>
        </mal:field>
        <mal:field name="partialPlanStart" canBeNull="true" comment="Selection criterion indicating the start of a range of time, position, or events associated with contained ActivityInstances.">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
        <mal:field name="partialPlanEnd" canBeNull="true" comment="Selection criterion indicating the end of a range of time, position, or events associated with contained ActivityInstances.">
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="FunctionDefinitionDetails" shortFormPart="801" comment="E8: FunctionDefinition is a data structure that contains static configuration data relating to custom functions: built-in Boolean functions of an MPS system, each of which has a specified Identifier and optional set of argument definitions.  This may change over time, each comprising a separate version of the definition.  FunctionDefinitions form part of the planning configuration data.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="functionID" canBeNull="false" comment="ID of the custom function">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="version" canBeNull="false" comment="Version of the FunctionDefinition.">
          <mal:type area="MAL" list="false" name="UInteger"/>
        </mal:field>
        <mal:field name="description" canBeNull="false" comment="Description of the custom function.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="argDefs" canBeNull="true" comment="List of argument definitions.">
          <mal:type area="MPS" list="true" name="ArgDef"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="FunctionDetails" shortFormPart="802" comment="E8: Contains the information required to invoke a defined function, including the specification of argument values.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="function" canBeNull="false" comment="ID of a specific FunctionDefinition.">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="argSpecs" canBeNull="true" comment="Set of argument specifications for each argument definition contained in the referenced function definition.  These supply a value for each argument, or an expression to enable the value to be derived.">
          <mal:type area="MPS" list="true" name="ArgSpec"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="Position" comment="E6: ">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="CartesianPosition" shortFormPart="2" comment="E6: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Position"/>
        </mal:extends>
        <mal:field name="x" canBeNull="false" comment="Cartesian x coordinate defined in the given frame and with values of the given unit.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="y" canBeNull="false" comment="Cartesian y coordinate defined in the given frame and with values of the given unit.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="z" canBeNull="false" comment="Cartesian z coordinate defined in the given frame and with values of the given unit.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="frame" canBeNull="false" comment="One of the coordinate reference frames as defined in reference [D6] annex B2, or in the SANA registry as per reference [D6] annex E2 or a mission specific frame.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="The distance unit name, as defined in reference [D6] annex D.
Default = ‘km’.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="SurfacePosition" shortFormPart="3" comment="E6: The unit may be defined here.  Typically used to specify a coordinate on the surface of a celestial body.  Optionally, the altitude above the surface (as defined by a reference ellipsoid) can also be specified.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Position"/>
        </mal:extends>
        <mal:field name="longitude" canBeNull="false" comment="Angular coordinate.  May also represent azimuth.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="latitude" canBeNull="false" comment="Angular coordinate.  May also represent elevation.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="frame" canBeNull="false" comment="One of the coordinate reference frames as defined in reference [D6] annex B2, or in the SANA registry as per reference [D6] annex E2 or a mission specific frame.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="To be one of the Angle units as defined in reference [D6] annex D.
Default = ‘deg’.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="altitude" canBeNull="true" comment="Altitude above a reference ellipsoid (negative values allowed).
Default = 0">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="altitudeUnits" canBeNull="true" comment="The distance unit name, as defined in reference [D6] annex D.
Default = ‘m’.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="OrbitFilePosition" shortFormPart="4" comment="E6: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Position"/>
        </mal:extends>
        <mal:field name="orbitFile" canBeNull="false" comment="Name of or reference to a file containing an ODM (reference [D12]).">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="OrbitalPosition" shortFormPart="5" comment="E6: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Position"/>
        </mal:extends>
        <mal:field name="orbitNumber" canBeNull="false" comment="Orbit number.  Depending on the relativeOrbit flag, the orbit number may be absolute (since start of mission) or relative (to the orbital repeat cycle).">
          <mal:type area="MAL" list="false" name="Integer"/>
        </mal:field>
        <mal:field name="relativeOrbit" canBeNull="false" comment="Flag indicating if the orbit number is absolute or relative to the orbital repeat cycle.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="orbitAngle" canBeNull="false" comment="Angle within orbit.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="The units used for orbitAngle, as defined in reference [D6] annex D.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ObjectPosition" shortFormPart="6" comment="E6: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Position"/>
        </mal:extends>
        <mal:field name="object" canBeNull="false" comment="Name or identifier of a celestial body as per reference [D6] annex E2, or a mission specific object.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PositionReference" shortFormPart="7" comment="E6: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Position"/>
        </mal:extends>
        <mal:field name="reference" canBeNull="false" comment="Name of a mission specifc position definition.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="Direction" comment="E6: ">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="CartesianDirection" shortFormPart="8" comment="E6: Dimensionless unit vector.  Either a direction in the base frame or in a secondary frame may be defined.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Direction"/>
        </mal:extends>
        <mal:field name="x" canBeNull="false" comment="Cartesian x coordinate defined in the given frame.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="y" canBeNull="false" comment="Cartesian y coordinate defined in the given frame.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="z" canBeNull="false" comment="Cartesian z coordinate defined in the given frame.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="frame" canBeNull="false" comment="One of the coordinate reference frames as defined in reference [D6] annex B2, or in the SANA registry as per reference [D6] annex E2 or a mission specific frame.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="SphericalDirection" shortFormPart="9" comment="E6: Based on azimuth and elevation, the unit may be defined here.  Typically used to define a direction in a secondary frame.  When used to specify a surface coordinate, this actually represents a {longitude, latitude} pair.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Direction"/>
        </mal:extends>
        <mal:field name="azimuth" canBeNull="false" comment="Angular coordinate.  May also represent longitude.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="elevation" canBeNull="false" comment="Angular coordinate.  May also represent latitude.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="frame" canBeNull="false" comment="One of the coordinate reference frames as defined in reference [D6] annex B2, or in the SANA registry as per reference [D6] annex E2 or a mission specific frame.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="To be one of the Angle units as defined in reference [D6] annex D.
Default = ‘deg’.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RADecDirection" shortFormPart="10" comment="E6: Based on celestial angular coordinates of right ascension and declination, the unit may be defined here.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Direction"/>
        </mal:extends>
        <mal:field name="ra" canBeNull="false" comment="Right Ascension: Celestial angular coordinate, measured eastward along the celestial equator.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="dec" canBeNull="false" comment="Declination: Celestial angular coordinate, north or south of the celestial equator.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="frame" canBeNull="false" comment="One of the coordinate reference frames as defined in reference [D6] annex B2, or in the SANA registry as per reference [D6] annex E2 or a mission specific frame.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="To be one of the Angle units as defined in reference [D6] annex D.
Default = ‘deg’.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RevolutionDirection" shortFormPart="11" comment="E6: Based on fixed rotation about an axis, the direction is defined by an angle within a single revolution.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Direction"/>
        </mal:extends>
        <mal:field name="revolutionAngle" canBeNull="false" comment="Angle within a revolution.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="To be one of the Angle units as defined in reference [D6] annex D.
Default = ‘deg’.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="NamedTargetDirection" shortFormPart="12" comment="E6: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Direction"/>
        </mal:extends>
        <mal:field name="namedTarget" canBeNull="false" comment="Name or identifier of a catalogued celestial object or a mission specific object.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="DirectionReference" shortFormPart="13" comment="E6: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Direction"/>
        </mal:extends>
        <mal:field name="reference" canBeNull="false" comment="Name of a mission specific direction definition.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PhysicalValue" comment="E6: PhysicalValue is an abstract base type for the specific value types defined below.  Only specific value types are used in the pointing constraint definitions below.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="value" canBeNull="false" comment="Physical value.">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="Optional unit.  The unit type depends on the specific value type, as defined in reference [D6] annex D.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="Angle" shortFormPart="14" comment="E6: Has units of type Angle.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="PhysicalValue"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="AngularVelocity" shortFormPart="15" comment="E6: Has units of type AngularVelocity.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="PhysicalValue"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="Distance" shortFormPart="16" comment="E6: Has units of type Distance.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="PhysicalValue"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="Expression" shortFormPart="17" comment="E1: When entering MPS data, it is often not possible to provide an absolute value for a required attribute.  Instead, it is necessary to provide a calculation to be performed at run time that supplies the value.  These calculations are defined as expressions of a specified data type.  The data type can be any defined ArgType (see 4.3.1), which may be any MAL Attribute type, Position, or Direction.
The expressions are themselves text strings which comprise a sequence of operands and operators.  Operands may be literals or references to objects and their attributes or arguments, as defined within the MPS information model.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="type" canBeNull="false" comment="Enumeration specifying the data type of the result of the expression.">
          <mal:type area="MPS" list="false" name="ArgTypeEnum"/>
        </mal:field>
        <mal:field name="value" canBeNull="false" comment="Providing the ArgType is a MAL Attribute type, this field may be used to hold a simple literal value or the evaluated result of the expression.">
          <mal:type area="MAL" list="false" name="Attribute"/>
        </mal:field>
        <mal:field name="expressionLanguage" canBeNull="false" comment="Defines the expression language used to specify the expression.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="expression" canBeNull="false" comment="The text of the expression.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="Slider" shortFormPart="18" comment="E1: Used to indicate a relative position with respect to an MPS object, such as a planning activity where 0 represents the start and 1 the end of the activity.  The slider is a real number that can represent any point between these two extremes.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="position" canBeNull="false" comment="Relative point between the start and end of an MPS object, where 0 represents the start and 1 represents the end.">
          <mal:type area="MAL" list="false" name="Float"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="StateDef" shortFormPart="19" comment="E1: Status values may be represented as enumerated Integers, but the enumeration is not defined by the Recommended Standard, but in the context of planning configuration data.  StateDefs hold the definitions of the text labels associated with specific status values.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="value" canBeNull="false" comment="Enumerated value of the Status">
          <mal:type area="MAL" list="false" name="Integer"/>
        </mal:field>
        <mal:field name="state" canBeNull="false" comment="Text label associated with the enumerated value.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="TimeWindow" shortFormPart="20" comment="E1: Represents a specific period of time, specified as two Expressions of type Time defining the start and end of the TimeWindow.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="start" canBeNull="false" comment="Start time of the time window.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="end" canBeNull="false" comment="End time of the time window.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="EventWindow" shortFormPart="21" comment="E1: Represents a specific period relative to two events that mark the start and end of the EventWindow.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="startEvent" canBeNull="false" comment="Object Type: EventInstance.
The start of the event window is relative to the referenced startEvent.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="startOffset" canBeNull="false" comment="The start of the event window is offset by the defined time period from the startEvent.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="endEvent" canBeNull="false" comment="Object Type: EventInstance.
The end of the event window is relative to the referenced endEvent.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="endOffset" canBeNull="false" comment="The end of the event window is offset by the defined time period from the endEvent.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="DefListEntry" shortFormPart="22" comment="E1: Used in the context of the MPS Plan Information Management service, this holds a list of definitions for a specified type of MPS data item, together with their definitions.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="definitionID" canBeNull="false" comment="Object Type: ActivityDefinition | EventDefinition | Resource | RequestDefinition
Item Definition (key and version)">
          <mal:type area="MAL" list="false" name="ObjectRef"/>
        </mal:field>
        <mal:field name="description" canBeNull="false" comment="Description of the item">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ArgDef" shortFormPart="23" comment="E1: The definition of an argument is an ArgDef, a set of which may be contained within the definition MO object of a planning event, planning activity, or planning request.  This defines the name and data type of the argument.  Depending on the data type, the ArgDef may require additional type specific attributes to support data validation.  SubTypes are identified for Numeric, String, and Status arguments.
It should be noted that if the argument is an array, then all values of the array are of the same type, as defined in argType.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="argName" canBeNull="false" comment="Name of the argument">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="description" canBeNull="false" comment="Extended description of the argument">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="argType" canBeNull="false" comment="Enumeration specifying the data type of the argument.">
          <mal:type area="MPS" list="false" name="ArgTypeEnum"/>
        </mal:field>
        <mal:field name="argUnits" canBeNull="true" comment="Units that the argument value is expressed in, as defined in reference [D6] annex D.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="isArray" canBeNull="false" comment="If True, indicates that the argument is an array of values of type ArgType.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="validationData" canBeNull="true" comment="Optional.  Specifies the allowed range of values for the Argument, with concrete subtypes specific to the data type of the Argument.">
          <mal:type area="MPS" list="false" name="ValidationDetails"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="Argument" shortFormPart="24" comment="E1: The instance of an argument is an Argument, a set of which may be contained within the instance MO object of a planning event or planning activity or within a planning request.  This comprises the name and value of the argument, corresponding to the set of arguments defined in the ArgDef.  Argument values are represented as a MAL Attribute of appropriate data type.  As there is no equivalent MAL::Attribute type for Position or Direction, values of these types are represented as a MAL::String containing a literal in the defined expression format for these types.
It should be noted that if the argument is an array (count &gt; 1) then all values of the array are of the same type, as defined by the argType of the associated ArgDef.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="argName" canBeNull="false" comment="Name of the argument">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="count" canBeNull="true" comment="If argument is an array, count of the number of elements in the array.">
          <mal:type area="MAL" list="false" name="Integer"/>
        </mal:field>
        <mal:field name="argValues" canBeNull="false" comment="Argument value (or values if it is an array).  MAL Attribute type must match the ArgType of the ArgDef.  Position and Direction values are represented as a MAL::String.">
          <mal:type area="MAL" list="true" name="Attribute"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ArgSpec" shortFormPart="25" comment="E1: In the case of the planning activity, there is also an ArgSpec, a set of which may be contained within the ActivityDetails structure embedded within a planning request or parent planning activity definition.  The ArgSpec defines how to derive the value of an Argument when instantiating it at run-time.  The ArgSpec attribute is an Expression, the result of which must be a value matching the defined ArgType.">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="argName" canBeNull="false" comment="Name of the argument">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="count" canBeNull="true" comment="If argument is an array, count of the number of elements in the array.">
          <mal:type area="MAL" list="false" name="Integer"/>
        </mal:field>
        <mal:field name="argSpecs" canBeNull="false" comment="Expression that can be evaluated at run-time to provide argument value(s) of appropriate data type.">
          <mal:type area="MPS" list="true" name="Expression"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ValidationDetails" comment="E1: ">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="NumericRange" shortFormPart="26" comment="E1: Concrete sub-type of ValidationDetails that provides additional attributes to support data validation for numeric data types.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ValidationDetails"/>
        </mal:extends>
        <mal:field name="min" canBeNull="false" comment="Minimum value of the argument">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="max" canBeNull="false" comment="Maximum value of the argument">
          <mal:type area="MAL" list="false" name="Double"/>
        </mal:field>
        <mal:field name="precision" canBeNull="false" comment="Precision of the argument.">
          <mal:type area="MAL" list="false" name="Short"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="StringPattern" shortFormPart="27" comment="E1: Concrete sub-type of ValidationDetails that provides additional attributes to support data validation for the string data type.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ValidationDetails"/>
        </mal:extends>
        <mal:field name="maxLength" canBeNull="false" comment="Maximum length of the string (characters).">
          <mal:type area="MAL" list="false" name="Integer"/>
        </mal:field>
        <mal:field name="regex" canBeNull="false" comment="A ‘regular expression’ or sequence of characters defining a character pattern that the string value must match.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="StatusValues" shortFormPart="28" comment="E1: Concrete sub-type of ValidationDetails that provides additional attributes to support data validation and interpretation for integer type arguments that are effectively enumerated Statuses.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ValidationDetails"/>
        </mal:extends>
        <mal:field name="allowedValues" canBeNull="false" comment="Set of allowed State definitions (see 4.3.4), comprising the enumerated value and an associated text label.">
          <mal:type area="MPS" list="true" name="StateDef"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="Constraint" comment="E1: ">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="ConstraintNode" shortFormPart="29" comment="E1: Multiple planning constraints can be combined using a ConstraintNode.  The ConstraintNode specifies the logical operation (AND or OR) to be used when combining a set of constraints together.  As the ConstraintNode is itself defined as a sub-type of Constraint, it is possible to construct a tree of ConstraintNodes using different logical operators.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Constraint"/>
        </mal:extends>
        <mal:field name="operator" canBeNull="false" comment="Enumeration specifying the logic for combining multiple Boolean conditions together.  One of {AND, OR}.
Default = AND">
          <mal:type area="MPS" list="false" name="LogicOpEnum"/>
        </mal:field>
        <mal:field name="negate" canBeNull="false" comment="Specifies whether the result of combining the Constraints is to be inverted (NOT function).
Default = False">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="constraints" canBeNull="false" comment="The set of Constraints to be combined.">
          <mal:type area="MPS" list="true" name="Constraint"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ConditionalConstraint" comment="E1: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Constraint"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="ConstraintExpression" shortFormPart="31" comment="E1: All types of constraint can be considered conditions that are either met or not met when a planning activity is placed in a Plan.  They can therefore be specified as a potentially complex Boolean expression that combines references to the arguments and attributes of objects in the MPS information model using operators of various types (arithmetic, comparative, logical, string, temporal, and geometric).  The expression must evaluate to TRUE for the constraint to be met.
As introduced in 4.3.3, this Recommended Standard does not define a full expression language capable of supporting such complex Boolean expressions.  It does, however, support the use of externally defined expression languages.  The ConstraintExpression type allows for the use of such an expression language to define any type of constraint, providing communicating entities all have the capability to evaluate that expression language.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ConditionalConstraint"/>
        </mal:extends>
        <mal:field name="constraint" canBeNull="false" comment="Potentially complex conditional expression that must evaluate to TRUE for the constraint to be met.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="TemporalConstraint" comment="E2: Temporal constraints impose a restriction on when a planning activity can appear in a plan.  The abstract type TemporalConstraint identifies the planning activity that is subject to the constraint, while concrete sub-types allow the specification of three different types of temporal constraint:
TimeConstraint:  the time at which the planning activity is to be planned;
TimeWindowConstraint:  a time window within which the planning activity is to be planned;
DurationConstraint: a restriction on the duration of the planning activity in the plan.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ConditionalConstraint"/>
        </mal:extends>
        <mal:field name="activityRef" canBeNull="true" comment="Object Type: ActivityInstance.
Identifies the constrained planning activity. If omitted the activity containing the constraint is assumed.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="TimeConstraint" shortFormPart="32" comment="E2: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="TemporalConstraint"/>
        </mal:extends>
        <mal:field name="time" canBeNull="false" comment="The time at which the planning activity must be planned.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="timeRef" canBeNull="false" comment="The point in the duration of the planning activity that is time constrained.
0:  the start of the planning activity
1:  the end of the planning activity">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="TimeWindowConstraint" shortFormPart="33" comment="E2: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="TemporalConstraint"/>
        </mal:extends>
        <mal:field name="startRef" canBeNull="false" comment="The point in the duration of the activity that is constrained to be after the start time of the time window.  Although typically the start of the activity (0), this can be any point up to the end of the activity (1).">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="endRef" canBeNull="false" comment="The point in the duration of the activity that is constrained to be before the end time of the time window.  Although typically the end of the activity (1), this can be any point up to the start of the activity (0).">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="timeWindows" canBeNull="false" comment="The [set of] TimeWindows within which the activity must be placed on the Plan.">
          <mal:type area="MPS" list="true" name="TimeWindow"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="DurationConstraint" shortFormPart="34" comment="E2: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="TemporalConstraint"/>
        </mal:extends>
        <mal:field name="minDuration" canBeNull="false" comment="Specifies the minimum duration of the planning activity">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="maxDuration" canBeNull="false" comment="Specifies the maximum duration of the planning activity">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="SequentialConstraint" shortFormPart="35" comment="E2: Sequential constraints impose a restriction on the order of planning activities in a Plan with respect to both other planning activities and planning events.
Two objects are identified:  the predecessor which must be followed in the Plan by the successor.  While either the predecessor or successor may be a planning event, it is not possible to specify a sequential constraint between two planning events: one or both must be a planning activity.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ConditionalConstraint"/>
        </mal:extends>
        <mal:field name="predecessor" canBeNull="false" comment="Object Type: ActivityInstance | EventInstance
Identifies the planning activity or planning event that must occur first on the Plan.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="successor" canBeNull="false" comment="Object Type: ActivityInstance | EventInstance
Identifies the planning activity or planning event that must follow the predecessor on the Plan.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="predecessorRef" canBeNull="false" comment="Point on the predecessor that must be followed by the successor">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="successorRef" canBeNull="false" comment="Point on the successor that must follow the predecessor">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="minOffset" canBeNull="false" comment="Minimum period between the specified points on the predecessor and successor.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="maxOffset" canBeNull="false" comment="Maximum period between the specified points on the predecessor and successor.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ExclusionConstraint" shortFormPart="36" comment="E2: An exclusion constraint specifies a set of 2 or more planning activities or planning events that cannot occur concurrently in a Plan.  As only planning activities can be excluded, at least one of the set must be a planning activity.  Excluded objects are specified by definition [class] rather than instance, the exclusion applying to all instances of the class.  Exclusion implies no overlap between the excluded items.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ConditionalConstraint"/>
        </mal:extends>
        <mal:field name="classRefs" canBeNull="false" comment="Object Type: ActivityDefinition | EventDefinition
Specifies the definition (class) of excluded planning activities and planning events.">
          <mal:type area="MAL" list="true" name="ObjectRef"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ArgumentConstraint" shortFormPart="37" comment="E5: An argument constraint may be associated with a planning activity to restrict when it can be planned, based on the value of an argument of the planning activity itself or a related planning event.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ConditionalConstraint"/>
        </mal:extends>
        <mal:field name="activityRef" canBeNull="true" comment="Object Type: ActivityInstance.
Identifies the planning activity for which the argument constraint applies.  If omitted the activity containing the constraint is assumed.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="objectRef" canBeNull="true" comment="Object Type: ActivityInstance | EventInstance
Identifies the Object (planning activity or planning event) whose argument is to be referenced.  If omitted the activity containing the constraint is assumed.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="argName" canBeNull="false" comment="Identifies the specific argument of the referenced Object whose value is to be compared">
          <mal:type area="MAL" list="false" name="Identifier"/>
        </mal:field>
        <mal:field name="comparator" canBeNull="false" comment="Comparisson operator, which may be one of:
=, !=, &gt;, &gt;=, &lt;, &lt;=, contains, icontains
The contains operator only applies to strings and may be case sensitive or insensitive.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="value" canBeNull="false" comment="Value (of same type as the referenced Argument) to be compared against.">
          <mal:type area="MAL" list="false" name="Attribute"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ResourceConstraint" comment="E5: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ConditionalConstraint"/>
        </mal:extends>
        <mal:field name="activityRef" canBeNull="true" comment="Object Type: ActivityInstance.
Identifies the planning activity for which the resource constraint applies.  If omitted the activity containing the constraint is assumed.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="resourceRef" canBeNull="false" comment="Object Type: Resource
Identifies the planning resource that is constrained for the duration of the planning activity.">
          <mal:type area="MAL" list="false" name="ObjectRef"/>
        </mal:field>
        <mal:field name="comparator" canBeNull="false" comment="comparison operator, which may be one of:
=, !=, &gt;, &gt;=, &lt;, &lt;=, contains, icontains
The contains operator only applies to strings and may be case sensitive or insensitive.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="SimpleResourceConstraint" shortFormPart="39" comment="E5: The simple resource constraint must be satisfied for the duration of the referenced planning activity.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ResourceConstraint"/>
        </mal:extends>
        <mal:field name="value" canBeNull="false" comment="Value (of same type as the referenced Resource) to be compared against.">
          <mal:type area="MAL" list="false" name="Attribute"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ComplexResourceConstraint" shortFormPart="40" comment="E4: In the [simple] resource constraint, the value of the referenced planning resource is constrained against a single value for the entire duration of the referenced planning activity.
With the complex resource constraint, the period over which the constraint applies can be customized relative to the referenced planning activity; and the value against which the referenced planning resource is constrained can be specified as a relative resource profile which evolves over time.
The attributes of the complex resource constraint extend or modify those of the [simple] resource constraint as follows:">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ResourceConstraint"/>
        </mal:extends>
        <mal:field name="startRef" canBeNull="false" comment="Identifies the point in the duration of the referenced planning activity to which the start of the constraint period relates.">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="endRef" canBeNull="false" comment="Identifies the point in the duration of the referenced planning activity to which the end of the constraint period relates.">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="startOffset" canBeNull="false" comment="Offset from startRef that specifies the start of the constraint period.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="endOffset" canBeNull="false" comment="Offset from endRef that specifies the end of the constraint period.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="valueProfile" canBeNull="false" comment="ResourceProfile specifying an evolving value over time against which the value of the planning resource is to be compared.
(See 4.2.4.3.)">
          <mal:type area="MPS" list="false" name="RelativeResourceProfile"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="FunctionConstraint" shortFormPart="41" comment="E8: Function constraints make use of an external custom function to determine whether or not a constraint is satisfied.  Available functions must be pre-defined (see 4.2.9) to allow them to be referenced in a function constraint.
As for complex resource constraints, the period over which the function constraint applies is specified relative to the referenced planning activity.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ConditionalConstraint"/>
        </mal:extends>
        <mal:field name="activityRef" canBeNull="true" comment="Object Type: ActivityInstance.
Identifies the planning activity for which the function constraint applies. If omitted the activity containing the constraint is assumed.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="startRef" canBeNull="false" comment="Identifies the point in the duration of the referenced planning activity to which the start of the constraint period relates.">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="endRef" canBeNull="false" comment="Identifies the point in the duration of the referenced planning activity to which the end of the constraint period relates.">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="startOffset" canBeNull="false" comment="Offset from startRef that specifies the start of the constraint period.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="endOffset" canBeNull="false" comment="Offset from endRef that specifies the end of the constraint period.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="function" canBeNull="false" comment="Specifies the Function to be applied and its set of input arguments.">
          <mal:type area="MPS" list="false" name="FunctionDetails"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="GeometricConstraint" comment="E7: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="ConditionalConstraint"/>
        </mal:extends>
        <mal:field name="activityRef" canBeNull="true" comment="Object Type: ActivityInstance.
Identifies the planning activity for which the geometric constraint applies. If omitted the activity containing the constraint is assumed.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="startRef" canBeNull="false" comment="Identifies the point in the duration of the referenced planning activity to which the start of the constraint period relates.">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="endRef" canBeNull="false" comment="Identifies the point in the duration of the referenced planning activity to which the end of the constraint period relates.">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="startOffset" canBeNull="false" comment="Offset from startRef that specifies the start of the constraint period.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="endOffset" canBeNull="false" comment="Offset from endRef that specifies the end of the constraint period.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PositionConstraint" shortFormPart="42" comment="E7: Sub-type of geometric constraint expressed in terms of a specified Position and a tolerance.  The tolerance is defined as a sphere around the specified position, expressed as a distance or angle.  It should be noted that the position itself can be expressed using any of the concrete position sub-types, including orbital and surface positions.  The use of a constraint expressed by OrbitalPosition is particularly relevant for Earth observation satellites with a repetitive ground track and on-board position based scheduler.  The position can also specified as an expression.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="GeometricConstraint"/>
        </mal:extends>
        <mal:field name="position" canBeNull="false" comment="Specifies the required position expressed using any concrete position type.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="tolerance" canBeNull="false" comment="Specifies the maximum distance or angle from the required position that satisfies the constraint, effectively defining a sphere around the required position.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="Optional.  The tolerance unit name, as defined in reference [D6] annex D.
Default = ‘km’, but ‘deg’ is more relevant for an OrbitalPosition.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PointingConstraint" shortFormPart="43" comment="E7: Pointing constraints impose a restriction on a planning activity appearing in a Plan, based on the pointing direction of a physical object, such as a spacecraft or instrument.
As with the Direction data types (see 4.3.2.3), pointing constraints are consistent with the pointing templates defined for use within CCSDS Navigation data format Recommended Standards, and specifically the Pointing Request Message (PRM) (reference [D6]).  PointingConstraint is a concrete sub-type of GeometricConstraint that includes attributes common to all pointing templates.  The pointing template itself is then identified as an attribute and any additional arguments applicable to the template are provided as a list of name-value pairs.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="GeometricConstraint"/>
        </mal:extends>
        <mal:field name="pointingFrame" canBeNull="true" comment="Optional.  Frame to which the pointing constraint applies.  One of the spacecraft body frames defined in reference [D6] annex B2, or in the SANA registry as per reference [D6] annex E2, section 1.7 reference [19] or a mission specific frame.  Default frame is the spacecraft frame or any other mission specific default frame.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="boresight" canBeNull="false" comment="Direction in any spacecraft frame.">
          <mal:type area="MPS" list="false" name="Direction"/>
        </mal:field>
        <mal:field name="boresightMargin" canBeNull="true" comment="Defines an optional cone region around the boresight, allowing a margin for application of the pointing constraint.
Default = 0.0">
          <mal:type area="MPS" list="false" name="Angle"/>
        </mal:field>
        <mal:field name="phaseAngleMargin" canBeNull="true" comment="Defines an optional rotation around the boresight, w.r.t. the default phase angle, allowing a margin for application of the pointing constraint.
Default = 0.0">
          <mal:type area="MPS" list="false" name="Angle"/>
        </mal:field>
        <mal:field name="unconstrainedPhaseAngle" canBeNull="true" comment="If TRUE no constraint will apply to the phaseAngle.  The phaseAngleMargin attribute will be ignored in this case.
Default = FALSE">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="pointingTemplate" canBeNull="false" comment="One of the pointing templates defined in the PRM with the XML available in the SANA registry reference [D6] annex E2, or a mission specific pointing template.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
        <mal:field name="pointingArguments" canBeNull="true" comment="The argument list is consistent with the referenced template by name.  Physical values are represented as a pair of arguments containing the value and units respectively.  Position and Direction type arguments are represented as strings containing the literal value.">
          <mal:type area="MAL" list="true" name="NamedValue"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RevolutionConstraint" shortFormPart="44" comment="E7: Specifies a range of revolution angles for a rotating spacecraft.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="GeometricConstraint"/>
        </mal:extends>
        <mal:field name="revolutionAngle" canBeNull="false" comment="Angle of revolution">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="tolerance" canBeNull="false" comment="Tolerance in the angle of revolution">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="Optional.  The angular unit name, as defined in reference [D6] annex D.
Default = ‘deg’.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="DistanceConstraint" shortFormPart="45" comment="E7: Specifies a range of distances between two physical objects (the observer and the target).">
        <mal:extends>
          <mal:type area="MPS" list="false" name="GeometricConstraint"/>
        </mal:extends>
        <mal:field name="observer" canBeNull="false" comment="Position of the observer [Object1]">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="target" canBeNull="false" comment="Position of the target [Object2]">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="minDistance" canBeNull="false" comment="Minimum distance between observer and target">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="maxDistance" canBeNull="false" comment="Maximum distance between observer and target">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="Optional.  The distance unit name, as defined in reference [D6] annex D.
Default = ‘km’.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="AngleConstraint" shortFormPart="46" comment="E7: Specifies a range of values for the angle subtended between three physical objects.  The constrained angle is that subtended at the central object by target objects 1 and 2.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="GeometricConstraint"/>
        </mal:extends>
        <mal:field name="centreObject" canBeNull="false" comment="Position of the central object.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="targetObject1" canBeNull="false" comment="Position of target object 1.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="targetObject2" canBeNull="false" comment="Position of target object 2.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="minAngle" canBeNull="false" comment="Minimum angle subtended at the central object by target objects 1 and 2.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="maxAngle" canBeNull="false" comment="Maximum angle subtended at the central object by target objects 1 and 2.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="Optional.  The angular unit name, as defined in reference [D6] annex D.
Default = ‘deg’.">
          <mal:type area="MAL" list="false" name="String "/>
        </mal:field>
      </mal:composite>

      <mal:composite name="Effect" comment="E5: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Constraint"/>
        </mal:extends>
        <mal:field name="activityRef" canBeNull="true" comment="Object Type: ActivityInstance | ActivityDefinition.
Identifies the planning activity for which the resource effect applies.  May be either an ActivityDefinition or an ActivityInstance.  If omitted the activity containing the effect is assumed.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="resourceRef" canBeNull="false" comment="Object Type: Resource
Identifies the planning resource that is constrained for the duration of the planning activity.">
          <mal:type area="MAL" list="false" name="ObjectRef"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="SimpleEffect" shortFormPart="47" comment="E5: A simple effect applies the defined operation on the specified planning resource at the time relative to the planning activity defined by timeRef+timeOffset.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Effect"/>
        </mal:extends>
        <mal:field name="timeRef" canBeNull="false" comment="The point in the duration of the planning activity to which the time of the Effect is relative.
0:  the start of the planning activity
1:  the end of the planning activity">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="timeOffset" canBeNull="false" comment="Offset from timeRef that specifies the time at which the Effect is to be applied.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="operator" canBeNull="false" comment="Operation to be performed on the planning resource.  One of: SET, INCREMENT, DECREMENT.
Increment and decrement are only applicable to numeric data types.">
          <mal:type area="MPS" list="false" name="EffectOperationEnum"/>
        </mal:field>
        <mal:field name="value" canBeNull="false" comment="The value that the planning resource is to be set to if the Effect operator is SET; or to be incremented/decremented by if it is INCREMENT or DECREMENT.">
          <mal:type area="MAL" list="false" name="Attribute"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="ComplexEffect" shortFormPart="49" comment="E5: In the simple effect, the value of the impacted planning resource is set to the specified value at a single point in time.
With the complex effect, the value of the impacted planning resource can be evolved over a specified time period in accordance with a defined RelativeResourceProfile.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Effect"/>
        </mal:extends>
        <mal:field name="startRef" canBeNull="false" comment="Identifies the point in the duration of the referenced planning activity to which the start of the effect period relates.">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="endRef" canBeNull="false" comment="Identifies the point in the duration of the referenced planning activity to which the end of the effect period relates.">
          <mal:type area="MPS" list="false" name="Slider"/>
        </mal:field>
        <mal:field name="startOffset" canBeNull="false" comment="Offset from startRef that specifies the start of the effect period.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="endOffset" canBeNull="false" comment="Offset from endRef that specifies the end of the effect period.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="operator" canBeNull="false" comment="Operation to be performed on the planning resource.  One of: SET, INCREMENT, DECREMENT.
Increment and decrement are only applicable to numeric data types.">
          <mal:type area="MPS" list="false" name="EffectOperationEnum"/>
        </mal:field>
        <mal:field name="Value" canBeNull="false" comment="Resource profile specifying an evolving value to which the value of the planning resource is to be set.
(See 4.2.4.3.)">
          <mal:type area="MPS" list="false" name="RelativeResourceProfile"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="Trigger" comment="E1: All sub-classes of Trigger include the time at which they are predicted to occur (in advance of execution); and, where applicable, the time at which they actually occurred (post execution).">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="time" canBeNull="false" comment="Predicted or actual time of Trigger.  The predicted time may evolve during the planning process up to the time of execution.  The actual time is only available post execution, and hence can only be provided by a plan execution function.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="TimeTrigger" shortFormPart="50" comment="E1: Sub-type of Trigger based on time.  The trigger time is the specified constraint, and will usually match the predicted time on the base class during the planning process, but the actual time could still be slightly different post-execution.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:extends>
        <mal:field name="triggerTime" canBeNull="false" comment="Planned time of Trigger.">
          <mal:type area="MAL" list="false" name="Time"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PositionTrigger" shortFormPart="51" comment="E6: Sub-type of Trigger based on position.  Depending on the coordinate type of position used, a margin may be specified in terms of distance from the specified position.  This is not relevant for an OrbitalPosition, as an orbiting spacecraft would pass through the specified angle.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:extends>
        <mal:field name="triggerPosition" canBeNull="false" comment="Planned position of Trigger.">
          <mal:type area="MPS" list="false" name="Position"/>
        </mal:field>
        <mal:field name="distanceMargin" canBeNull="true" comment="Defines a sphere around the trigger position within which a position is considered to meet the trigger condition.">
          <mal:type area="MPS" list="false" name="Distance"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="DirectionTrigger" shortFormPart="52" comment="E6: Sub-type of Trigger based on pointing.  Depending on the coordinate type of direction used, a margin may be specified in terms of angle from the specified direction.  This is not relevant for a RevolutionDirection, as a rotating spacecraft or instrument would pass through the specified angle.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:extends>
        <mal:field name="triggerDirection" canBeNull="false" comment="Planned direction of Trigger.">
          <mal:type area="MPS" list="false" name="Direction"/>
        </mal:field>
        <mal:field name="angleMargin" canBeNull="true" comment="Defines a circle around the trigger direction within which a direction is considered to meet the trigger condition.">
          <mal:type area="MPS" list="false" name="Angle"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="AngleTrigger" shortFormPart="53" comment="E6: Sub-type of Trigger based on the angle subtended between three physical objects.  The trigger angle is that subtended at the central object by target objects 1 and 2.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:extends>
        <mal:field name="centreObject" canBeNull="false" comment="Position of the central object.  The trigger angle is that subtended at the central object by target objects 1 and 2.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="targetObject1" canBeNull="false" comment="Position of target object 1.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="targetObject2" canBeNull="false" comment="Position of target object 2.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="angleMargin" canBeNull="false" comment="The trigger occurs if the angle is within ± angleMargin of the trigger angle.">
          <mal:type area="MPS" list="false" name="Angle"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="EventTrigger" shortFormPart="54" comment="E1: Sub-type of Trigger based on planning event.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Trigger"/>
        </mal:extends>
        <mal:field name="triggerEvent" canBeNull="false" comment="Reference to an EventInstance">
          <mal:type area="MPS" list="false" name="ObjectRef(EventInstance)"/>
        </mal:field>
        <mal:field name="timeOffset" canBeNull="false" comment="Time offset from the EventInstance">
          <mal:type area="MAL" list="false" name="Duration"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="Repetition" comment="E1: A repetition is used to specify the repeated instantiation of a [set of] planning activities.  Multiple sub-types of Repetition are defined to support the specification of repeat cycles by different criteria.  It can be used in the context of a planning request to specify a standing order for repeated execution of the [set of] planning activities.
In the context of an ActivityNode embedded within a planning request (see 4.2.2.3), it is possible to nest one Repetition inside another, enabling the specification of complex repetitive sequences of activities.
All sub-types have the following attributes:">
        <mal:extends>
          <mal:type area="MAL" list="false" name="Composite"/>
        </mal:extends>
        <mal:field name="count" canBeNull="true" comment="Maximum number of repeat cycles/instances [optional].
If not specified there is no limit to the number of repetitions.">
          <mal:type area="MAL" list="false" name="Integer"/>
        </mal:field>
        <mal:field name="timeWindow" canBeNull="true" comment="Time period over which the repetition is applicable [optional].
If not specified repetition continues indefinitely.">
          <mal:type area="MPS" list="false" name="TimeWindow"/>
        </mal:field>
        <mal:field name="separationType" canBeNull="false" comment="Specifies whether the repetition interval is Relative to the previous occurrence, or Absolute for all occurrences.">
          <mal:type area="MPS" list="false" name="SeparationTypeEnum"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="TemporalRepetition" shortFormPart="56" comment="E1: A sub-type of Repetition based on time.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Repetition"/>
        </mal:extends>
        <mal:field name="initialTime" canBeNull="false" comment="Nominal time of first occurrence.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="separation" canBeNull="false" comment="The required time interval between occurrences.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="tolerance" canBeNull="false" comment="The allowed tolerance (+/-) in the required time between occurrences, the interpretation of which is dependent on the separationType.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="LocationRepetition" comment="E6: A sub-type of Repetition based on Position.  Separate concrete sub-types provide for repetitions based on generic position and orbital position.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Repetition"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="PositionRepetition" shortFormPart="57" comment="E6: ">
        <mal:extends>
          <mal:type area="MPS" list="false" name="LocationRepetition"/>
        </mal:extends>
        <mal:field name="initialPosition" canBeNull="false" comment="Nominal position of first occurrence.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="repetitionDirection" canBeNull="false" comment="Direction of repetition.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="separation" canBeNull="false" comment="The required Distance between occurrences.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="tolerance" canBeNull="false" comment="The allowed tolerance (+/-) in the required distance between occurrences, the interpretation of which is dependent on the separationType.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="The units used for separation and tolerance, as defined in reference [D6] annex D.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="OrbitRepetition" shortFormPart="58" comment="E6: A sub-type of Repetition based on the orbital cycle.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="LocationRepetition"/>
        </mal:extends>
        <mal:field name="orbitNumber" canBeNull="false" comment="Orbit number for the first occurrence.  Depending on the relativeOrbit flag, the orbit number may be absolute (since start of mission) or relative (to the orbital repeat cycle).">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="relativeOrbit" canBeNull="false" comment="Flag indicating if the orbit number is absolute or relative to the orbital repeat cycle.">
          <mal:type area="MAL" list="false" name="Boolean"/>
        </mal:field>
        <mal:field name="orbitSeparation" canBeNull="false" comment="The required number of orbits separation between occurrences.  If orbitNumber is Relative and the required repetition is once per repeat cycle, this is the number of orbits in the repeat cycle, but the value 0 may also be used.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="angleSeparation" canBeNull="false" comment="The required angular separation between occurrences.  This allows for multiple repetitions within an orbit.  The value 0 indicates only one occurrence within the orbit.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="orbitAngle" canBeNull="false" comment="The required position of the first occurrence within the orbit expressed as an angle.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="tolerance" canBeNull="false" comment="The allowed tolerance (+/-) in the required orbital angle.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="The units used for orbitAngle, angularSeparation, and tolerance, as defined in reference [D6] annex D.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="PointingRepetition" comment="E6: A sub-type of Repetition based on Pointing.  Concrete sub-types provide for repetition based on direction and revolutions.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Repetition"/>
        </mal:extends>
      </mal:composite>

      <mal:composite name="DirectionRepetition" shortFormPart="59" comment="E6: A sub-type of Repetition based on direction, which supports the specification of astronomical surveys.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="PointingRepetition"/>
        </mal:extends>
        <mal:field name="initialDirection" canBeNull="false" comment="Nominal direction of first occurrence.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="targetDirection" canBeNull="false" comment="Specifies the direction of repetition as line connecting the initial and target directions.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="separation" canBeNull="false" comment="The required angle between occurrences.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="tolerance" canBeNull="false" comment="The allowed tolerance (+/-) in the required angle between occurrences, the interpretation of which is dependent on the separationType.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="The units used for separation and tolerance, as defined in reference [D6] annex D.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="RevolutionRepetition" shortFormPart="60" comment="E6: A sub-type of Repetition based on the revolutions of a rotating spacecraft or instrument.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="PointingRepetition"/>
        </mal:extends>
        <mal:field name="revsSeparation" canBeNull="false" comment="The required number of revolutions between occurrences.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="revsTolerance" canBeNull="false" comment="The allowed tolerance (+/-) in the required number of revolutions between occurrences, the interpretation of which is dependent on the separationType.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="revAngle" canBeNull="true" comment="Specifies the angle within a revolution.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="The units used for revAngle, as defined in reference [D6] annex D.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="AngleRepetition" shortFormPart="61" comment="E6: A sub-type of Repetition based on the angle subtended between three physical objects.  The repetition angle is that subtended at the central object by target objects 1 and 2.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Repetition"/>
        </mal:extends>
        <mal:field name="centreObject" canBeNull="false" comment="Position of the central object.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="targetObject1" canBeNull="false" comment="Position of target object 1.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="targetObject2" canBeNull="false" comment="Position of target object 2.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="initialAngle" canBeNull="false" comment="Initial angle subtended at the central object by target objects 1 and 2.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="separation" canBeNull="false" comment="The required angle between occurrences.
If this is zero, this implies that repetition is between multiple occurrences of the initialAngle.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="tolerance" canBeNull="false" comment="The allowed tolerance (+/-) in the required angle between occurrences, the interpretation of which is dependent on the separationType.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="units" canBeNull="true" comment="The units used for separation and tolerance, as defined in reference [D6] annex D.">
          <mal:type area="MAL" list="false" name="String"/>
        </mal:field>
      </mal:composite>

      <mal:composite name="EventRepetition" shortFormPart="62" comment="E1: A sub-type of Repetition based on planning events.">
        <mal:extends>
          <mal:type area="MPS" list="false" name="Repetition"/>
        </mal:extends>
        <mal:field name="eventRef" canBeNull="false" comment="Object Type: EventDefinition.
Reference to an EventDefinition (type of event)">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="separation" canBeNull="false" comment="Number of occurrences of the planning event required between occurrences of the planning activity.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
        <mal:field name="tolerance" canBeNull="false" comment="The allowed tolerance (+/-) in the number of occurrences of the planning event between occurrences of the planning activity, the interpretation of which is dependent on the separationType.">
          <mal:type area="MPS" list="false" name="Expression"/>
        </mal:field>
      </mal:composite>

      <mal:enumeration name="ActivityStatusEnum" shortFormPart="103" comment="E1: The following states are defined for ActivityStatus:">
        <mal:item nvalue="1" value="PLANNED" comment="The Activity Instance has been included in the Plan"/>
        <mal:item nvalue="2" value="ACTIVATED" comment="The Plan including the Activity Instance has been Activated within the plan execution function."/>
        <mal:item nvalue="3" value="EXECUTING" comment="Execution of the Activity Instance has been initiated"/>
        <mal:item nvalue="4" value="SUSPENDED" comment="Execution of the Activity Instance has been suspended"/>
        <mal:item nvalue="5" value="TERMINATED" comment="Execution of the Activity Instance has been terminated (further information is provided in statusInfo)"/>
      </mal:enumeration>

      <mal:enumeration name="PredictabilityEnum" shortFormPart="203" comment="E1: ">
        <mal:item nvalue="1" value="PREDICTED" comment="Events that are predictable either by time or position can have specific instances included in a Plan."/>
        <mal:item nvalue="2" value="POTENTIAL" comment="Potential events are those that may occur during the execution of a Plan, but the specific time or position is not predicted."/>
      </mal:enumeration>

      <mal:enumeration name="EventStatusEnum" shortFormPart="204" comment="E1: The following states are defined for EventStatus:">
        <mal:item nvalue="1" value="GROUP" comment="The EventInstance is a group event"/>
        <mal:item nvalue="2" value="PLANNED" comment="The EventInstance has been included in the Plan "/>
        <mal:item nvalue="3" value="ACTIVATED" comment="The Plan including the EventInstance has been Activated within the plan execution function."/>
        <mal:item nvalue="4" value="TERMINATED" comment="The EventInstance has reached a terminal status (further information is provided in statusInfo)"/>
      </mal:enumeration>

      <mal:enumeration name="InterpolationTypeEnum" shortFormPart="305" comment="E4: The following InterpolationTypes are defined:">
        <mal:item nvalue="1" value="STEP" comment="No interpolation:  resource values remain unchanged between defined points."/>
        <mal:item nvalue="2" value="LINEAR" comment="Linear interpolation: resource values follow a straight line between defined points."/>
        <mal:item nvalue="3" value="POLYNOMIAL" comment="Polynomial interpolation:  resource values follow a curve fitting the defined points."/>
      </mal:enumeration>

      <mal:enumeration name="RequestStatusEnum" shortFormPart="403" comment="E1: The following states are defined for RequestStatus:">
        <mal:item nvalue="1" value="REQUESTED" comment="The planning request has been submitted to the planning function"/>
        <mal:item nvalue="2" value="ACCEPTED" comment="The planning request has been accepted by the planning function"/>
        <mal:item nvalue="3" value="REJECTED" comment="The planning request has been rejected by the planning function"/>
        <mal:item nvalue="4" value="CANCELLED" comment="The planning request has been cancelled by the user"/>
        <mal:item nvalue="5" value="PLANNED" comment="The planning request has been incorporated into a Plan (see outputPlanRef)"/>
        <mal:item nvalue="6" value="PROCESSING" comment="The corresponding Plan has been activated within plan execution"/>
        <mal:item nvalue="7" value="PROCESSED" comment="Execution of the all constituent activities of the planning request have terminated.  Awaiting confirmation of the status of the planning request. "/>
        <mal:item nvalue="8" value="TERMINATED" comment="The planning request has completed, either successfully or with a failure condition (further information is provided in statusInfo)"/>
      </mal:enumeration>

      <mal:enumeration name="RevisionStatusEnum" shortFormPart="507" comment="E3: ">
        <mal:item nvalue="1" value="NEW" comment="The item is new in this revision of the Plan."/>
        <mal:item nvalue="2" value="MODIFIED" comment="The item has been modified in this revision of the Plan."/>
        <mal:item nvalue="3" value="DELETED" comment="The item has been deleted in this revision of the Plan."/>
        <mal:item nvalue="4" value="UNDEFINED" comment="The item is unchanged in this revision of the Plan, or its revision status is undefined."/>
      </mal:enumeration>

      <mal:enumeration name="PlanStatusEnum" shortFormPart="509" comment="E1: The following states are defined for PlanStatus:">
        <mal:item nvalue="1" value="DRAFT" comment="The Plan has been saved by the planning function"/>
        <mal:item nvalue="2" value="RELEASED" comment="The Plan has been released for operational use by the planning function"/>
        <mal:item nvalue="3" value="SUBMITTED" comment="The Plan has been submitted to the plan execution function and is available for use, but will not execute until activated."/>
        <mal:item nvalue="4" value="ACTIVATED" comment="The Plan has been activated by the plan execution function"/>
        <mal:item nvalue="5" value="TERMINATED" comment="The Plan has reached a terminal state, as detailed in the statusInfo.  This includes the following cases:
- Completed (nominal)
- Superseded by a successor Plan
- Revoked by a User
- Cancelled (deactivated after start of execution)
- Expired (reached the end of its validity period without being activated)"/>
      </mal:enumeration>

      <mal:enumeration name="SubPlanStatusEnum" shortFormPart="514" comment="E1: ">
        <mal:item nvalue="1" value="ACTIVATED" comment="The sub-plan is active."/>
        <mal:item nvalue="2" value="DEACTIVATED" comment="The sub-plan is not active."/>
      </mal:enumeration>

      <mal:enumeration name="ArgTypeEnum" shortFormPart="1" comment="E1: ArgTypeEnum is an MPS extension of the MAL::AttributeType enum that also allows specification of the data type as Position or Direction.">
        <mal:item nvalue="1" value="BLOB" comment="Binary object"/>
        <mal:item nvalue="2" value="BOOLEAN" comment="Boolean value (True or False)"/>
        <mal:item nvalue="3" value="DURATION" comment="Length of time in seconds"/>
        <mal:item nvalue="4" value="FLOAT" comment="Floating point number (32 bits)"/>
        <mal:item nvalue="5" value="DOUBLE" comment="Double precision floating point number (64 bits)"/>
        <mal:item nvalue="6" value="IDENTIFIER" comment="The Identifier structure is used to store an identifier and can be used for indexing.  It is a variable-length, unbounded, Unicode string."/>
        <mal:item nvalue="7" value="OCTET" comment="Signed 8 bit Integer"/>
        <mal:item nvalue="8" value="UOCTET" comment="Unsigned 8 bit Integer"/>
        <mal:item nvalue="9" value="SHORT" comment="Signed 16 bit Integer"/>
        <mal:item nvalue="10" value="USHORT" comment="Unsigned 16 bit Integer"/>
        <mal:item nvalue="11" value="INTEGER" comment="Signed 32 bit Integer"/>
        <mal:item nvalue="12" value="UINTEGER" comment="Unsigned 32 bit Integer"/>
        <mal:item nvalue="13" value="LONG" comment="Signed 64 bit Integer"/>
        <mal:item nvalue="14" value="ULONG" comment="Unsigned 64 bit Integer"/>
        <mal:item nvalue="15" value="STRING" comment="Text.  It is a variable length, unbounded, Unicode string."/>
        <mal:item nvalue="16" value="TIME" comment="Absolute date-time to millisecond resolution."/>
        <mal:item nvalue="17" value="FINETIME" comment="Absolute date-time to picosecond resolution."/>
        <mal:item nvalue="18" value="URI" comment="Uniform Resource Identifier (address).  It is a variable-length, unbounded Unicode string."/>
        <mal:item nvalue="19" value="OBJECTREF" comment="Object Reference"/>
        <mal:item nvalue="129" value="DIRECTION" comment="MPS Direction"/>
        <mal:item nvalue="130" value="POSITION" comment="MPS Position"/>
      </mal:enumeration>

      <mal:enumeration name="LogicOpEnum" shortFormPart="30" comment="E1: ">
        <mal:item nvalue="1" value="AND" comment="Logical AND"/>
        <mal:item nvalue="2" value="OR" comment="Logical OR"/>
      </mal:enumeration>

      <mal:enumeration name="ExpressionOperatorEnum" shortFormPart="38" comment="E5: ">
        <mal:item nvalue="1" value="EQUAL" comment="="/>
        <mal:item nvalue="2" value="DIFFER" comment="!="/>
        <mal:item nvalue="3" value="GREATER" comment="&gt;"/>
        <mal:item nvalue="4" value="GREATER_OR_EQUAL" comment="&gt;="/>
        <mal:item nvalue="5" value="LESS" comment="&lt;"/>
        <mal:item nvalue="6" value="LESS_OR_EQUAL" comment="&lt;="/>
        <mal:item nvalue="7" value="CONTAINS" comment="Case sensitive containment (Strings only)"/>
        <mal:item nvalue="8" value="ICONTAINS" comment="Case insensitive containment (Strings only)"/>
      </mal:enumeration>

      <mal:enumeration name="EffectOperationEnum" shortFormPart="48" comment="E5: ">
        <mal:item nvalue="1" value="SET" comment="Set to specified value"/>
        <mal:item nvalue="2" value="INCREMENT" comment="Increment by specified value"/>
        <mal:item nvalue="3" value="DECREMENT" comment="Decrement by specified value"/>
      </mal:enumeration>

      <mal:enumeration name="SeparationTypeEnum" shortFormPart="55" comment="E1: ">
        <mal:item nvalue="1" value="RELATIVE" comment="Tolerance on separation is only considered between any two occurrences"/>
        <mal:item nvalue="2" value="ABSOLUTE" comment="Tolerance on separation applies to a multiple of the separation from the initial occurrence."/>
      </mal:enumeration>

      <mal:enumeration name="SecondaryErrorCodeEnum" shortFormPart="63" comment="E1: For the INVALID error, the secondary error code is defined as a UInteger that allows for deployment specific extensibility.  The following standard secondary error codes are defined:">
        <mal:item nvalue="0" value="UNKNOWN" comment="Referenced MO object is not available to the service provider."/>
        <mal:item nvalue="1" value="UNDEFINED" comment="Undefined value for enumeration field."/>
        <mal:item nvalue="2" value="OUT_OF_RANGE" comment="A numeric value is outside the supported range."/>
        <mal:item nvalue="3" value="UNRECOGNIZED" comment="Value of type MAL::Identifier or MAL::String (referencing a named item) does not correspond to a known item."/>
        <mal:item nvalue="4" value="BAD_TIME" comment="A date-time value is outside the supported time period."/>
        <mal:item nvalue="5" value="BAD_POSITION" comment="A position value is outside the supported position range."/>
        <mal:item nvalue="6" value="BAD_DIRECTION" comment="A direction value is outside the supported direction range."/>
        <mal:item nvalue="7" value="INCONSISTENT" comment="A value is inconsistent with that of another field within the message.  This indicates violation of a constraint rule."/>
      </mal:enumeration>

    </mal:dataTypes>

    <mal:errors>
        <mal:error number="1" name="INVALID" comment="One or more fields in the message contain invalid values."/>
        <mal:error number="2" name="CANCEL_FAILED" comment="The cancelRequest operation failed to cancel the referenced RequestInstance."/>
        <mal:error number="3" name="UPDATE_FAILED" comment="The update operation (to Request, PlanStatus, Activity, Event or Resource) failed to update the referenced object."/>
        <mal:error number="4" name="REVOKE_FAILED" comment="The revokePlan operation failed to revoke the referenced Plan, for example because it has already started executing."/>
        <mal:error number="5" name="INSERT_FAILED" comment="The insertActivity or insertEvent operation failed to insert the requested object."/>
        <mal:error number="6" name="DELETE_FAILED" comment="The deleteActivity or deleteEvent operation failed to delete the requested object."/>
        <mal:error number="7" name="ACTIVATE_FAILED" comment="The activatePlan operation failed as the activation was outside the validity period of the Plan, or the start of the planPeriod had already passed.  "/>
        <mal:error number="8" name="UNSUPPORTED" comment="An optional data structure used in the message is not supported by the service provider."/>
        <mal:error number="9" name="ACTIVATE_SUBPLAN_FAILED" comment="The activateSubPlan operation failed."/>
        <mal:error number="10" name="DEACTIVATE_SUBPLAN_FAILED" comment="The deactivateSubPlan operation failed."/>
    </mal:errors>

  </mal:area>
</mal:specification>

