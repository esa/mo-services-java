<?xml version="1.0" encoding="UTF-8"?>
<mal:specification xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns:mal="http://www.ccsds.org/schema/ServiceSchema">
    <mal:area name="MALPrototype" number="100" version="1"
              comment="The MALPrototype area defines data types, services and operations used to test the proper implementation of the MAL requirements.">
        <mal:service name="IPTest" number="1"
        			 comment="This service aims at testing each Interaction Pattern (IP). It provides one operation for Send, Submit, Request, Invoke and Progress. The input parameter is an IPTestDefinition that contains:

- The parameters used by the consumer in order to initiate the interaction. These parameters enable the provider to check whether the received message header is correct or not.

- A list of interaction transitions expected by the consumer.

An operation 'getResult' is provided in order to enable the consumer to get:

- the interaction transaction identifier

- and the assertions evaluated on the provider side during an interaction.

Finally four operations 'monitor', 'publishUpdates' and 'publishError' are provided in order to test the Pub/Sub interaction.">
            <mal:capabilitySet number="100">
                <mal:sendIP name="send" number="100" supportInReplay="false"
                            comment="This operation cleans the assertions table and check that the header of the received message is the same as the one expected (see 4.1.1).">
                    <mal:messages>
                        <mal:send>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                        </mal:send>
                    </mal:messages>

                </mal:sendIP>
                <mal:submitIP name="testSubmit" number="101"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table and checks that the header of the received message is the same as the one expected (see 4.1.1). Moreover it triggers the transitions specified by the IPTestDefinition (see 3.1.1.1).">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Fake error for testing.">
                            <mal:type area="MALPrototype" name="TEST_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:submitIP>
                <mal:requestIP name="request" number="102"
                               supportInReplay="false"
                               comment="This operation cleans the assertions table and checks that the header of the received message is the same as the one expected (see 4.1.1). Moreover it triggers the transitions specified by the IPTestDefinition (see 3.1.1.1).">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Fake error for testing.">
                            <mal:type area="MALPrototype" name="TEST_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:invokeIP name="invoke" number="103"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table and checks that the header of the received message is the same as the one expected (see 4.1.1). Moreover it triggers the transitions specified by the IPTestDefinition (see 3.1.1.1).">
                    <mal:messages>
                        <mal:invoke>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                        </mal:invoke>
                        <mal:acknowledgement>
                            <mal:field name="ack" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                        </mal:acknowledgement>
                        <mal:response>
                            <mal:field name="output" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Fake error for testing.">
                            <mal:type area="MALPrototype" name="TEST_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:invokeIP>
                <mal:progressIP name="progress" number="104"
                                supportInReplay="false"
                                comment="This operation cleans the assertions table and checks that the header of the received message is the same as the one expected (see 4.1.1). Moreover it triggers the transitions specified by the IPTestDefinition (see 3.1.1.1).">
                    <mal:messages>
                        <mal:progress>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                        </mal:progress>
                        <mal:acknowledgement>
                            <mal:field name="ack" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                        </mal:acknowledgement>
                        <mal:update>
                            <mal:field name="update" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Integer" />
                            </mal:field>
                        </mal:update>
                        <mal:response>
                            <mal:field name="response" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Fake error for testing.">
                            <mal:type area="MALPrototype" name="TEST_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:progressIP>
                <mal:pubsubIP name="monitor" number="105"
                              supportInReplay="false"
                              comment="This operation initiates a Pub/Sub interaction. It is not implemented by the service provider but by a broker.">
                    <mal:messages>
                        <mal:publishNotify>
                            <mal:field name="pubField" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestUpdate" />
                            </mal:field>
                        </mal:publishNotify>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef
                            comment="One or more of the entities identified in the registration do not exist.">
                            <mal:type area="MAL" name="UNKNOWN" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:pubsubIP>
            </mal:capabilitySet>
            <mal:capabilitySet number="101">
                <mal:requestIP name="getResult" number="106"
                               supportInReplay="false" comment="This operation returns an IPTestResult.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestResult" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
            </mal:capabilitySet>
            <mal:capabilitySet number="102">
                <mal:submitIP name="publishUpdates" number="108"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table, publishes an update as specified by the parameter TestPublishUpdate and checks the header of the Publish message (see 4.1.3). Moreover if an error is expected by the TestPublishUpdate then the operation hangs until a Publish error is raised or a timer ends (see 4.1.10). The header of the Publish error message is checked (see 4.1.4).">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestPublishUpdate" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>
                </mal:submitIP>
                <mal:submitIP name="publishRegister" number="110"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table, registers a publisher as specified by the parameter TestPublishRegister and checks the header of the Publish Register message (see 4.1.5). Moreover if no error is expected by the TestPublishRegister, it checks the header of the Publish Register acknowledgement message (see 4.1.6). Otherwise it checks the header of the Publish Register error message (see 4.1.7).">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestPublishRegister" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>

                </mal:submitIP>
                <mal:submitIP name="publishDeregister" number="111"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table, registers a publisher as specified by the parameter TestPublishDeregister and checks the header of the Publish Deregister message (see 4.1.5). Moreover if no error is expected by the TestPublishDeregister, it checks the header of the Publish Deregister acknowledgement message (see 4.1.8). Otherwise it checks the header of the Publish Deregister error message (see 4.1.9).">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestPublishDeregister" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>

                </mal:submitIP>
                <mal:submitIP name="testMultipleNotify" number="112"
                              supportInReplay="false" comment="">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestPublishUpdate" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>
                </mal:submitIP>
            </mal:capabilitySet>
            <mal:capabilitySet number="103">
                <mal:sendIP name="sendMulti" number="113" supportInReplay="false"
                            comment="This operation duplicates the send operation with an additional IN parameter.">
                    <mal:messages>
                        <mal:send>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                            <mal:field name="input2" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:send>
                    </mal:messages>

                </mal:sendIP>
                <mal:submitIP name="submitMulti" number="114"
                              supportInReplay="false"
                              comment="This operation duplicates the testSubmit operation with an additional IN parameter.">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                            <mal:field name="input2" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Fake error for testing.">
                            <mal:type area="MALPrototype" name="TEST_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:submitIP>
                <mal:requestIP name="requestMulti" number="115"
                               supportInReplay="false"
                               comment="This operation duplicates the request operation with an additional IN parameter.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                            <mal:field name="input2" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                            <mal:field name="output2" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Fake error for testing.">
                            <mal:type area="MALPrototype" name="TEST_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:invokeIP name="invokeMulti" number="116"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table and checks that the header of the received message is the same as the one expected (see 4.1.1). Moreover it triggers the transitions specified by the IPTestDefinition (see 4.1.2).">
                    <mal:messages>
                        <mal:invoke>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                            <mal:field name="input2" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:invoke>
                        <mal:acknowledgement>
                            <mal:field name="ack1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                            <mal:field name="ack2" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:acknowledgement>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                            <mal:field name="output2" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Fake error for testing.">
                            <mal:type area="MALPrototype" name="TEST_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:invokeIP>
                <mal:progressIP name="progressMulti" number="117"
                                supportInReplay="false"
                                comment="This operation duplicates the progress operation with an additional IN parameter.">
                    <mal:messages>
                        <mal:progress>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                            <mal:field name="input2" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:progress>
                        <mal:acknowledgement>
                            <mal:field name="ack1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                            <mal:field name="ack2" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:acknowledgement>
                        <mal:update>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Integer" />
                            </mal:field>
                            <mal:field name="output2" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:update>
                        <mal:response>
                            <mal:field name="output3" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                            <mal:field name="output4" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Fake error for testing.">
                            <mal:type area="MALPrototype" name="TEST_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:progressIP>
                <mal:pubsubIP name="monitorMulti" number="118"
                              supportInReplay="false"
                              comment="This operation duplicates the monitor operation with an additional IN parameter.">
                    <mal:messages>
                        <mal:publishNotify>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestUpdate" />
                            </mal:field>
                            <mal:field name="output2" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:publishNotify>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef
                            comment="One or more of the entities identified in the registration do not exist.">
                            <mal:type area="MAL" name="UNKNOWN" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:pubsubIP>
            </mal:capabilitySet>
            <mal:capabilitySet number="104">
                <mal:requestIP name="testRequestEmptyBody" number="120"
                               supportInReplay="false"
                               comment="This operation checks that an empty body can be sent and received explicitly for a request pattern">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                        </mal:response>
                    </mal:messages>
                </mal:requestIP>
                <mal:invokeIP name="testInvokeEmptyBody" number="121"
                              supportInReplay="false"
                              comment="This operation checks that an empty body can be sent and received explicitly for an Invoke pattern">
                    <mal:messages>
                        <mal:invoke>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                        </mal:invoke>
                        <mal:acknowledgement>
                        </mal:acknowledgement>
                        <mal:response>
                        </mal:response>
                    </mal:messages>
                </mal:invokeIP>
                <mal:progressIP name="testProgressEmptyBody" number="122"
                                supportInReplay="false"
                                comment="This operation checks that an empty body can be sent and received explicitly for a Progress pattern">
                    <mal:messages>
                        <mal:progress>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="IPTestDefinition" />
                            </mal:field>
                        </mal:progress>
                        <mal:acknowledgement>
                        </mal:acknowledgement>
                        <mal:update>
                        </mal:update>
                        <mal:response>
                        </mal:response>
                    </mal:messages>
                </mal:progressIP>
            </mal:capabilitySet>

        </mal:service>
        <mal:service name="DataTest" number="2"
                     comment="This service aims at testing the data structures.
                     
It provides an operation 'testData' that enables to transmit any Element to the provider and check that it is well interpreted by the provider.">
            <mal:capabilitySet number="100">
                <mal:submitIP name="setTestDataOffset" number="99"
                              supportInReplay="false"
                              comment="This operation sets the index into the test list for the testData operation. Passing non positive values resets it to the start of the list.">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Integer" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>
                </mal:submitIP>
                <mal:requestIP name="testData" number="100"
                               supportInReplay="false"
                               comment="The 'testData' operation allows a consumer to check that a data is correctly decoded on the provider side, then that the same data sent back by the provider is correctly decoded on the consumer side. The provider needs to statically know the list of data that the consumer is going to send. The consumer selects the data in the same order as the list and calls the operation 'testData'. The provider keeps the index of the currently selected data from the static list. When the operation 'testData' is called, the provider checks that the received data is equal to the selected data from the list. If the equality test fails, then the error DATA_ERROR is raised, otherwise the provider returns the decoded data. When the consumer receives the returned data, it checks that this data is equal to the original data it sent.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataBlob" number="101"
                               supportInReplay="false"
                               comment="This operation checks that a basic Blob type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Blob" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Blob" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataBoolean" number="102"
                               supportInReplay="false"
                               comment="This operation checks that a basic Boolean type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Boolean" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Boolean" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataDouble" number="103"
                               supportInReplay="false"
                               comment="This operation checks that a basic Double type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Double" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Double" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataDuration" number="104"
                               supportInReplay="false"
                               comment="This operation checks that a basic Duration type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Duration" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Duration" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataFineTime" number="105"
                               supportInReplay="false"
                               comment="This operation checks that a basic FineTime type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="FineTime" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="FineTime" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataFloat" number="106"
                               supportInReplay="false"
                               comment="This operation checks that a basic Float type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Float" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Float" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataIdentifier" number="107"
                               supportInReplay="false"
                               comment="This operation checks that a basic Identifier type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Identifier" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Identifier" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataInteger" number="108"
                               supportInReplay="false"
                               comment="This operation checks that a basic Integer type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Integer" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Integer" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataLong" number="109"
                               supportInReplay="false"
                               comment="This operation checks that a basic Long type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Long" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Long" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataOctet" number="110"
                               supportInReplay="false"
                               comment="This operation checks that a basic Octet type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Octet" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Octet" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataShort" number="111"
                               supportInReplay="false"
                               comment="This operation checks that a basic Short type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Short" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Short" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataString" number="112"
                               supportInReplay="false"
                               comment="This operation checks that a basic String type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataTime" number="113"
                               supportInReplay="false"
                               comment="This operation checks that a basic Time type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Time" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Time" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataURI" number="114"
                               supportInReplay="false"
                               comment="This operation checks that a basic URI type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="URI" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="URI" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataComposite" number="115"
                               supportInReplay="false"
                               comment="This operation checks that a composite type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="Assertion" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="Assertion" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataEnumeration" number="116"
                               supportInReplay="false"
                               comment="This operation checks that a enumeration type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="SessionType" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="SessionType" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataList" number="117"
                               supportInReplay="false"
                               comment="This operation checks that a list type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type list="true" area="MALPrototype" name="Assertion" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type list="true" area="MALPrototype" name="Assertion" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataUInteger" number="118"
                               supportInReplay="false"
                               comment="This operation checks that a basic UInteger type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="UInteger" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="UInteger" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataULong" number="119"
                               supportInReplay="false"
                               comment="This operation checks that a basic ULong type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="ULong" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="ULong" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataUOctet" number="120"
                               supportInReplay="false"
                               comment="This operation checks that a basic UOctet type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="UOctet" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="UOctet" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataUShort" number="121"
                               supportInReplay="false"
                               comment="This operation checks that a basic UShort type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="UShort" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="UShort" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testExplicitMultiReturn" number="122"
                               supportInReplay="false"
                               comment="This operation checks that multiple types can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name = "in1" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UOctet" />
                           	</mal:field>
                            <mal:field name = "in2" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UShort" />
                           	</mal:field>
                            <mal:field name = "in3" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UInteger" />
                           	</mal:field>
                            <mal:field name = "in4" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="ULong" />
                           	</mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name = "out1" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UOctet" />
                           	</mal:field>
                            <mal:field name = "out2" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UShort" />
                           	</mal:field>
                            <mal:field name = "out3" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UInteger" />
                           	</mal:field>
                            <mal:field name = "out4" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="ULong" />
                           	</mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testAbstractMultiReturn" number="123"
                               supportInReplay="false"
                               comment="This operation checks that multiple types with a final abstract type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name = "in1" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UOctet" />
                           	</mal:field>
                            <mal:field name = "in2" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UShort" />
                           	</mal:field>
                            <mal:field name = "in3" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UInteger" />
                           	</mal:field>
                            <mal:field name = "in4" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="Element" />
                           	</mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name = "out1" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UOctet" />
                           	</mal:field>
                            <mal:field name = "out2" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UShort" />
                           	</mal:field>
                            <mal:field name = "out3" canBeNull ="false" comment = "">
                            	<mal:type area="MAL" name="UInteger" />
                           	</mal:field>
                            <mal:field name = "out4" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="Element" />
                           	</mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testEmptyBody" number="124"
                               supportInReplay="false"
                               comment="This operation checks that an empty body can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                        </mal:request>
                        <mal:response>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testMalAttribute" number="125"
                               supportInReplay="false"
                               comment="This operation checks that a MAL::Attribute can be sent and received as an abstract Attribute">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Attribute" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Attribute" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testMalComposite" number="126"
                               supportInReplay="false"
                               comment="This operation checks that a Composite can be sent and received as a MAL Composite. It is no longer used in the testbed.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Composite" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Composite" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testAbstractComposite" number="127"
                               supportInReplay="false"
                               comment="This operation checks that a Composite can be sent and received as an abstract Composite. It is no longer used in the testbed.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestPublish" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestPublish" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testMalAttributeList" number="128"
                               supportInReplay="false"
                               comment="This operation checks that a list of MAL::Attribute can be sent and received explicitly. It is no longer used in the testbed.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="Attribute" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="Attribute" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testMalElementList" number="129"
                               supportInReplay="false"
                               comment="This operation checks that a list of MAL::Element can be sent and received explicitly. It is no longer used in the testbed.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testMalCompositeList" number="130"
                               supportInReplay="false"
                               comment="This operation checks that a list of MAL::Composite can be sent and received explicitly. It is no longer used in the testbed.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="Composite" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="Composite" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testAbstractCompositeList" number="131"
                               supportInReplay="false"
                               comment="This operation checks that a list of abstract composite can be sent and received explicitly. It is no longer used in the testbed.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type list="true" area="MALPrototype" name="TestPublish" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type list="true" area="MALPrototype" name="TestPublish" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testDataObjectRef" number="132"
                               supportInReplay="false"
                               comment="This operation checks that a basic ObjectRef type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="ObjectRef(Auto)" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="ObjectRef(Auto)" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype" name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testInnerAbstractMultiReturn" number="133"
                               supportInReplay="false"
                               comment="This operation checks that multiple types with a not final abstract type can be sent and received explicitly">
                    <mal:messages>
                        <mal:request>
                            <mal:field name = "in1" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="UOctet" />
                           	</mal:field>
                            <mal:field name = "in2" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="Element" />
                           	</mal:field>
                            <mal:field name = "in3" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="Element" />
                           	</mal:field>
                            <mal:field name = "in4" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="UInteger" />
                           	</mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name = "out1" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="UOctet" />
                           	</mal:field>
                            <mal:field name = "out2" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="Element" />
                           	</mal:field>
                            <mal:field name = "out3" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="Element" />
                           	</mal:field>
                            <mal:field name = "out4" canBeNull ="true" comment = "">
                            	<mal:type area="MAL" name="UInteger" />
                           	</mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testPolymorphicAbstractCompositeList" number="134"
                               supportInReplay="false"
                               comment="This operation checks that various concrete values can be sent and received explicitly as a list of abstract composite">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type list="true" area="MALPrototype" name="AbstractComposite" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type list="true" area="MALPrototype" name="AbstractComposite" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testPolymorphicMalCompositeList" number="135"
                               supportInReplay="false"
                               comment="This operation checks that various concrete values can be sent and received explicitly as a list of MAL Composite">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="Composite" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="Composite" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testPolymorphicMalElementList" number="136"
                               supportInReplay="false"
                               comment="This operation checks that various concrete values can be sent and received explicitly as a list of MAL Element">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input1" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="testPolymorphicObjectRefTypes" number="137"
                               supportInReplay="false"
                               comment="This operation checks the ObjectRef(T) polymorphism in operation type signature and in composite fields">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="garage" comment="">
                                <mal:type area="MALPrototype" name="Garage" />
                            </mal:field>
                            <mal:field name="porsches" comment="">
                                <mal:type list="true" area="MALPrototype" name="ObjectRef(Porsche)" />
                            </mal:field>
                            <mal:field name="autos" comment="">
                                <mal:type list="true" area="MALPrototype" name="ObjectRef(Auto)" />
                            </mal:field>
                            <mal:field name="elements" comment="">
                                <mal:type list="true" area="MAL" name="ObjectRef(Element)" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output1" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="Garage" />
                            </mal:field>
                            <mal:field name="output2" canBeNull="true" comment="">
                                <mal:type list="true" area="MALPrototype" name="ObjectRef(Porsche)" />
                            </mal:field>
                            <mal:field name="output3" canBeNull="true" comment="">
                                <mal:type list="true" area="MALPrototype" name="ObjectRef(Auto)" />
                            </mal:field>
                            <mal:field name="output4" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="ObjectRef(Element)" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
            </mal:capabilitySet>
            <mal:capabilitySet number="200">
                <mal:requestIP name="createObject" number="201"
                               supportInReplay="false"
                               comment="This operation creates a new MO Object from a full value">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MALPrototype" name="Auto" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MALPrototype" name="ObjectRef(Auto)" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="TEST_OBJECT_EXISTS" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:requestIP name="createObjectFromFields" number="202"
                               supportInReplay="false"
                               comment="This operation creates a new MO Object from fields values">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="autoType" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Long" comment="autoType" />
                            </mal:field>
                            <mal:field name="key" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Identifier" comment="key" />
                            </mal:field>
                            <mal:field name="update" canBeNull="true" comment="">
                                <mal:type area="MAL" name="Boolean" comment="update" />
                            </mal:field>
                            <mal:field name="engine" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" comment="engine" />
                            </mal:field>
                            <mal:field name="chassis" canBeNull="true" comment="">
                                <mal:type area="MAL" name="String" comment="chassis" />
                            </mal:field>
                            <mal:field name="windows" canBeNull="true" comment="">
                                <mal:type list="true" area="MAL" name="String" comment="windows" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="ObjectRef(Auto)" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="TEST_OBJECT_EXISTS" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
                <mal:submitIP name="deleteObject" number="203"
                              supportInReplay="false"
                              comment="This operation deletes an MO Object">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" comment="">
                                <mal:type area="MALPrototype" name="ObjectRef(Auto)" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:submitIP>
                <mal:requestIP name="getObject" number="204"
                               supportInReplay="false"
                               comment="This operation gets an MO Object value from its reference">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MALPrototype" name="ObjectRef(Auto)" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MALPrototype" name="Auto" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="Data interoperability error">
                            <mal:type area="MALPrototype"
                                      name="DATA_ERROR" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:requestIP>
            </mal:capabilitySet>
        </mal:service>
        <mal:service name="ErrorTest" number="3"
                     comment="This service aims at testing the MAL errors. It doesn't need to be implemented as it is only used on the consumer side to make the transport layer raise errors (see section 3.3).">
            <mal:capabilitySet number="100">
                <mal:requestIP name="testDeliveryFailed" number="100"
                               supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>
                </mal:requestIP>
                <mal:requestIP name="testDeliveryTimedout" number="101"
                               supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testDeliveryDelayed" number="102"
                               supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testDestinationUnknown"
                               number="103" supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testDestinationTransient"
                               number="104" supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testDestinationLost" number="105"
                               supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testEncryptionFail" number="106"
                               supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testUnsupportedArea" number="107"
                               supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testUnsupportedOperation"
                               number="108" supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testUnsupportedAreaVersion"
                               number="109" supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testBadEncoding" number="110"
                               supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testUnknown" number="111"
                               supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testAuthenticationFailure"
                               number="112" supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the MAL layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testAuthorizationFailure"
                               number="113" supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the MAL layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
                <mal:requestIP name="testUnsupportedService"
                               number="114" supportInReplay="false"
                               comment="This operation does nothing. Actually the error is raised by the transport layer before the provider is invoked.">
                    <mal:messages>
                        <mal:request>
                            <mal:field name="input" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:request>
                        <mal:response>
                            <mal:field name="output" comment="">
                                <mal:type area="MAL" name="Element" />
                            </mal:field>
                        </mal:response>
                    </mal:messages>

                </mal:requestIP>
            </mal:capabilitySet>

        </mal:service>
        <mal:service name="IPTest2" number="4">
            <mal:capabilitySet number="100">
                <mal:pubsubIP name="monitor" number="105"
                              supportInReplay="false"
                              comment="This operation initiates a Pub/Sub interaction. It is not implemented by the service provider but by a broker.">
                    <mal:messages>
                        <mal:publishNotify>
                            <mal:field name="pub" comment="">
                                <mal:type area="MALPrototype" name="TestUpdate" />
                            </mal:field>
                        </mal:publishNotify>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef comment="One or more of the entities identified in the registration do not exist.">
                            <mal:type area="MAL" name="UNKNOWN" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:pubsubIP>
            </mal:capabilitySet>
            <mal:capabilitySet number="102">
                <mal:submitIP name="publishUpdates" number="108"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table, publishes an update as specified by the parameter TestPublishUpdate and checks the header of the Publish message (see 4.1.3). Moreover if an error is expected by the TestPublishUpdate then the operation hangs until a Publish error is raised or a timer ends (see 4.1.10). The header of the Publish error message is checked (see 4.1.4).">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" comment="">
                                <mal:type area="MALPrototype" name="TestPublishUpdate" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>

                </mal:submitIP>
                <mal:submitIP name="publishRegister" number="110"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table, registers a publisher as specified by the parameter TestPublishRegister and checks the header of the Publish Register message (see 4.1.5). Moreover if no error is expected by the TestPublishRegister, it checks the header of the Publish Register acknowledgement message (see 4.1.6). Otherwise it checks the header of the Publish Register error message (see 4.1.7).">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" comment="">
                                <mal:type area="MALPrototype" name="TestPublishRegister" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>

                </mal:submitIP>
                <mal:submitIP name="publishDeregister" number="111"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table, registers a publisher as specified by the parameter TestPublishDeregister and checks the header of the Publish Deregister message (see 4.1.5). Moreover if no error is expected by the TestPublishDeregister, it checks the header of the Publish Deregister acknowledgement message (see 4.1.8). Otherwise it checks the header of the Publish Deregister error message (see 4.1.9).">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" comment="">
                                <mal:type area="MALPrototype" name="TestPublishDeregister" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>

                </mal:submitIP>
                <mal:submitIP name="testMultipleNotify" number="112"
                              supportInReplay="false" comment="">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" comment="">
                                <mal:type area="MALPrototype" name="TestPublishUpdate" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>

                </mal:submitIP>
            </mal:capabilitySet>
        </mal:service>
        <mal:dataTypes>
            <mal:composite name="Assertion" shortFormPart="1"
                           comment="">
                <mal:extends>
                    <mal:type area="MAL" name="Composite" />
                </mal:extends>
                <mal:field name="procedureName" comment="Name of the test procedure that evaluated the assertion.">
                    <mal:type area="MAL" name="String" />
                </mal:field>
                <mal:field name="Info" comment="Message explaining what the assertion checks.">
                    <mal:type area="MAL" name="String" />
                </mal:field>
                <mal:field name="Result" comment="Boolean indicating whether the assertion succeeded (true) or not (false).">
                    <mal:type area="MAL" name="Boolean" />
                </mal:field>
            </mal:composite>
            <mal:composite name="MyFirstObject" shortFormPart="2" comment="">
                <mal:extends>
                    <mal:type area="MAL" name="Object" />
                </mal:extends>
                <mal:field name="procedureName" comment="Name of the test procedure that evaluated the assertion.">
                    <mal:type area="MAL" name="String" />
                </mal:field>
                <mal:field name="Info" comment="Message explaining what the assertion checks.">
                    <mal:type area="MAL" name="String" />
                </mal:field>
                <mal:field name="Result" comment="Boolean indicating whether the assertion succeeded (true) or not (false).">
                    <mal:type area="MAL" name="Boolean" />
                </mal:field>
            </mal:composite>
            <mal:enumeration name="IPTestTransitionType"
                             shortFormPart="3" comment="">
                <mal:item value="ACK" nvalue="1" comment="" />
                <mal:item value="RESPONSE" nvalue="2" comment="" />
                <mal:item value="ACK_ERROR" nvalue="3" comment="" />
                <mal:item value="RESPONSE_ERROR" nvalue="4"
                          comment="" />
                <mal:item value="UPDATE" nvalue="5" comment="" />
                <mal:item value="UPDATE_ERROR" nvalue="6" comment="" />
            </mal:enumeration>
            <mal:composite name="IPTestDefinition" shortFormPart="4"
                           comment="This abstract structure is inherited by all the IP test definition structures.">
                <mal:extends>
                    <mal:type area="MAL" name="Composite" />
                </mal:extends>
                <mal:field name="procedureName" comment="Name of the test procedure">
                    <mal:type area="MAL" name="String" />
                </mal:field>
                <mal:field name="consumerURI" comment="The consumer's URI">
                    <mal:type area="MAL" name="URI" />
                </mal:field>
                <mal:field name="authenticationId"
                           comment="The authentication identifier used by the consumer">
                    <mal:type area="MAL" name="Blob" />
                </mal:field>
                <mal:field name="Qos"
                           comment="The QoS level required by the consumer">
                    <mal:type area="MAL" name="QoSLevel" />
                </mal:field>
                <mal:field name="Priority"
                           comment="The priority level required by the consumer">
                    <mal:type area="MAL" name="UInteger" />
                </mal:field>
                <mal:field name="Domain" comment="The domain used by the consumer">
                    <mal:type list="true" area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="networkZone"
                           comment="The network zone used by the consumer">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="Session"
                           comment="The type of the session used by the consumer">
                    <mal:type area="MAL" name="SessionType" />
                </mal:field>
                <mal:field name="sessionName"
                           comment="The identifier of the session used by the consumer">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="supplements"
                           comment="The supplements field used by the consumer">
                    <mal:type list="true" area="MAL" name="NamedValue" />
                </mal:field>
                <mal:field name="transitions"
                           comment="The transitions that are requested by the consumer">
                    <mal:type list="true" area="MALPrototype"
                              name="IPTestTransition" />
                </mal:field>
                <mal:field name="timestamp"
                           comment="The time the consumer initiated the interaction.">
                    <mal:type area="MAL" name="Time" />
                </mal:field>
            </mal:composite>
            <mal:composite name="IPTestTransition" shortFormPart="5"
                           comment="This structure is used to define an expected transition from an IP test. It asserts what transition is expected and what result is expected from the transition: successful or failure.">
                <mal:extends>
                    <mal:type area="MAL" name="Composite" />
                </mal:extends>
                <mal:field name="Type" comment="The type of the transition to do">
                    <mal:type area="MALPrototype"
                              name="IPTestTransitionType" />
                </mal:field>
                <mal:field name="errorCode"
                           comment="The code of the error expected to be raised when doing the transition (failed transition).-1 if no error is expected (successful transition).">
                    <mal:type area="MAL" name="UInteger" />
                </mal:field>
            </mal:composite>
            <mal:composite name="BadHeaderReport" shortFormPart="6"
                           comment="This data structure is an error report produced after having found a faulty header.">
                <mal:extends>
                    <mal:type area="MAL" name="Composite" />
                </mal:extends>
                <mal:field name="expectedHeader" comment="The expected header">
                    <mal:type area="MALPrototype" name="MessageHeader" />
                </mal:field>
                <mal:field name="faultyHeader"
                           comment="The header that is not compliant with the MAL rules">
                    <mal:type area="MALPrototype" name="MessageHeader" />
                </mal:field>
            </mal:composite>
            <mal:composite name="TestPublish"
                           comment="This abstract structure is a publish context.">
                <mal:extends>
                    <mal:type area="MAL" name="Composite" />
                </mal:extends>
                <mal:field name="Qos" comment="The QoS level to be used by the provider.">
                    <mal:type area="MAL" name="QoSLevel" />
                </mal:field>
                <mal:field name="Priority" comment="The priority to be used by the provider.">
                    <mal:type area="MAL" name="UInteger" />
                </mal:field>
                <mal:field name="domain" comment="The domain to be used by the provider.">
                    <mal:type list="true" area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="networkZone" comment="The network zone to be used by the provider.">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="Session" comment="The session type to be used by the provider.">
                    <mal:type area="MAL" name="SessionType" />
                </mal:field>
                <mal:field name="sessionName" comment="The session name to be used by the provider.">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="testMultiType" comment="Whether to use the multi type version of the PubSub operation.">
                    <mal:type area="MAL" name="Boolean" />
                </mal:field>
            </mal:composite>
            <mal:composite name="TestPublishRegister" shortFormPart="7"
                           comment="This data structure specifies how the IPTest provider shall register.">
                <mal:extends>
                    <mal:type area="MALPrototype" name="TestPublish" />
                </mal:extends>
                <mal:field name="keyNames"
                           comment="The names of the keys to be used by the broker.">
                    <mal:type area="MAL" name="IdentifierList" />
                </mal:field>
                <mal:field name="keyTypes"
                           comment="The types of the keys to be used by the broker.">
                    <mal:type area="MAL" name="AttributeTypeList" />
                </mal:field>
                <mal:field name="errorCode"
                           comment="The code of the Publish Register error expected to be received.-1 if no Publish Register error is expected.">
                    <mal:type area="MAL" name="UInteger" />
                </mal:field>
            </mal:composite>
            <mal:composite name="TestPublishDeregister"
                           shortFormPart="8"
                           comment="This data structure specifies how the IPTest provider shall register.">
                <mal:extends>
                    <mal:type area="MALPrototype"
                              name="TestPublish" />
                </mal:extends>
                <mal:field name="errorCode"
                           comment="The code of the Publish Deregister error expected to be received.-1 if no Publish Deregister error is expected.">
                    <mal:type area="MAL" name="UInteger" />
                </mal:field>
            </mal:composite>
            <mal:composite name="TestPublishUpdate" shortFormPart="9"
                           comment="This data structure specifies how the IPTest provider shall publish an update.">
                <mal:extends>
                    <mal:type area="MALPrototype"
                              name="TestPublish" />
                </mal:extends>
                <mal:field name="updateHeaders"
                           comment="The headers of the updates to be published by the provider">
                    <mal:type list="true" area="MAL"
                              name="UpdateHeader" />
                </mal:field>
                <mal:field name="updates"
                           comment="The updates to be published by the provider">
                    <mal:type list="true" area="MALPrototype"
                              name="TestUpdate" />
                </mal:field>
                <mal:field name="keyValues"
                           comment="The list of key values">
                    <mal:type area="MAL" name="NullableAttributeList" />
                </mal:field>
                <mal:field name="errorCode"
                           comment="The code of the Publish error expected to be received.-1 if no Publish error is expected.">
                    <mal:type area="MAL" name="UInteger" />
                </mal:field>
                <mal:field name="isException"
                           comment="Indicates whether the error is returned as an Exception or a Publish Error message">
                    <mal:type area="MAL" name="Boolean" />
                </mal:field>
                <mal:field name="failedKeyValues"
                           comment="The list of failed keys values.">
                    <mal:type area="MAL" name="NullableAttributeList" />
                </mal:field>
            </mal:composite>
            <mal:composite name="TestUpdate" shortFormPart="10"
                           comment="This data structure defines an Update published by the IPTest.">
                <mal:field name="Counter"
                           comment="A counter used to distinguish the test updates and to check the ordering.">
                    <mal:type area="MAL" name="Integer" />
                </mal:field>
            </mal:composite>
            <mal:composite name="InteractionKey" shortFormPart="11"
                           comment="">
                <mal:extends>
                    <mal:type area="MAL" name="Composite" />
                </mal:extends>
                <mal:field name="URIfrom" comment="The consumer's URI">
                    <mal:type area="MAL" name="URI" />
                </mal:field>
                <mal:field name="transactionId"
                           comment="The transaction identifier of the interaction">
                    <mal:type area="MAL" name="Integer" />
                </mal:field>
                <mal:field name="interactionType" comment="The type of the interaction">
                    <mal:type area="MAL" name="InteractionType" />
                </mal:field>
                <mal:field name="Service" comment="The name of the called service">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="operation" comment="The name of the called operation">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
            </mal:composite>
            <mal:composite name="IPTestResult" shortFormPart="12"
                           comment="">
                <mal:extends>
                    <mal:type area="MAL" name="Composite" />
                </mal:extends>
                <mal:field name="transactionId"
                           comment="The transaction identifier assigned to the last interaction">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="assertions"
                           comment="The list of assertions checked by the provider.">
                    <mal:type list="true" area="MALPrototype" name="Assertion" />
                </mal:field>
            </mal:composite>
            <mal:composite name="MessageHeader" shortFormPart="13"
                           comment="The MessageHeader structure is used to hold all fields that are passed for each message exchanged between a consumer and provider. See 4.1 for more information.">
                <mal:extends>
                    <mal:type area="MAL" name="Composite" />
                </mal:extends>
                <mal:field name="URIfrom" comment="Message Source URI">
                    <mal:type area="MAL" name="URI" />
                </mal:field>
                <mal:field name="authenticationId" comment="Source Authentication Credentials">
                    <mal:type area="MAL" name="Blob" />
                </mal:field>
                <mal:field name="URIto" comment="Message Destination URI">
                    <mal:type area="MAL" name="URI" />
                </mal:field>
                <mal:field name="timestamp" comment="Message generation timestamp">
                    <mal:type area="MAL" name="Time" />
                </mal:field>
                <mal:field name="QoSlevel" comment="The QoS level of the message">
                    <mal:type area="MAL" name="QoSLevel" />
                </mal:field>
                <mal:field name="priority" comment="The QoS priority of the message">
                    <mal:type area="MAL" name="UInteger" />
                </mal:field>
                <mal:field name="domain" comment="Domain of the message">
                    <mal:type list="true" area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="networkZone" comment="Network zone of the message">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="session" comment="Type of session of the message">
                    <mal:type area="MAL" name="SessionType" />
                </mal:field>
                <mal:field name="sessionName"
                           comment="Name of the session of the message. Shall be LIVE if session type is LIVE.">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="interactionType" comment="Interaction Pattern Type">
                    <mal:type area="MAL" name="InteractionType" />
                </mal:field>
                <mal:field name="interactionStage" comment="Interaction Pattern Stage">
                    <mal:type area="MAL" name="UOctet" />
                </mal:field>
                <mal:field name="transactionId" comment="Unique to consumer">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="area" comment="Service Area Identifier">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="service" comment="Service Identifier">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="operation" comment="Service Operation Identifier">
                    <mal:type area="MAL" name="Identifier" />
                </mal:field>
                <mal:field name="version" comment="Service version">
                    <mal:type area="MAL" name="UOctet" />
                </mal:field>
                <mal:field name="isError"
                           comment="True if this is an error message else False.">
                    <mal:type area="MAL" name="Boolean" />
                </mal:field>
            </mal:composite>
            <mal:composite name="Auto" comment="An abstract object type for cars. This type and all derived types are notably used in the Polymorphic types test procedure related to ObjectRef.">
                <mal:extends>
                    <mal:type area="MAL" name="Object" />
                </mal:extends>
                <mal:field name="engine" comment="The engine of the car.">
                    <mal:type area="MAL" name="String" />
                </mal:field>
                <mal:field name="chassis" comment="The chassis of the car.">
                    <mal:type area="MAL" name="String" />
                </mal:field>
                <mal:field name="windows" comment="The windows of the car.">
                    <mal:type list="true" area="MAL" name="String" />
                </mal:field>
            </mal:composite>
            <mal:composite name="Lamborghini" shortFormPart="120" comment="The object representing a Lamborghini car.">
                <mal:extends>
                    <mal:type area="MALPrototype" name="Auto" />
                </mal:extends>
            </mal:composite>
            <mal:composite name="Porsche" shortFormPart="121" comment="The object representing a Porsche car.">
                <mal:extends>
                    <mal:type area="MALPrototype" name="Auto" />
                </mal:extends>
            </mal:composite>
            <mal:composite name="Garage" shortFormPart="122" comment="The object representing a Garage with multiple references and lists of references to cars.">
                <mal:extends>
                    <mal:type area="MAL" name="Object" />
                </mal:extends>
                <mal:field name="courtesyCarAsPorsche" comment="The Porsche courtesy car offered by the garage.">
                    <mal:type area="MALPrototype" name="ObjectRef(Porsche)" />
                </mal:field>
                <mal:field name="courtesyCarAsAuto" comment="The courtesy car offered by the garage.">
                    <mal:type area="MALPrototype" name="ObjectRef(Auto)" />
                </mal:field>
                <mal:field name="courtesyCarAsObject" comment="The courtesy car offered by the garage.">
                    <mal:type area="MAL" name="ObjectRef(Element)" />
                </mal:field>
                <mal:field name="carsAsPorsches" comment="The list of Porsche cars parked in the garage.">
                    <mal:type list="true" area="MALPrototype" name="ObjectRef(Porsche)" />
                </mal:field>
                <mal:field name="carsAsAutos" comment="The list of cars parked in the garage.">
                    <mal:type list="true" area="MALPrototype" name="ObjectRef(Auto)" />
                </mal:field>
                <mal:field name="carsAsObjects" comment="The list of cars parked in the garage.">
                    <mal:type list="true" area="MAL" name="ObjectRef(Element)" />
                </mal:field>
            </mal:composite>
            <mal:composite name="TestObjectBase" comment="An abstract MO Object structure.">
                <mal:extends>
                    <mal:type area="MAL" name="Object" />
                </mal:extends>
                <mal:field name="firstItem" comment="Example String item.">
                    <mal:type area="MAL" name="String" />
                </mal:field>
                <mal:field name="secondItem" comment="Example Integer item.">
                    <mal:type area="MAL" name="Integer" />
                </mal:field>
            </mal:composite>
            <mal:composite name="TestObject" shortFormPart="20" comment="A concrete MO Object structure which does not extend directly the MAL Object type.">
                <mal:extends>
                    <mal:type area="MALPrototype" name="TestObjectBase" />
                </mal:extends>
                <mal:field name="thirdItem" comment="Another example String item.">
                    <mal:type area="MAL" name="String" />
                </mal:field>
                <mal:field name="fourthItem" comment="Example Boolean item.">
                    <mal:type area="MAL" name="Boolean" />
                </mal:field>
            </mal:composite>
            <mal:composite name="TestBody" shortFormPart="123" comment="An concrete composite example used to build complex composite structures.">
                <mal:extends>
                    <mal:type area="MAL" name="Composite" />
                </mal:extends>
                <mal:field name="firstItem" comment="Example String item.">
                    <mal:type area="MAL" name="String" />
                </mal:field>
                <mal:field name="secondItem" comment="Example Integer item.">
                    <mal:type area="MAL" name="Integer" />
                </mal:field>
            </mal:composite>
            <mal:composite name="AbstractComposite" comment="An abstract composite example. This type and all derived types are notably used in the Polymorphic types test procedure.">
                <mal:extends>
                    <mal:type area="MAL" name="Composite" />
                </mal:extends>
                <mal:field name="firstItem" comment="Example String item.">
                    <mal:type area="MAL" name="String" />
                </mal:field>
                <mal:field name="secondItem" comment="Example Integer item.">
                    <mal:type area="MAL" name="Integer" />
                </mal:field>
            </mal:composite>
            <mal:composite name="ComplexStructure" shortFormPart="345" comment="A concrete composite example extending an Abstract composite with some common fields.">
                <mal:extends>
                    <mal:type area="MALPrototype" name="AbstractComposite" />
                </mal:extends>
                <mal:field name="third_item" comment="Extra Boolean item.">
                    <mal:type area="MAL" name="Boolean" />
                </mal:field>
                <mal:field name="fourth_item" comment="Example Integer item.">
                    <mal:type area="MAL" name="Integer" />
                </mal:field>
                <mal:field name="last_item" comment="Contained structure.">
                    <mal:type area="MALPrototype" name="TestBody" />
                </mal:field>
            </mal:composite>
            <mal:composite name="BasicAbstractComposite" shortFormPart="346" comment="A concrete composite example extending an Abstract composite with no field.">
                <mal:extends>
                    <mal:type area="MALPrototype" name="AbstractComposite" />
                </mal:extends>
            </mal:composite>
            <mal:composite name="StructureWithAbstractField" shortFormPart="347" comment="A concrete composite example extending an Abstract composite with a field which is itself an Abstract composite, allowing for defining complex instances.">
                <mal:extends>
                    <mal:type area="MALPrototype" name="AbstractComposite" />
                </mal:extends>
                <mal:field name="abstract_item" comment="Contained abstract structure.">
                    <mal:type area="MALPrototype" name="AbstractComposite" />
                </mal:field>
                <mal:field name="third_item" comment="Extra Boolean item.">
                    <mal:type area="MAL" name="Boolean" />
                </mal:field>
                <mal:field name="fourth_item" comment="Example Integer item.">
                    <mal:type area="MAL" name="Integer" />
                </mal:field>
            </mal:composite>
        </mal:dataTypes>
        <mal:errors>
            <mal:error name="DATA_ERROR" number="1"
                       comment="Data interoperability error." />
            <mal:error name="TEST_OBJECT_EXISTS" number="2"
                       comment="MO Object already exists." />
            <mal:error name="TEST_ERROR" number="3"
                       comment="Fake error for testing." />
        </mal:errors>
    </mal:area>
    <mal:area name="MALPrototype2" number="101" version="1">
        <mal:service name="IPTest" number="1">
            <mal:capabilitySet number="100">
                <mal:pubsubIP name="monitor" number="105"
                              supportInReplay="false"
                              comment="This operation initiates a Pub/Sub interaction. It is not implemented by the service provider but by a broker.">
                    <mal:messages>
                        <mal:publishNotify>
                            <mal:field name="pub" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestUpdate" />
                            </mal:field>
                        </mal:publishNotify>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef
                            comment="One or more of the entities identified in the registration do not exist.">
                            <mal:type area="MAL" name="UNKNOWN" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:pubsubIP>
                <mal:pubsubIP name="monitor2" number="106"
                              supportInReplay="false"
                              comment="This operation initiates a Pub/Sub interaction. It is not implemented by the service provider but by a broker.">
                    <mal:messages>
                        <mal:publishNotify>
                            <mal:field name="pub" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestUpdate" />
                            </mal:field>
                        </mal:publishNotify>
                    </mal:messages>
                    <mal:errors>
                        <mal:errorRef
                            comment="One or more of the entities identified in the registration do not exist.">
                            <mal:type area="MAL" name="UNKNOWN" />
                        </mal:errorRef>
                    </mal:errors>
                </mal:pubsubIP>
            </mal:capabilitySet>
            <mal:capabilitySet number="102">
                <mal:submitIP name="publishUpdates" number="108"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table, publishes an update as specified by the parameter TestPublishUpdate and checks the header of the Publish message (see 4.1.3). Moreover if an error is expected by the TestPublishUpdate then the operation hangs until a Publish error is raised or a timer ends (see 4.1.10). The header of the Publish error message is checked (see 4.1.4).">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestPublishUpdate" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>
                </mal:submitIP>
                <mal:submitIP name="publishRegister" number="110"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table, registers a publisher as specified by the parameter TestPublishRegister and checks the header of the Publish Register message (see 4.1.5). Moreover if no error is expected by the TestPublishRegister, it checks the header of the Publish Register acknowledgement message (see 4.1.6). Otherwise it checks the header of the Publish Register error message (see 4.1.7).">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestPublishRegister" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>
                </mal:submitIP>
                <mal:submitIP name="publishDeregister" number="111"
                              supportInReplay="false"
                              comment="This operation cleans the assertions table, registers a publisher as specified by the parameter TestPublishDeregister and checks the header of the Publish Deregister message (see 4.1.5). Moreover if no error is expected by the TestPublishDeregister, it checks the header of the Publish Deregister acknowledgement message (see 4.1.8). Otherwise it checks the header of the Publish Deregister error message (see 4.1.9).">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestPublishDeregister" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>
                </mal:submitIP>
                <mal:submitIP name="testMultipleNotify" number="112" supportInReplay="false" comment="">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="TestPublishUpdate" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>
                </mal:submitIP>
                <mal:submitIP name="testObjectRefSubmit" number="113" supportInReplay="false" comment="">
                    <mal:messages>
                        <mal:submit>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="ObjectRef(Auto)" />
                            </mal:field>
                        </mal:submit>
                    </mal:messages>
                </mal:submitIP>
                <mal:sendIP name="testObjectRefSend" number="114" supportInReplay="false" comment="">
                    <mal:messages>
                        <mal:send>
                            <mal:field name="input" canBeNull="true" comment="">
                                <mal:type area="MALPrototype" name="ObjectRef(Auto)" />
                            </mal:field>
                        </mal:send>
                    </mal:messages>
                </mal:sendIP>   
            </mal:capabilitySet>
        </mal:service>
    </mal:area>
</mal:specification>
